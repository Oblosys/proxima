-- do not edit; automatically generated by UU.AG
module PresentationAG where

import CommonTypes
import PresLayerTypes
import PresLayerUtils

import XprezLib
import XLatex hiding (bold)

import DocumentEdit

import List
import Data.FiniteMap

import IOExts

import qualified Chess

pthFrmMsg :: HeliumMessage -> ([PathDoc], [PathDoc], [PathDoc])
pthFrmMsg (HError _ ps1 ps2 ps3) = (ps1, ps2, ps3)
pthFrmMsg _ = ([],[],[])

toMessage str = HError (lines str) [] [] []

-- if ps1 ++ ps2 ++ ps3 not null then head is link
presMessage :: HeliumMessage -> Presentation
presMessage (HError lns ps1 ps2 ps3) = case ps1++ps2++ps3 of []      -> col' (map (text) lns) `withColor` errColor
                                                             rng:_   -> col' (map (text) lns) `withColor` errColor
                                                                        `link` rng
presMessage (HMessage lns)           = col' (map (text) lns) `withColor` msgColor 

msgColor = blue
errColor = red


presentFocus NoPathD     path pres = pres
presentFocus (PathD pth) path pres = if pth==path then pres `withbgColor` lightBlue else pres

squiggleRanges (rngs1, rngs2, rngs3) pth pres =
  if (PathD pth) `elem` rngs1 then squiggly error1Color pres
  else if (PathD pth) `elem` rngs2 then pres -- squiggly error2Color pres
  else if (PathD pth) `elem` rngs3 then squiggly error3Color pres
  else pres
-- WX bitmap coloring is not ok yet, so squigglies are always red.
-- Until this is fixed, green squigglies are not shown

error1Color = red
error2Color = green
error3Color = red

link :: Xprez -> PathDoc -> Xprez
link xp NoPathD = xp
link xp path    = xp `withMouseDown` navigateTo path

navigateTo :: PathDoc -> UpdateDoc
navigateTo NoPathD = id
navigateTo (PathD pth) = (\(DocumentLevel d _ cl) -> DocumentLevel d (PathD pth) cl)


expand :: [Int] -> Decl -> UpdateDoc
expand pth (Decl idD idP0 idP1 idP2 idP3 expanded autoLayout ident exp) =
  \(DocumentLevel d path cl) ->
    let (DocumentLevel d' _ _) = editPasteD (DocumentLevel d (PathD pth) 
                                              (Clip_Decl (Decl idD idP0 idP1 idP2 idP3 (Bool_ NoIDD True) autoLayout ident exp))
                                            )
    in  (DocumentLevel d' path cl)

toggleExpanded :: [Int] -> Decl -> UpdateDoc
toggleExpanded pth (Decl idD idP0 idP1 idP2 idP3 expanded autoLayout ident exp) =
  \(DocumentLevel d path cl) ->
    let (DocumentLevel d' _ _) = editPasteD (DocumentLevel d (PathD pth) 
                                              (Clip_Decl (Decl idD idP0 idP1 idP2 idP3 (Bool_ NoIDD (not $ boolVal expanded)) autoLayout ident exp))
                                            )
    in  (DocumentLevel d' path cl)


toggleAutoLayout :: [Int] -> Decl -> UpdateDoc
toggleAutoLayout pth (Decl idD idP0 idP1 idP2 idP3 expanded autoLayout ident exp) =
  \(DocumentLevel d path cl) ->
    let (DocumentLevel d' _ _) = editPasteD (DocumentLevel d (PathD pth) 
                                              (Clip_Decl (Decl idD idP0 idP1 idP2 idP3 expanded (Bool_ NoIDD (not $ boolVal autoLayout)) ident exp))
                                            )
    in  (DocumentLevel d' path cl)


-- use attributes!
strFromIdent (Ident _ _ _ (String_ _ str)) = str
strFromIdent _               = ""

idP0FromIdent (Ident _ idp0 _ str) = idp0
idP0FromIdent _                    = NoIDP

box xp = overlay [xp, poly [(0,0),(1,0),(1,1),(0,1),(0,0)],empty]
presHole focus typeStr nd pth = loc nd $ 
  structural $ row [text $ "{"++typeStr++"}"] `withColor` black `withbgColor` yellow `withFontFam` ("Courier New")
  
--  structural $ overlay [poly [(0,0),(1,0),(1,1),(0,1),(0,0)], text $ "{"++typeStr++"}"] `withColor` black `withbgColor` yellow `withFont'` ("Courier New", 10)
  
presParseErr node pres =
  loc node $ parsing $ pres {- $ overlay [ pres, poly [(0,0),(1,0),(1,1),(0,1),(0,0)] `withColor` red, empty ] -} 
                                                                                     -- empty trick
                          `withbgColor` whiteSmoke


row'  = RowP (NoIDP) 0 
col'  = ColP (NoIDP) 0
text' idc = StringP idc

der:: IDP -> String -> Xprez
der idc str = StringP idc str `withColor` derCol
 

op :: IDP -> String -> Xprez
op idc str = StringP idc str `withColor` opCol

key :: IDP -> String -> Xprez
key idc str = StringP idc str `withColor` keyCol

sep :: IDP -> String -> Xprez
sep idc str = StringP idc str `withColor` sepCol

cons :: IDP -> String -> Xprez
cons idc str = StringP idc str `withColor` consCol

typeD :: IDP -> String -> Xprez
typeD idc str = bold $ StringP idc str `withColor` typeDCol



derCol = green
opCol = black
keyCol = blue
sepCol = brown
consCol = black
typeDCol = purple --darkViolet
--idC = unsafePerformIO $ newIORef (0 :: Int)

--newIDP _ = IDP $ unsafePerformIO $ do {modifyIORef idC (+1); readIORef idC}




-- oparen pprec cprec = if pprec > cprec then [text "("] else []
-- cparen pprec cprec = if pprec > cprec then [text ")"] else []

--addloc exp pth pres = loc (ExpNode exp pth)


idCounter = unsafePerformIO $ newIORef (0 :: Int)

-- needs a fresh arg to prevent sharing.
newIDP _ = IDP $ unsafePerformIO $ do {modifyIORef idCounter (+1); readIORef idCounter}


mkIDP NoIDP idC offset = IDP (idC + offset)
mkIDP id@(IDP _) _ _   = id


data TypeTree = TypeNode TypeInfo [TypeTree]  

data TypeInfo = TypeInfo String (Maybe String)

lookupType typeEnv path = case lookup (PathD path) typeEnv of 
                            Nothing -> "<no type>"  -- use Maybe here?
                            Just tp -> tp

type Bindings = [Binding]
type Binding = (String, Value)



data Value = BoolVal Bool
         | IntVal Int
         | LamVal (Value -> Value)
         | ListVal [Value]
         | ProdVal [Value]
         | ErrVal 

instance Show Value where
  show (BoolVal b) = show b
  show (IntVal i)  = show i
  show (LamVal _)  = "<function>"
  show (ListVal vs) = "[" ++ concat (intersperse ", " (map show vs)) ++ "]"
  show (ProdVal vs) = "(" ++ concat (intersperse ", " (map show vs)) ++ ")"
  show (ErrVal)   = "ERROR"
{-

evaluate :: Exp -> [(String, Val)] -> Val
evaluate (Lam ident exp) env =
evaluate (AppExp f a) env =   
-}
evaluateIntOp op (IntVal v1) (IntVal v2) = IntVal $ v1 `op` v2
evaluateIntOp _  _           _           = ErrVal



presentList []     = row' [sep NoIDP "  []"]
presentList (p:ps) = col' $  [ row' [sep NoIDP "  [ ", p ] ]
                          ++ [ row' [sep NoIDP "  , ", p]| p <- ps ]
                          ++ [ sep NoIDP "  ] "]

toggleViewType :: [Int] -> PPPresentation -> UpdateDoc
toggleViewType pth (PPPresentation idD viewtp slides) =
  \(DocumentLevel d path cl) ->
    let (DocumentLevel d' _ _) = editPasteD (DocumentLevel d (PathD pth) 
                                              (Clip_PPPresentation (PPPresentation idD (Bool_ NoIDD (not $ boolVal viewtp)) slides))
                                            )
    in  (DocumentLevel d' path cl)


itemStart i (Bullet _) typeLoc = typeLoc $ text "- "
itemStart i (Number _) typeLoc = typeLoc $ text (show (i+1) ++ ") ")
itemStart i (Alpha  _) typeLoc = typeLoc $ text (chr (ord 'a' + i):") ")
itemStart i (_)        typeLoc = typeLoc $ text "  "


presentElementXML :: FocusDoc -> Node -> [Int] -> String -> [Presentation] -> Presentation
presentElementXML focusD node path tag children =
  loc node $ parsing $ presentFocus focusD path $                  
    if null children
    then col [ text $ "<"++tag++"/>"]
    else col [ text  $ "<"++tag++">"
             , row [ text "  ", col children ]
             , text $ "</"++tag++">" ]      
    
presentPrimXMLBool :: Bool -> Presentation
presentPrimXMLBool x = text $ "<Bool>"++show x++"<Bool/>"

presentPrimXMLInt :: Int -> Presentation
presentPrimXMLInt x = text $ "<Int>"++show x++"<Int/>"

presentPrimXMLString :: String -> Presentation
presentPrimXMLString x = text $ "<String>"++x++"<String>"


presentElementTree :: FocusDoc -> Node -> [Int] -> String -> [Presentation] -> Presentation
presentElementTree focusD node path tag children =
  loc node $ parsing $ presentFocus focusD path $                  
    if null children
    then mkTreeLeaf False $ text $ tag
    else mkTreeNode False True (text tag) children
    
presentPrimTreeBool :: Bool -> Presentation
presentPrimTreeBool x =  mkTreeLeaf False $ text $ "Bool: "++show x

presentPrimTreeInt :: Int -> Presentation
presentPrimTreeInt x =  mkTreeLeaf False $ text $ "Int: "++show x

presentPrimTreeString :: String -> Presentation
presentPrimTreeString x =  mkTreeLeaf False $ text $ "String: "++x

--n2 = mkTreeNode False False (text "node 2" `withFontSize` 50) []

--addReductionPopupItems :: [ PopupItem ] -> Presentation -> Presentation
addReductionPopupItems its pres = addPopupItems pres its

pasteExp :: [Int] -> Exp -> UpdateDoc
pasteExp pth exp =
  \(DocumentLevel d path cl) ->
    let (DocumentLevel d' _ _) = editPasteD (DocumentLevel d (PathD pth) 
                                              (Clip_Exp exp)
                                            )
    in  (DocumentLevel d' path cl)


setIDPExp newIdp (PlusExp idd idp0 x1 x2)           = PlusExp idd newIdp x1 x2          
setIDPExp newIdp (TimesExp idd idp x1 x2)           = TimesExp idd newIdp x1 x2          
setIDPExp newIdp (DivExp idd idp0 x1 x2)            = DivExp idd idp0 x1 x2           
setIDPExp newIdp (PowerExp idd idp0 x1 x2)          = PowerExp idd newIdp x1 x2         
setIDPExp newIdp (BoolExp idd idp0 x1)              = BoolExp idd newIdp x1             
setIDPExp newIdp (IntExp idd idp0 x1)               = IntExp idd newIdp x1              
setIDPExp newIdp (CaseExp idd idp0 idp1 x1 x2)       = CaseExp idd newIdp idp1 x1 x2      
setIDPExp newIdp (LetExp idd idp0 idp1 dcls x2)     = LetExp idd newIdp idp1 dcls x2    
setIDPExp newIdp (LamExp idd idp0 idp1 x1 x2)       = LamExp idd newIdp idp1 x1 x2      
setIDPExp newIdp (AppExp idd x1 x2)                 = AppExp idd (setIDPExp newIdp x1) x2  -- has no pid of its own
setIDPExp newIdp (IdentExp idd x1)                  = IdentExp idd (setIDPIdent newIdp x1) -- has no pid of its own
setIDPExp newIdp (IfExp idd idp0 idp idp1 x1 x2 x3) = IfExp idd newIdp idp idp1 x1 x2 x3
setIDPExp newIdp (ParenExp idd idp0 idp1 x1)        = ParenExp idd newIdp idp1 x1    
setIDPExp newIdp (ListExp idd idp0 idp1 idps x1)    = ListExp idd newIdp idp1 idps x1
setIDPExp newIdp (ProductExp idd idp0 idp1 idps x1) = ProductExp idd newIdp idp1 idps x1
setIDPExp _   exp                                   = exp

setIDPIdent newIdp (Ident idd idp0 idp1 str) = Ident idd newIdp idp1 str

removeParens (ParenExp _ _ _ x1) = removeParens x1
removeParens exp                 = exp

ensureParens exp = ParenExp NoIDD NoIDP NoIDP (removeParens exp)
-- Alt ---------------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      totalMaxLHSLength    : Int
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      alt                  : Binding
      lhsLength            : Int
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for Alt.Alt:
      lhsLength
      self

-}
{-
   local variables for Alt.HoleAlt:
      self

-}
{-
   local variables for Alt.ParseErrAlt:
      self

-}
-- semantic domain
type T_Alt = (Int) ->
             (Bindings) ->
             ([HeliumMessage]) ->
             (FocusDoc) ->
             (Int) ->
             (LayoutMap) ->
             (Int) ->
             (Int) ->
             (Int) ->
             ([Int]) ->
             (([PathDoc],[PathDoc],[PathDoc])) ->
             (Int) ->
             ([(String, String)]) ->
             (Int) ->
             ([(PathDoc,String)]) ->
             (FiniteMap String (PathDoc, String)) ->
             (FiniteMap String (PathDoc, String)) ->
             ( (Binding),(Int),(LayoutMap),(Int),(Int),(Int),(Presentation),(Presentation),(Presentation),(Alt),(Int),(FiniteMap String (PathDoc, String)))
-- cata
sem_Alt :: (Alt) ->
           (T_Alt)
sem_Alt ((Alt (_idD) (_idP0) (_idP1) (_ident) (_exp))) =
    (sem_Alt_Alt (_idD) (_idP0) (_idP1) ((sem_Ident (_ident))) ((sem_Exp (_exp))))
sem_Alt ((HoleAlt )) =
    (sem_Alt_HoleAlt )
sem_Alt ((ParseErrAlt (_node) (_presentation))) =
    (sem_Alt_ParseErrAlt (_node) (_presentation))
sem_Alt_Alt :: (IDD) ->
               (IDP) ->
               (IDP) ->
               (T_Ident) ->
               (T_Exp) ->
               (T_Alt)
sem_Alt_Alt (idD_) (idP0_) (idP1_) (ident_) (exp_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalt :: (Binding)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOlhsLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identIcol :: (Int)
            _identIfirstToken :: (IDP)
            _identIidsPres :: (Presentation)
            _identIlayoutMap :: (LayoutMap)
            _identInewlines :: (Int)
            _identIpIdC :: (Int)
            _identIpres :: (Presentation)
            _identIpresTree :: (Presentation)
            _identIpresXML :: (Presentation)
            _identIself :: (Ident)
            _identIspaces :: (Int)
            _identIstr :: (String)
            _identIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identOcol :: (Int)
            _identOfocusD :: (FocusDoc)
            _identOix :: (Int)
            _identOlayoutMap :: (LayoutMap)
            _identOlevel :: (Int)
            _identOnewlines :: (Int)
            _identOpIdC :: (Int)
            _identOpath :: ([Int])
            _identOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _identOspaces :: (Int)
            _identOvarsInScope :: (FiniteMap String (PathDoc, String))
            _identOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _identIcol,_identIfirstToken,_identIidsPres,_identIlayoutMap,_identInewlines,_identIpIdC,_identIpres,_identIpresTree,_identIpresXML,_identIself,_identIspaces,_identIstr,_identIvarsInScopeAtFocus) =
                (ident_ (_identOcol) (_identOfocusD) (_identOix) (_identOlayoutMap) (_identOlevel) (_identOnewlines) (_identOpIdC) (_identOpath) (_identOranges) (_identOspaces) (_identOvarsInScope) (_identOvarsInScopeAtFocus))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 358, column 7)
            (_lhsOpres@_) =
                loc (AltNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $
                  row'  $ [ _identIpres
                          , text' (mkIDP idP0_ _lhsIpIdC 0) "",
                                   key NoIDP "®"    `withFontFam` "symbol"
                          , _expIpres
                          , sep (mkIDP idP1_ _lhsIpIdC 1) ";"
                          ]
            -- "PresentationAG.ag"(line 693, column 13)
            (_lhsLength@_) =
                length $ strFromIdent _identIself
            -- "PresentationAG.ag"(line 692, column 13)
            (_lhsOspaces@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 691, column 13)
            (_lhsOnewlines@_) =
                1
            -- "PresentationAG.ag"(line 690, column 13)
            (_lhsOcol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 689, column 13)
            (_expOspaces@_) =
                1
            -- "PresentationAG.ag"(line 688, column 13)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 687, column 13)
            (_expOcol@_) =
                _identIcol+ _lhsItotalMaxLHSLength - _lhsLength + 3
            -- "PresentationAG.ag"(line 686, column 13)
            (_identOspaces@_) =
                _lhsIspaces
            -- "PresentationAG.ag"(line 685, column 13)
            (_identOnewlines@_) =
                _lhsInewlines
            -- "PresentationAG.ag"(line 684, column 13)
            (_identOcol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 683, column 13)
            (_identOlayoutMap@_) =
                addListToFM _lhsIlayoutMap [(idP0_, (0,_lhsItotalMaxLHSLength - _lhsLength+1)), (idP1_, (0,0))]
            -- "PresentationAG.ag"(line 813, column 7)
            (_identOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 983, column 17)
            (_lhsOalt@_) =
                (_identIstr, _expIval)
            -- "PresentationAG_Generated.ag"(line 342, column 9)
            (_lhsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 341, column 9)
            (_expOpIdC@_) =
                _identIpIdC
            -- "PresentationAG_Generated.ag"(line 340, column 9)
            (_identOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 349, column 9)
            (_expOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 348, column 9)
            (_identOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 710, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (AltNode _self _lhsIpath) _lhsIpath "Alt" [ _identIpresXML, _expIpresXML ]
            -- "PresentationAG_Generated.ag"(line 932, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (AltNode _self _lhsIpath) _lhsIpath "Alt" [ _identIpresTree, _expIpresTree ]
            -- self rule
            (_self@_) =
                Alt idD_ idP0_ idP1_ _identIself _expIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _expIlayoutMap
            -- copy rule (from local)
            (_lhsOlhsLength@_) =
                _lhsLength
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expIvarsInScopeAtFocus
            -- copy rule (down)
            (_identOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_identOix@_) =
                _lhsIix
            -- copy rule (down)
            (_identOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_identOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_identOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_expOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (chain)
            (_expOlayoutMap@_) =
                _identIlayoutMap
            -- copy rule (down)
            (_expOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_expOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_expOvarsInScopeAtFocus@_) =
                _identIvarsInScopeAtFocus
        in  ( _lhsOalt,_lhsOcol,_lhsOlayoutMap,_lhsOlhsLength,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_Alt_HoleAlt :: (T_Alt)
sem_Alt_HoleAlt  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalt :: (Binding)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOlhsLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 695, column 9)
            (_lhsOlhsLength@_) =
                0
            -- "PresentationAG.ag"(line 984, column 17)
            (_lhsOalt@_) =
                ("XXXXXX", ErrVal)
            -- "PresentationAG_Generated.ag"(line 343, column 17)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Alt" (HoleAltNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 711, column 17)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Alt" (HoleAltNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 933, column 17)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Alt" (HoleAltNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleAlt
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOalt,_lhsOcol,_lhsOlayoutMap,_lhsOlhsLength,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_Alt_ParseErrAlt :: (Node) ->
                       (Presentation) ->
                       (T_Alt)
sem_Alt_ParseErrAlt (node_) (presentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalt :: (Binding)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOlhsLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 697, column 9)
            (_lhsOlhsLength@_) =
                0
            -- "PresentationAG.ag"(line 985, column 17)
            (_lhsOalt@_) =
                ("XXXXXX", ErrVal)
            -- "PresentationAG_Generated.ag"(line 344, column 17)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 712, column 17)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 934, column 17)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrAlt node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOalt,_lhsOcol,_lhsOlayoutMap,_lhsOlhsLength,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
-- Board -------------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]

   chained attributes:
      pIdC                 : Int

   synthesised attributes:
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for Board.Board:
      possibleMoves
      self

-}
{-
   local variables for Board.HoleBoard:
      self

-}
{-
   local variables for Board.ParseErrBoard:
      self

-}
-- semantic domain
type T_Board = (FocusDoc) ->
               (Int) ->
               (Int) ->
               ([Int]) ->
               ( (Int),(Presentation),(Presentation),(Presentation),(Board))
-- cata
sem_Board :: (Board) ->
             (T_Board)
sem_Board ((Board (_idD) (_r1) (_r2) (_r3) (_r4) (_r5) (_r6) (_r7) (_r8))) =
    (sem_Board_Board (_idD) ((sem_BoardRow (_r1))) ((sem_BoardRow (_r2))) ((sem_BoardRow (_r3))) ((sem_BoardRow (_r4))) ((sem_BoardRow (_r5))) ((sem_BoardRow (_r6))) ((sem_BoardRow (_r7))) ((sem_BoardRow (_r8))))
sem_Board ((HoleBoard )) =
    (sem_Board_HoleBoard )
sem_Board ((ParseErrBoard (_node) (_presentation))) =
    (sem_Board_ParseErrBoard (_node) (_presentation))
sem_Board_Board :: (IDD) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_BoardRow) ->
                   (T_Board)
sem_Board_Board (idD_) (r1_) (r2_) (r3_) (r4_) (r5_) (r6_) (r7_) (r8_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Board)
            _r1IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r1IpIdC :: (Int)
            _r1Ipres :: (Presentation)
            _r1IpresTree :: (Presentation)
            _r1IpresXML :: (Presentation)
            _r1IrowNr :: (Int)
            _r1Iself :: (BoardRow)
            _r1IsqCol :: (Bool)
            _r1OfocusD :: (FocusDoc)
            _r1OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r1Oix :: (Int)
            _r1OpIdC :: (Int)
            _r1Opath :: ([Int])
            _r1OpossibleMoves :: ([(Int, Int)])
            _r1OrowNr :: (Int)
            _r1OsqCol :: (Bool)
            _r2IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r2IpIdC :: (Int)
            _r2Ipres :: (Presentation)
            _r2IpresTree :: (Presentation)
            _r2IpresXML :: (Presentation)
            _r2IrowNr :: (Int)
            _r2Iself :: (BoardRow)
            _r2IsqCol :: (Bool)
            _r2OfocusD :: (FocusDoc)
            _r2OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r2Oix :: (Int)
            _r2OpIdC :: (Int)
            _r2Opath :: ([Int])
            _r2OpossibleMoves :: ([(Int, Int)])
            _r2OrowNr :: (Int)
            _r2OsqCol :: (Bool)
            _r3IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r3IpIdC :: (Int)
            _r3Ipres :: (Presentation)
            _r3IpresTree :: (Presentation)
            _r3IpresXML :: (Presentation)
            _r3IrowNr :: (Int)
            _r3Iself :: (BoardRow)
            _r3IsqCol :: (Bool)
            _r3OfocusD :: (FocusDoc)
            _r3OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r3Oix :: (Int)
            _r3OpIdC :: (Int)
            _r3Opath :: ([Int])
            _r3OpossibleMoves :: ([(Int, Int)])
            _r3OrowNr :: (Int)
            _r3OsqCol :: (Bool)
            _r4IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r4IpIdC :: (Int)
            _r4Ipres :: (Presentation)
            _r4IpresTree :: (Presentation)
            _r4IpresXML :: (Presentation)
            _r4IrowNr :: (Int)
            _r4Iself :: (BoardRow)
            _r4IsqCol :: (Bool)
            _r4OfocusD :: (FocusDoc)
            _r4OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r4Oix :: (Int)
            _r4OpIdC :: (Int)
            _r4Opath :: ([Int])
            _r4OpossibleMoves :: ([(Int, Int)])
            _r4OrowNr :: (Int)
            _r4OsqCol :: (Bool)
            _r5IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r5IpIdC :: (Int)
            _r5Ipres :: (Presentation)
            _r5IpresTree :: (Presentation)
            _r5IpresXML :: (Presentation)
            _r5IrowNr :: (Int)
            _r5Iself :: (BoardRow)
            _r5IsqCol :: (Bool)
            _r5OfocusD :: (FocusDoc)
            _r5OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r5Oix :: (Int)
            _r5OpIdC :: (Int)
            _r5Opath :: ([Int])
            _r5OpossibleMoves :: ([(Int, Int)])
            _r5OrowNr :: (Int)
            _r5OsqCol :: (Bool)
            _r6IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r6IpIdC :: (Int)
            _r6Ipres :: (Presentation)
            _r6IpresTree :: (Presentation)
            _r6IpresXML :: (Presentation)
            _r6IrowNr :: (Int)
            _r6Iself :: (BoardRow)
            _r6IsqCol :: (Bool)
            _r6OfocusD :: (FocusDoc)
            _r6OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r6Oix :: (Int)
            _r6OpIdC :: (Int)
            _r6Opath :: ([Int])
            _r6OpossibleMoves :: ([(Int, Int)])
            _r6OrowNr :: (Int)
            _r6OsqCol :: (Bool)
            _r7IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r7IpIdC :: (Int)
            _r7Ipres :: (Presentation)
            _r7IpresTree :: (Presentation)
            _r7IpresXML :: (Presentation)
            _r7IrowNr :: (Int)
            _r7Iself :: (BoardRow)
            _r7IsqCol :: (Bool)
            _r7OfocusD :: (FocusDoc)
            _r7OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r7Oix :: (Int)
            _r7OpIdC :: (Int)
            _r7Opath :: ([Int])
            _r7OpossibleMoves :: ([(Int, Int)])
            _r7OrowNr :: (Int)
            _r7OsqCol :: (Bool)
            _r8IfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r8IpIdC :: (Int)
            _r8Ipres :: (Presentation)
            _r8IpresTree :: (Presentation)
            _r8IpresXML :: (Presentation)
            _r8IrowNr :: (Int)
            _r8Iself :: (BoardRow)
            _r8IsqCol :: (Bool)
            _r8OfocusD :: (FocusDoc)
            _r8OfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _r8Oix :: (Int)
            _r8OpIdC :: (Int)
            _r8Opath :: ([Int])
            _r8OpossibleMoves :: ([(Int, Int)])
            _r8OrowNr :: (Int)
            _r8OsqCol :: (Bool)
            ( _r1IfocusedPiece,_r1IpIdC,_r1Ipres,_r1IpresTree,_r1IpresXML,_r1IrowNr,_r1Iself,_r1IsqCol) =
                (r1_ (_r1OfocusD) (_r1OfocusedPiece) (_r1Oix) (_r1OpIdC) (_r1Opath) (_r1OpossibleMoves) (_r1OrowNr) (_r1OsqCol))
            ( _r2IfocusedPiece,_r2IpIdC,_r2Ipres,_r2IpresTree,_r2IpresXML,_r2IrowNr,_r2Iself,_r2IsqCol) =
                (r2_ (_r2OfocusD) (_r2OfocusedPiece) (_r2Oix) (_r2OpIdC) (_r2Opath) (_r2OpossibleMoves) (_r2OrowNr) (_r2OsqCol))
            ( _r3IfocusedPiece,_r3IpIdC,_r3Ipres,_r3IpresTree,_r3IpresXML,_r3IrowNr,_r3Iself,_r3IsqCol) =
                (r3_ (_r3OfocusD) (_r3OfocusedPiece) (_r3Oix) (_r3OpIdC) (_r3Opath) (_r3OpossibleMoves) (_r3OrowNr) (_r3OsqCol))
            ( _r4IfocusedPiece,_r4IpIdC,_r4Ipres,_r4IpresTree,_r4IpresXML,_r4IrowNr,_r4Iself,_r4IsqCol) =
                (r4_ (_r4OfocusD) (_r4OfocusedPiece) (_r4Oix) (_r4OpIdC) (_r4Opath) (_r4OpossibleMoves) (_r4OrowNr) (_r4OsqCol))
            ( _r5IfocusedPiece,_r5IpIdC,_r5Ipres,_r5IpresTree,_r5IpresXML,_r5IrowNr,_r5Iself,_r5IsqCol) =
                (r5_ (_r5OfocusD) (_r5OfocusedPiece) (_r5Oix) (_r5OpIdC) (_r5Opath) (_r5OpossibleMoves) (_r5OrowNr) (_r5OsqCol))
            ( _r6IfocusedPiece,_r6IpIdC,_r6Ipres,_r6IpresTree,_r6IpresXML,_r6IrowNr,_r6Iself,_r6IsqCol) =
                (r6_ (_r6OfocusD) (_r6OfocusedPiece) (_r6Oix) (_r6OpIdC) (_r6Opath) (_r6OpossibleMoves) (_r6OrowNr) (_r6OsqCol))
            ( _r7IfocusedPiece,_r7IpIdC,_r7Ipres,_r7IpresTree,_r7IpresXML,_r7IrowNr,_r7Iself,_r7IsqCol) =
                (r7_ (_r7OfocusD) (_r7OfocusedPiece) (_r7Oix) (_r7OpIdC) (_r7Opath) (_r7OpossibleMoves) (_r7OrowNr) (_r7OsqCol))
            ( _r8IfocusedPiece,_r8IpIdC,_r8Ipres,_r8IpresTree,_r8IpresXML,_r8IrowNr,_r8Iself,_r8IsqCol) =
                (r8_ (_r8OfocusD) (_r8OfocusedPiece) (_r8Oix) (_r8OpIdC) (_r8Opath) (_r8OpossibleMoves) (_r8OrowNr) (_r8OsqCol))
            -- "PresentationAG.ag"(line 1011, column 7)
            (_r1OfocusedPiece@_) =
                Nothing
            -- "PresentationAG.ag"(line 1008, column 7)
            (_possibleMoves@_) =
                case _r8IfocusedPiece of
                  Just (square, (r,c)) -> Chess.computeMoves _self (r,c)
                  Nothing              -> []
            -- "PresentationAG.ag"(line 1007, column 7)
            (_r1OsqCol@_) =
                False
            -- "PresentationAG.ag"(line 1006, column 7)
            (_r1OrowNr@_) =
                0
            -- "PresentationAG.ag"(line 1004, column 7)
            (_lhsOpres@_) =
                loc (BoardNode _self _lhsIpath) $ presentFocus _lhsIfocusD _lhsIpath $
                  structural $ colR 4 (reverse [_r1Ipres,_r2Ipres,_r3Ipres,_r4Ipres,_r5Ipres,_r6Ipres,_r7Ipres,_r8Ipres])
            -- "PresentationAG_Generated.ag"(line 361, column 11)
            (_lhsOpIdC@_) =
                _r8IpIdC
            -- "PresentationAG_Generated.ag"(line 360, column 11)
            (_r2OpIdC@_) =
                _r1IpIdC
            -- "PresentationAG_Generated.ag"(line 359, column 11)
            (_r3OpIdC@_) =
                _r2IpIdC
            -- "PresentationAG_Generated.ag"(line 358, column 11)
            (_r4OpIdC@_) =
                _r3IpIdC
            -- "PresentationAG_Generated.ag"(line 357, column 11)
            (_r5OpIdC@_) =
                _r4IpIdC
            -- "PresentationAG_Generated.ag"(line 356, column 11)
            (_r6OpIdC@_) =
                _r5IpIdC
            -- "PresentationAG_Generated.ag"(line 355, column 11)
            (_r7OpIdC@_) =
                _r6IpIdC
            -- "PresentationAG_Generated.ag"(line 354, column 11)
            (_r8OpIdC@_) =
                _r7IpIdC
            -- "PresentationAG_Generated.ag"(line 353, column 11)
            (_r1OpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 374, column 11)
            (_r8Opath@_) =
                _lhsIpath++[7]
            -- "PresentationAG_Generated.ag"(line 373, column 11)
            (_r7Opath@_) =
                _lhsIpath++[6]
            -- "PresentationAG_Generated.ag"(line 372, column 11)
            (_r6Opath@_) =
                _lhsIpath++[5]
            -- "PresentationAG_Generated.ag"(line 371, column 11)
            (_r5Opath@_) =
                _lhsIpath++[4]
            -- "PresentationAG_Generated.ag"(line 370, column 11)
            (_r4Opath@_) =
                _lhsIpath++[3]
            -- "PresentationAG_Generated.ag"(line 369, column 11)
            (_r3Opath@_) =
                _lhsIpath++[2]
            -- "PresentationAG_Generated.ag"(line 368, column 11)
            (_r2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 367, column 11)
            (_r1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 716, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (BoardNode _self _lhsIpath) _lhsIpath "Board" [ _r1IpresXML, _r2IpresXML, _r3IpresXML, _r4IpresXML, _r5IpresXML, _r6IpresXML, _r7IpresXML, _r8IpresXML ]
            -- "PresentationAG_Generated.ag"(line 938, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (BoardNode _self _lhsIpath) _lhsIpath "Board" [ _r1IpresTree, _r2IpresTree, _r3IpresTree, _r4IpresTree, _r5IpresTree, _r6IpresTree, _r7IpresTree, _r8IpresTree ]
            -- self rule
            (_self@_) =
                Board idD_ _r1Iself _r2Iself _r3Iself _r4Iself _r5Iself _r6Iself _r7Iself _r8Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_r1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_r1Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r1OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (down)
            (_r2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r2OfocusedPiece@_) =
                _r1IfocusedPiece
            -- copy rule (down)
            (_r2Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r2OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r2OrowNr@_) =
                _r1IrowNr
            -- copy rule (chain)
            (_r2OsqCol@_) =
                _r1IsqCol
            -- copy rule (down)
            (_r3OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r3OfocusedPiece@_) =
                _r2IfocusedPiece
            -- copy rule (down)
            (_r3Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r3OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r3OrowNr@_) =
                _r2IrowNr
            -- copy rule (chain)
            (_r3OsqCol@_) =
                _r2IsqCol
            -- copy rule (down)
            (_r4OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r4OfocusedPiece@_) =
                _r3IfocusedPiece
            -- copy rule (down)
            (_r4Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r4OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r4OrowNr@_) =
                _r3IrowNr
            -- copy rule (chain)
            (_r4OsqCol@_) =
                _r3IsqCol
            -- copy rule (down)
            (_r5OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r5OfocusedPiece@_) =
                _r4IfocusedPiece
            -- copy rule (down)
            (_r5Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r5OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r5OrowNr@_) =
                _r4IrowNr
            -- copy rule (chain)
            (_r5OsqCol@_) =
                _r4IsqCol
            -- copy rule (down)
            (_r6OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r6OfocusedPiece@_) =
                _r5IfocusedPiece
            -- copy rule (down)
            (_r6Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r6OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r6OrowNr@_) =
                _r5IrowNr
            -- copy rule (chain)
            (_r6OsqCol@_) =
                _r5IsqCol
            -- copy rule (down)
            (_r7OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r7OfocusedPiece@_) =
                _r6IfocusedPiece
            -- copy rule (down)
            (_r7Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r7OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r7OrowNr@_) =
                _r6IrowNr
            -- copy rule (chain)
            (_r7OsqCol@_) =
                _r6IsqCol
            -- copy rule (down)
            (_r8OfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_r8OfocusedPiece@_) =
                _r7IfocusedPiece
            -- copy rule (down)
            (_r8Oix@_) =
                _lhsIix
            -- copy rule (from local)
            (_r8OpossibleMoves@_) =
                _possibleMoves
            -- copy rule (chain)
            (_r8OrowNr@_) =
                _r7IrowNr
            -- copy rule (chain)
            (_r8OsqCol@_) =
                _r7IsqCol
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
sem_Board_HoleBoard :: (T_Board)
sem_Board_HoleBoard  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Board)
            -- "PresentationAG_Generated.ag"(line 362, column 19)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Board" (HoleBoardNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 717, column 19)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Board" (HoleBoardNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 939, column 19)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Board" (HoleBoardNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleBoard
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
sem_Board_ParseErrBoard :: (Node) ->
                           (Presentation) ->
                           (T_Board)
sem_Board_ParseErrBoard (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Board)
            -- "PresentationAG_Generated.ag"(line 363, column 19)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 718, column 19)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 940, column 19)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrBoard node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
-- BoardRow ----------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      possibleMoves        : [(Int, Int)]

   chained attributes:
      focusedPiece         :  Maybe (BoardSquare,(Int,Int)) 
      pIdC                 : Int
      rowNr                : Int
      sqCol                : Bool

   synthesised attributes:
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for BoardRow.BoardRow:
      self

-}
{-
   local variables for BoardRow.HoleBoardRow:
      self

-}
{-
   local variables for BoardRow.ParseErrBoardRow:
      self

-}
-- semantic domain
type T_BoardRow = (FocusDoc) ->
                  ( Maybe (BoardSquare,(Int,Int)) ) ->
                  (Int) ->
                  (Int) ->
                  ([Int]) ->
                  ([(Int, Int)]) ->
                  (Int) ->
                  (Bool) ->
                  ( ( Maybe (BoardSquare,(Int,Int)) ),(Int),(Presentation),(Presentation),(Presentation),(Int),(BoardRow),(Bool))
-- cata
sem_BoardRow :: (BoardRow) ->
                (T_BoardRow)
sem_BoardRow ((BoardRow (_idD) (_ca) (_cb) (_cc) (_cd) (_ce) (_cf) (_cg) (_ch))) =
    (sem_BoardRow_BoardRow (_idD) ((sem_BoardSquare (_ca))) ((sem_BoardSquare (_cb))) ((sem_BoardSquare (_cc))) ((sem_BoardSquare (_cd))) ((sem_BoardSquare (_ce))) ((sem_BoardSquare (_cf))) ((sem_BoardSquare (_cg))) ((sem_BoardSquare (_ch))))
sem_BoardRow ((HoleBoardRow )) =
    (sem_BoardRow_HoleBoardRow )
sem_BoardRow ((ParseErrBoardRow (_node) (_presentation))) =
    (sem_BoardRow_ParseErrBoardRow (_node) (_presentation))
sem_BoardRow_BoardRow :: (IDD) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardSquare) ->
                         (T_BoardRow)
sem_BoardRow_BoardRow (idD_) (ca_) (cb_) (cc_) (cd_) (ce_) (cf_) (cg_) (ch_) =
    \ _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOrowNr :: (Int)
            _lhsOself :: (BoardRow)
            _lhsOsqCol :: (Bool)
            _caIcolNr :: (Int)
            _caIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _caIpIdC :: (Int)
            _caIpres :: (Presentation)
            _caIpresTree :: (Presentation)
            _caIpresXML :: (Presentation)
            _caIself :: (BoardSquare)
            _caIsqCol :: (Bool)
            _caOcolNr :: (Int)
            _caOfocusD :: (FocusDoc)
            _caOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _caOix :: (Int)
            _caOpIdC :: (Int)
            _caOpath :: ([Int])
            _caOpossibleMoves :: ([(Int, Int)])
            _caOrowNr :: (Int)
            _caOsqCol :: (Bool)
            _cbIcolNr :: (Int)
            _cbIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cbIpIdC :: (Int)
            _cbIpres :: (Presentation)
            _cbIpresTree :: (Presentation)
            _cbIpresXML :: (Presentation)
            _cbIself :: (BoardSquare)
            _cbIsqCol :: (Bool)
            _cbOcolNr :: (Int)
            _cbOfocusD :: (FocusDoc)
            _cbOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cbOix :: (Int)
            _cbOpIdC :: (Int)
            _cbOpath :: ([Int])
            _cbOpossibleMoves :: ([(Int, Int)])
            _cbOrowNr :: (Int)
            _cbOsqCol :: (Bool)
            _ccIcolNr :: (Int)
            _ccIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _ccIpIdC :: (Int)
            _ccIpres :: (Presentation)
            _ccIpresTree :: (Presentation)
            _ccIpresXML :: (Presentation)
            _ccIself :: (BoardSquare)
            _ccIsqCol :: (Bool)
            _ccOcolNr :: (Int)
            _ccOfocusD :: (FocusDoc)
            _ccOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _ccOix :: (Int)
            _ccOpIdC :: (Int)
            _ccOpath :: ([Int])
            _ccOpossibleMoves :: ([(Int, Int)])
            _ccOrowNr :: (Int)
            _ccOsqCol :: (Bool)
            _cdIcolNr :: (Int)
            _cdIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cdIpIdC :: (Int)
            _cdIpres :: (Presentation)
            _cdIpresTree :: (Presentation)
            _cdIpresXML :: (Presentation)
            _cdIself :: (BoardSquare)
            _cdIsqCol :: (Bool)
            _cdOcolNr :: (Int)
            _cdOfocusD :: (FocusDoc)
            _cdOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cdOix :: (Int)
            _cdOpIdC :: (Int)
            _cdOpath :: ([Int])
            _cdOpossibleMoves :: ([(Int, Int)])
            _cdOrowNr :: (Int)
            _cdOsqCol :: (Bool)
            _ceIcolNr :: (Int)
            _ceIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _ceIpIdC :: (Int)
            _ceIpres :: (Presentation)
            _ceIpresTree :: (Presentation)
            _ceIpresXML :: (Presentation)
            _ceIself :: (BoardSquare)
            _ceIsqCol :: (Bool)
            _ceOcolNr :: (Int)
            _ceOfocusD :: (FocusDoc)
            _ceOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _ceOix :: (Int)
            _ceOpIdC :: (Int)
            _ceOpath :: ([Int])
            _ceOpossibleMoves :: ([(Int, Int)])
            _ceOrowNr :: (Int)
            _ceOsqCol :: (Bool)
            _cfIcolNr :: (Int)
            _cfIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cfIpIdC :: (Int)
            _cfIpres :: (Presentation)
            _cfIpresTree :: (Presentation)
            _cfIpresXML :: (Presentation)
            _cfIself :: (BoardSquare)
            _cfIsqCol :: (Bool)
            _cfOcolNr :: (Int)
            _cfOfocusD :: (FocusDoc)
            _cfOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cfOix :: (Int)
            _cfOpIdC :: (Int)
            _cfOpath :: ([Int])
            _cfOpossibleMoves :: ([(Int, Int)])
            _cfOrowNr :: (Int)
            _cfOsqCol :: (Bool)
            _cgIcolNr :: (Int)
            _cgIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cgIpIdC :: (Int)
            _cgIpres :: (Presentation)
            _cgIpresTree :: (Presentation)
            _cgIpresXML :: (Presentation)
            _cgIself :: (BoardSquare)
            _cgIsqCol :: (Bool)
            _cgOcolNr :: (Int)
            _cgOfocusD :: (FocusDoc)
            _cgOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _cgOix :: (Int)
            _cgOpIdC :: (Int)
            _cgOpath :: ([Int])
            _cgOpossibleMoves :: ([(Int, Int)])
            _cgOrowNr :: (Int)
            _cgOsqCol :: (Bool)
            _chIcolNr :: (Int)
            _chIfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _chIpIdC :: (Int)
            _chIpres :: (Presentation)
            _chIpresTree :: (Presentation)
            _chIpresXML :: (Presentation)
            _chIself :: (BoardSquare)
            _chIsqCol :: (Bool)
            _chOcolNr :: (Int)
            _chOfocusD :: (FocusDoc)
            _chOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _chOix :: (Int)
            _chOpIdC :: (Int)
            _chOpath :: ([Int])
            _chOpossibleMoves :: ([(Int, Int)])
            _chOrowNr :: (Int)
            _chOsqCol :: (Bool)
            ( _caIcolNr,_caIfocusedPiece,_caIpIdC,_caIpres,_caIpresTree,_caIpresXML,_caIself,_caIsqCol) =
                (ca_ (_caOcolNr) (_caOfocusD) (_caOfocusedPiece) (_caOix) (_caOpIdC) (_caOpath) (_caOpossibleMoves) (_caOrowNr) (_caOsqCol))
            ( _cbIcolNr,_cbIfocusedPiece,_cbIpIdC,_cbIpres,_cbIpresTree,_cbIpresXML,_cbIself,_cbIsqCol) =
                (cb_ (_cbOcolNr) (_cbOfocusD) (_cbOfocusedPiece) (_cbOix) (_cbOpIdC) (_cbOpath) (_cbOpossibleMoves) (_cbOrowNr) (_cbOsqCol))
            ( _ccIcolNr,_ccIfocusedPiece,_ccIpIdC,_ccIpres,_ccIpresTree,_ccIpresXML,_ccIself,_ccIsqCol) =
                (cc_ (_ccOcolNr) (_ccOfocusD) (_ccOfocusedPiece) (_ccOix) (_ccOpIdC) (_ccOpath) (_ccOpossibleMoves) (_ccOrowNr) (_ccOsqCol))
            ( _cdIcolNr,_cdIfocusedPiece,_cdIpIdC,_cdIpres,_cdIpresTree,_cdIpresXML,_cdIself,_cdIsqCol) =
                (cd_ (_cdOcolNr) (_cdOfocusD) (_cdOfocusedPiece) (_cdOix) (_cdOpIdC) (_cdOpath) (_cdOpossibleMoves) (_cdOrowNr) (_cdOsqCol))
            ( _ceIcolNr,_ceIfocusedPiece,_ceIpIdC,_ceIpres,_ceIpresTree,_ceIpresXML,_ceIself,_ceIsqCol) =
                (ce_ (_ceOcolNr) (_ceOfocusD) (_ceOfocusedPiece) (_ceOix) (_ceOpIdC) (_ceOpath) (_ceOpossibleMoves) (_ceOrowNr) (_ceOsqCol))
            ( _cfIcolNr,_cfIfocusedPiece,_cfIpIdC,_cfIpres,_cfIpresTree,_cfIpresXML,_cfIself,_cfIsqCol) =
                (cf_ (_cfOcolNr) (_cfOfocusD) (_cfOfocusedPiece) (_cfOix) (_cfOpIdC) (_cfOpath) (_cfOpossibleMoves) (_cfOrowNr) (_cfOsqCol))
            ( _cgIcolNr,_cgIfocusedPiece,_cgIpIdC,_cgIpres,_cgIpresTree,_cgIpresXML,_cgIself,_cgIsqCol) =
                (cg_ (_cgOcolNr) (_cgOfocusD) (_cgOfocusedPiece) (_cgOix) (_cgOpIdC) (_cgOpath) (_cgOpossibleMoves) (_cgOrowNr) (_cgOsqCol))
            ( _chIcolNr,_chIfocusedPiece,_chIpIdC,_chIpres,_chIpresTree,_chIpresXML,_chIself,_chIsqCol) =
                (ch_ (_chOcolNr) (_chOfocusD) (_chOfocusedPiece) (_chOix) (_chOpIdC) (_chOpath) (_chOpossibleMoves) (_chOrowNr) (_chOsqCol))
            -- "PresentationAG.ag"(line 1019, column 7)
            (_caOcolNr@_) =
                0
            -- "PresentationAG.ag"(line 1018, column 7)
            (_lhsOrowNr@_) =
                1 + _lhsIrowNr
            -- "PresentationAG.ag"(line 1017, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1015, column 7)
            (_lhsOpres@_) =
                loc (BoardRowNode _self _lhsIpath) $ presentFocus _lhsIfocusD _lhsIpath $
                structural $  row' [_caIpres,_cbIpres,_ccIpres,_cdIpres,_ceIpres,_cfIpres,_cgIpres,_chIpres]
            -- "PresentationAG_Generated.ag"(line 386, column 14)
            (_lhsOpIdC@_) =
                _chIpIdC
            -- "PresentationAG_Generated.ag"(line 385, column 14)
            (_cbOpIdC@_) =
                _caIpIdC
            -- "PresentationAG_Generated.ag"(line 384, column 14)
            (_ccOpIdC@_) =
                _cbIpIdC
            -- "PresentationAG_Generated.ag"(line 383, column 14)
            (_cdOpIdC@_) =
                _ccIpIdC
            -- "PresentationAG_Generated.ag"(line 382, column 14)
            (_ceOpIdC@_) =
                _cdIpIdC
            -- "PresentationAG_Generated.ag"(line 381, column 14)
            (_cfOpIdC@_) =
                _ceIpIdC
            -- "PresentationAG_Generated.ag"(line 380, column 14)
            (_cgOpIdC@_) =
                _cfIpIdC
            -- "PresentationAG_Generated.ag"(line 379, column 14)
            (_chOpIdC@_) =
                _cgIpIdC
            -- "PresentationAG_Generated.ag"(line 378, column 14)
            (_caOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 399, column 14)
            (_chOpath@_) =
                _lhsIpath++[7]
            -- "PresentationAG_Generated.ag"(line 398, column 14)
            (_cgOpath@_) =
                _lhsIpath++[6]
            -- "PresentationAG_Generated.ag"(line 397, column 14)
            (_cfOpath@_) =
                _lhsIpath++[5]
            -- "PresentationAG_Generated.ag"(line 396, column 14)
            (_ceOpath@_) =
                _lhsIpath++[4]
            -- "PresentationAG_Generated.ag"(line 395, column 14)
            (_cdOpath@_) =
                _lhsIpath++[3]
            -- "PresentationAG_Generated.ag"(line 394, column 14)
            (_ccOpath@_) =
                _lhsIpath++[2]
            -- "PresentationAG_Generated.ag"(line 393, column 14)
            (_cbOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 392, column 14)
            (_caOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 722, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (BoardRowNode _self _lhsIpath) _lhsIpath "BoardRow" [ _caIpresXML, _cbIpresXML, _ccIpresXML, _cdIpresXML, _ceIpresXML, _cfIpresXML, _cgIpresXML, _chIpresXML ]
            -- "PresentationAG_Generated.ag"(line 944, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (BoardRowNode _self _lhsIpath) _lhsIpath "BoardRow" [ _caIpresTree, _cbIpresTree, _ccIpresTree, _cdIpresTree, _ceIpresTree, _cfIpresTree, _cgIpresTree, _chIpresTree ]
            -- self rule
            (_self@_) =
                BoardRow idD_ _caIself _cbIself _ccIself _cdIself _ceIself _cfIself _cgIself _chIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOfocusedPiece@_) =
                _chIfocusedPiece
            -- copy rule (down)
            (_caOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_caOfocusedPiece@_) =
                _lhsIfocusedPiece
            -- copy rule (down)
            (_caOix@_) =
                _lhsIix
            -- copy rule (down)
            (_caOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_caOrowNr@_) =
                _lhsIrowNr
            -- copy rule (down)
            (_caOsqCol@_) =
                _lhsIsqCol
            -- copy rule (chain)
            (_cbOcolNr@_) =
                _caIcolNr
            -- copy rule (down)
            (_cbOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_cbOfocusedPiece@_) =
                _caIfocusedPiece
            -- copy rule (down)
            (_cbOix@_) =
                _lhsIix
            -- copy rule (down)
            (_cbOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_cbOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_cbOsqCol@_) =
                _caIsqCol
            -- copy rule (chain)
            (_ccOcolNr@_) =
                _cbIcolNr
            -- copy rule (down)
            (_ccOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_ccOfocusedPiece@_) =
                _cbIfocusedPiece
            -- copy rule (down)
            (_ccOix@_) =
                _lhsIix
            -- copy rule (down)
            (_ccOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_ccOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_ccOsqCol@_) =
                _cbIsqCol
            -- copy rule (chain)
            (_cdOcolNr@_) =
                _ccIcolNr
            -- copy rule (down)
            (_cdOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_cdOfocusedPiece@_) =
                _ccIfocusedPiece
            -- copy rule (down)
            (_cdOix@_) =
                _lhsIix
            -- copy rule (down)
            (_cdOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_cdOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_cdOsqCol@_) =
                _ccIsqCol
            -- copy rule (chain)
            (_ceOcolNr@_) =
                _cdIcolNr
            -- copy rule (down)
            (_ceOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_ceOfocusedPiece@_) =
                _cdIfocusedPiece
            -- copy rule (down)
            (_ceOix@_) =
                _lhsIix
            -- copy rule (down)
            (_ceOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_ceOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_ceOsqCol@_) =
                _cdIsqCol
            -- copy rule (chain)
            (_cfOcolNr@_) =
                _ceIcolNr
            -- copy rule (down)
            (_cfOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_cfOfocusedPiece@_) =
                _ceIfocusedPiece
            -- copy rule (down)
            (_cfOix@_) =
                _lhsIix
            -- copy rule (down)
            (_cfOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_cfOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_cfOsqCol@_) =
                _ceIsqCol
            -- copy rule (chain)
            (_cgOcolNr@_) =
                _cfIcolNr
            -- copy rule (down)
            (_cgOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_cgOfocusedPiece@_) =
                _cfIfocusedPiece
            -- copy rule (down)
            (_cgOix@_) =
                _lhsIix
            -- copy rule (down)
            (_cgOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_cgOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_cgOsqCol@_) =
                _cfIsqCol
            -- copy rule (chain)
            (_chOcolNr@_) =
                _cgIcolNr
            -- copy rule (down)
            (_chOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_chOfocusedPiece@_) =
                _cgIfocusedPiece
            -- copy rule (down)
            (_chOix@_) =
                _lhsIix
            -- copy rule (down)
            (_chOpossibleMoves@_) =
                _lhsIpossibleMoves
            -- copy rule (down)
            (_chOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_chOsqCol@_) =
                _cgIsqCol
        in  ( _lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOrowNr,_lhsOself,_lhsOsqCol)
sem_BoardRow_HoleBoardRow :: (T_BoardRow)
sem_BoardRow_HoleBoardRow  =
    \ _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOrowNr :: (Int)
            _lhsOself :: (BoardRow)
            _lhsOsqCol :: (Bool)
            -- "PresentationAG_Generated.ag"(line 387, column 22)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "BoardRow" (HoleBoardRowNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 723, column 22)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "BoardRow" (HoleBoardRowNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 945, column 22)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "BoardRow" (HoleBoardRowNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleBoardRow
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOfocusedPiece@_) =
                _lhsIfocusedPiece
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_lhsOsqCol@_) =
                _lhsIsqCol
        in  ( _lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOrowNr,_lhsOself,_lhsOsqCol)
sem_BoardRow_ParseErrBoardRow :: (Node) ->
                                 (Presentation) ->
                                 (T_BoardRow)
sem_BoardRow_ParseErrBoardRow (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOrowNr :: (Int)
            _lhsOself :: (BoardRow)
            _lhsOsqCol :: (Bool)
            -- "PresentationAG_Generated.ag"(line 388, column 22)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 724, column 22)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 946, column 22)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrBoardRow node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOfocusedPiece@_) =
                _lhsIfocusedPiece
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOrowNr@_) =
                _lhsIrowNr
            -- copy rule (chain)
            (_lhsOsqCol@_) =
                _lhsIsqCol
        in  ( _lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOrowNr,_lhsOself,_lhsOsqCol)
-- BoardSquare -------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      possibleMoves        : [(Int, Int)]
      rowNr                : Int

   chained attributes:
      colNr                : Int
      focusedPiece         :  Maybe (BoardSquare,(Int,Int)) 
      pIdC                 : Int
      sqCol                : Bool

   synthesised attributes:
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for BoardSquare.Bishop:
      self

-}
{-
   local variables for BoardSquare.Empty:
      self

-}
{-
   local variables for BoardSquare.HoleBoardSquare:
      self

-}
{-
   local variables for BoardSquare.King:
      self

-}
{-
   local variables for BoardSquare.Knight:
      self

-}
{-
   local variables for BoardSquare.ParseErrBoardSquare:
      self

-}
{-
   local variables for BoardSquare.Pawn:
      self

-}
{-
   local variables for BoardSquare.Queen:
      self

-}
{-
   local variables for BoardSquare.Rook:
      self

-}
-- semantic domain
type T_BoardSquare = (Int) ->
                     (FocusDoc) ->
                     ( Maybe (BoardSquare,(Int,Int)) ) ->
                     (Int) ->
                     (Int) ->
                     ([Int]) ->
                     ([(Int, Int)]) ->
                     (Int) ->
                     (Bool) ->
                     ( (Int),( Maybe (BoardSquare,(Int,Int)) ),(Int),(Presentation),(Presentation),(Presentation),(BoardSquare),(Bool))
-- cata
sem_BoardSquare :: (BoardSquare) ->
                   (T_BoardSquare)
sem_BoardSquare ((Bishop (_idD) (_color))) =
    (sem_BoardSquare_Bishop (_idD) ((sem_Bool_ (_color))))
sem_BoardSquare ((Empty )) =
    (sem_BoardSquare_Empty )
sem_BoardSquare ((HoleBoardSquare )) =
    (sem_BoardSquare_HoleBoardSquare )
sem_BoardSquare ((King (_idD) (_color))) =
    (sem_BoardSquare_King (_idD) ((sem_Bool_ (_color))))
sem_BoardSquare ((Knight (_idD) (_color))) =
    (sem_BoardSquare_Knight (_idD) ((sem_Bool_ (_color))))
sem_BoardSquare ((ParseErrBoardSquare (_node) (_presentation))) =
    (sem_BoardSquare_ParseErrBoardSquare (_node) (_presentation))
sem_BoardSquare ((Pawn (_idD) (_color))) =
    (sem_BoardSquare_Pawn (_idD) ((sem_Bool_ (_color))))
sem_BoardSquare ((Queen (_idD) (_color))) =
    (sem_BoardSquare_Queen (_idD) ((sem_Bool_ (_color))))
sem_BoardSquare ((Rook (_idD) (_color))) =
    (sem_BoardSquare_Rook (_idD) ((sem_Bool_ (_color))))
sem_BoardSquare_Bishop :: (IDD) ->
                          (T_Bool_) ->
                          (T_BoardSquare)
sem_BoardSquare_Bishop (idD_) (color_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            _colorIbool :: (Bool)
            _colorIpIdC :: (Int)
            _colorIpres :: (Presentation)
            _colorIpresTree :: (Presentation)
            _colorIpresXML :: (Presentation)
            _colorIself :: (Bool_)
            _colorOfocusD :: (FocusDoc)
            _colorOix :: (Int)
            _colorOpIdC :: (Int)
            _colorOpath :: ([Int])
            ( _colorIbool,_colorIpIdC,_colorIpres,_colorIpresTree,_colorIpresXML,_colorIself) =
                (color_ (_colorOfocusD) (_colorOix) (_colorOpIdC) (_colorOpath))
            -- "PresentationAG.ag"(line 1039, column 7)
            (_lhsOfocusedPiece@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then Just (_self, (_lhsIcolNr,_lhsIrowNr)) else _lhsIfocusedPiece
            -- "PresentationAG.ag"(line 1038, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1037, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1035, column 7)
            (_lhsOpres@_) =
                loc (BishopNode _self _lhsIpath) $
                  structural $ Chess.piece _self color_ _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 408, column 12)
            (_lhsOpIdC@_) =
                _colorIpIdC
            -- "PresentationAG_Generated.ag"(line 407, column 12)
            (_colorOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 422, column 12)
            (_colorOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 732, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (BishopNode _self _lhsIpath) _lhsIpath "Bishop" [ _colorIpresXML ]
            -- "PresentationAG_Generated.ag"(line 954, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (BishopNode _self _lhsIpath) _lhsIpath "Bishop" [ _colorIpresTree ]
            -- self rule
            (_self@_) =
                Bishop idD_ _colorIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_colorOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_colorOix@_) =
                _lhsIix
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_Empty :: (T_BoardSquare)
sem_BoardSquare_Empty  =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            -- "PresentationAG.ag"(line 1063, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1062, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1060, column 7)
            (_lhsOpres@_) =
                loc (EmptyNode _self _lhsIpath) $
                  structural $ Chess.piece _self False _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 740, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (EmptyNode _self _lhsIpath) _lhsIpath "Empty" [  ]
            -- "PresentationAG_Generated.ag"(line 962, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (EmptyNode _self _lhsIpath) _lhsIpath "Empty" [  ]
            -- self rule
            (_self@_) =
                Empty
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOfocusedPiece@_) =
                _lhsIfocusedPiece
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_HoleBoardSquare :: (T_BoardSquare)
sem_BoardSquare_HoleBoardSquare  =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            -- "PresentationAG_Generated.ag"(line 415, column 25)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "BoardSquare" (HoleBoardSquareNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 741, column 25)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "BoardSquare" (HoleBoardSquareNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 963, column 25)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "BoardSquare" (HoleBoardSquareNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleBoardSquare
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcolNr@_) =
                _lhsIcolNr
            -- copy rule (chain)
            (_lhsOfocusedPiece@_) =
                _lhsIfocusedPiece
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOsqCol@_) =
                _lhsIsqCol
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_King :: (IDD) ->
                        (T_Bool_) ->
                        (T_BoardSquare)
sem_BoardSquare_King (idD_) (color_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            _colorIbool :: (Bool)
            _colorIpIdC :: (Int)
            _colorIpres :: (Presentation)
            _colorIpresTree :: (Presentation)
            _colorIpresXML :: (Presentation)
            _colorIself :: (Bool_)
            _colorOfocusD :: (FocusDoc)
            _colorOix :: (Int)
            _colorOpIdC :: (Int)
            _colorOpath :: ([Int])
            ( _colorIbool,_colorIpIdC,_colorIpres,_colorIpresTree,_colorIpresXML,_colorIself) =
                (color_ (_colorOfocusD) (_colorOix) (_colorOpIdC) (_colorOpath))
            -- "PresentationAG.ag"(line 1027, column 7)
            (_lhsOfocusedPiece@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then Just (_self, (_lhsIcolNr,_lhsIrowNr)) else _lhsIfocusedPiece
            -- "PresentationAG.ag"(line 1026, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1025, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1023, column 7)
            (_lhsOpres@_) =
                loc (KingNode _self _lhsIpath) $
                  structural $ Chess.piece _self color_ _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 406, column 10)
            (_lhsOpIdC@_) =
                _colorIpIdC
            -- "PresentationAG_Generated.ag"(line 405, column 10)
            (_colorOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 421, column 10)
            (_colorOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 730, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (KingNode _self _lhsIpath) _lhsIpath "King" [ _colorIpresXML ]
            -- "PresentationAG_Generated.ag"(line 952, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (KingNode _self _lhsIpath) _lhsIpath "King" [ _colorIpresTree ]
            -- self rule
            (_self@_) =
                King idD_ _colorIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_colorOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_colorOix@_) =
                _lhsIix
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_Knight :: (IDD) ->
                          (T_Bool_) ->
                          (T_BoardSquare)
sem_BoardSquare_Knight (idD_) (color_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            _colorIbool :: (Bool)
            _colorIpIdC :: (Int)
            _colorIpres :: (Presentation)
            _colorIpresTree :: (Presentation)
            _colorIpresXML :: (Presentation)
            _colorIself :: (Bool_)
            _colorOfocusD :: (FocusDoc)
            _colorOix :: (Int)
            _colorOpIdC :: (Int)
            _colorOpath :: ([Int])
            ( _colorIbool,_colorIpIdC,_colorIpres,_colorIpresTree,_colorIpresXML,_colorIself) =
                (color_ (_colorOfocusD) (_colorOix) (_colorOpIdC) (_colorOpath))
            -- "PresentationAG.ag"(line 1045, column 7)
            (_lhsOfocusedPiece@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then Just (_self, (_lhsIcolNr,_lhsIrowNr)) else _lhsIfocusedPiece
            -- "PresentationAG.ag"(line 1044, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1043, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1041, column 7)
            (_lhsOpres@_) =
                loc (KnightNode _self _lhsIpath) $
                  structural $ Chess.piece _self color_ _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 410, column 12)
            (_lhsOpIdC@_) =
                _colorIpIdC
            -- "PresentationAG_Generated.ag"(line 409, column 12)
            (_colorOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 423, column 12)
            (_colorOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 734, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (KnightNode _self _lhsIpath) _lhsIpath "Knight" [ _colorIpresXML ]
            -- "PresentationAG_Generated.ag"(line 956, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (KnightNode _self _lhsIpath) _lhsIpath "Knight" [ _colorIpresTree ]
            -- self rule
            (_self@_) =
                Knight idD_ _colorIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_colorOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_colorOix@_) =
                _lhsIix
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_ParseErrBoardSquare :: (Node) ->
                                       (Presentation) ->
                                       (T_BoardSquare)
sem_BoardSquare_ParseErrBoardSquare (node_) (presentation_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            -- "PresentationAG_Generated.ag"(line 416, column 25)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 742, column 25)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 964, column 25)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrBoardSquare node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcolNr@_) =
                _lhsIcolNr
            -- copy rule (chain)
            (_lhsOfocusedPiece@_) =
                _lhsIfocusedPiece
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOsqCol@_) =
                _lhsIsqCol
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_Pawn :: (IDD) ->
                        (T_Bool_) ->
                        (T_BoardSquare)
sem_BoardSquare_Pawn (idD_) (color_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            _colorIbool :: (Bool)
            _colorIpIdC :: (Int)
            _colorIpres :: (Presentation)
            _colorIpresTree :: (Presentation)
            _colorIpresXML :: (Presentation)
            _colorIself :: (Bool_)
            _colorOfocusD :: (FocusDoc)
            _colorOix :: (Int)
            _colorOpIdC :: (Int)
            _colorOpath :: ([Int])
            ( _colorIbool,_colorIpIdC,_colorIpres,_colorIpresTree,_colorIpresXML,_colorIself) =
                (color_ (_colorOfocusD) (_colorOix) (_colorOpIdC) (_colorOpath))
            -- "PresentationAG.ag"(line 1058, column 7)
            (_lhsOfocusedPiece@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then Just (_self, (_lhsIcolNr,_lhsIrowNr)) else _lhsIfocusedPiece
            -- "PresentationAG.ag"(line 1057, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1056, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1054, column 7)
            (_lhsOpres@_) =
                loc (PawnNode _self _lhsIpath) $
                  structural $ Chess.piece _self color_ _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 414, column 10)
            (_lhsOpIdC@_) =
                _colorIpIdC
            -- "PresentationAG_Generated.ag"(line 413, column 10)
            (_colorOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 425, column 10)
            (_colorOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 738, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (PawnNode _self _lhsIpath) _lhsIpath "Pawn" [ _colorIpresXML ]
            -- "PresentationAG_Generated.ag"(line 960, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (PawnNode _self _lhsIpath) _lhsIpath "Pawn" [ _colorIpresTree ]
            -- self rule
            (_self@_) =
                Pawn idD_ _colorIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_colorOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_colorOix@_) =
                _lhsIix
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_Queen :: (IDD) ->
                         (T_Bool_) ->
                         (T_BoardSquare)
sem_BoardSquare_Queen (idD_) (color_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            _colorIbool :: (Bool)
            _colorIpIdC :: (Int)
            _colorIpres :: (Presentation)
            _colorIpresTree :: (Presentation)
            _colorIpresXML :: (Presentation)
            _colorIself :: (Bool_)
            _colorOfocusD :: (FocusDoc)
            _colorOix :: (Int)
            _colorOpIdC :: (Int)
            _colorOpath :: ([Int])
            ( _colorIbool,_colorIpIdC,_colorIpres,_colorIpresTree,_colorIpresXML,_colorIself) =
                (color_ (_colorOfocusD) (_colorOix) (_colorOpIdC) (_colorOpath))
            -- "PresentationAG.ag"(line 1033, column 7)
            (_lhsOfocusedPiece@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then Just (_self, (_lhsIcolNr,_lhsIrowNr)) else _lhsIfocusedPiece
            -- "PresentationAG.ag"(line 1032, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1031, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1029, column 7)
            (_lhsOpres@_) =
                loc (QueenNode _self _lhsIpath) $
                  structural $ Chess.piece _self color_ _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 404, column 11)
            (_lhsOpIdC@_) =
                _colorIpIdC
            -- "PresentationAG_Generated.ag"(line 403, column 11)
            (_colorOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 420, column 11)
            (_colorOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 728, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (QueenNode _self _lhsIpath) _lhsIpath "Queen" [ _colorIpresXML ]
            -- "PresentationAG_Generated.ag"(line 950, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (QueenNode _self _lhsIpath) _lhsIpath "Queen" [ _colorIpresTree ]
            -- self rule
            (_self@_) =
                Queen idD_ _colorIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_colorOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_colorOix@_) =
                _lhsIix
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
sem_BoardSquare_Rook :: (IDD) ->
                        (T_Bool_) ->
                        (T_BoardSquare)
sem_BoardSquare_Rook (idD_) (color_) =
    \ _lhsIcolNr
      _lhsIfocusD
      _lhsIfocusedPiece
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIpossibleMoves
      _lhsIrowNr
      _lhsIsqCol ->
        let _lhsOcolNr :: (Int)
            _lhsOfocusedPiece :: ( Maybe (BoardSquare,(Int,Int)) )
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (BoardSquare)
            _lhsOsqCol :: (Bool)
            _colorIbool :: (Bool)
            _colorIpIdC :: (Int)
            _colorIpres :: (Presentation)
            _colorIpresTree :: (Presentation)
            _colorIpresXML :: (Presentation)
            _colorIself :: (Bool_)
            _colorOfocusD :: (FocusDoc)
            _colorOix :: (Int)
            _colorOpIdC :: (Int)
            _colorOpath :: ([Int])
            ( _colorIbool,_colorIpIdC,_colorIpres,_colorIpresTree,_colorIpresXML,_colorIself) =
                (color_ (_colorOfocusD) (_colorOix) (_colorOpIdC) (_colorOpath))
            -- "PresentationAG.ag"(line 1051, column 7)
            (_lhsOfocusedPiece@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then Just (_self, (_lhsIcolNr,_lhsIrowNr)) else _lhsIfocusedPiece
            -- "PresentationAG.ag"(line 1050, column 7)
            (_lhsOcolNr@_) =
                1 + _lhsIcolNr
            -- "PresentationAG.ag"(line 1049, column 7)
            (_lhsOsqCol@_) =
                not _lhsIsqCol
            -- "PresentationAG.ag"(line 1047, column 7)
            (_lhsOpres@_) =
                loc (RookNode _self _lhsIpath) $
                  structural $ Chess.piece _self color_ _lhsIsqCol _lhsIrowNr _lhsIcolNr _lhsIpossibleMoves _lhsIfocusD _lhsIpath
            -- "PresentationAG_Generated.ag"(line 412, column 10)
            (_lhsOpIdC@_) =
                _colorIpIdC
            -- "PresentationAG_Generated.ag"(line 411, column 10)
            (_colorOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 424, column 10)
            (_colorOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 736, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (RookNode _self _lhsIpath) _lhsIpath "Rook" [ _colorIpresXML ]
            -- "PresentationAG_Generated.ag"(line 958, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (RookNode _self _lhsIpath) _lhsIpath "Rook" [ _colorIpresTree ]
            -- self rule
            (_self@_) =
                Rook idD_ _colorIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_colorOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_colorOix@_) =
                _lhsIix
        in  ( _lhsOcolNr,_lhsOfocusedPiece,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOsqCol)
-- Bool_ -------------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]

   chained attributes:
      pIdC                 : Int

   synthesised attributes:
      bool                 : Bool
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for Bool_.Bool_:
      self

-}
{-
   local variables for Bool_.HoleBool_:
      self

-}
{-
   local variables for Bool_.ParseErrBool_:
      self

-}
-- semantic domain
type T_Bool_ = (FocusDoc) ->
               (Int) ->
               (Int) ->
               ([Int]) ->
               ( (Bool),(Int),(Presentation),(Presentation),(Presentation),(Bool_))
-- cata
sem_Bool_ :: (Bool_) ->
             (T_Bool_)
sem_Bool_ ((Bool_ (_idd) (_bool))) =
    (sem_Bool__Bool_ (_idd) (_bool))
sem_Bool_ ((HoleBool_ )) =
    (sem_Bool__HoleBool_ )
sem_Bool_ ((ParseErrBool_ (_node) (_presentation))) =
    (sem_Bool__ParseErrBool_ (_node) (_presentation))
sem_Bool__Bool_ :: (IDD) ->
                   (Bool) ->
                   (T_Bool_)
sem_Bool__Bool_ (idd_) (bool_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsObool :: (Bool)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Bool_)
            -- "PresentationAG.ag"(line 1426, column 7)
            (_lhsOpres@_) =
                loc (Bool_Node _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [text $ show bool_, text ""]
            -- "PresentationAG.ag"(line 1430, column 14)
            (_lhsObool@_) =
                bool_
            -- "PresentationAG_Generated.ag"(line 790, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (Bool_Node _self _lhsIpath) _lhsIpath "Bool_" [ presentPrimXMLBool bool_ ]
            -- "PresentationAG_Generated.ag"(line 1012, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (Bool_Node _self _lhsIpath) _lhsIpath "Bool_" [ presentPrimTreeBool bool_ ]
            -- self rule
            (_self@_) =
                Bool_ idd_ bool_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsObool,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
sem_Bool__HoleBool_ :: (T_Bool_)
sem_Bool__HoleBool_  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsObool :: (Bool)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Bool_)
            -- "PresentationAG.ag"(line 1432, column 13)
            (_lhsObool@_) =
                False
            -- "PresentationAG_Generated.ag"(line 495, column 19)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Bool_" (HoleBool_Node _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 791, column 19)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Bool_" (HoleBool_Node _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1013, column 19)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Bool_" (HoleBool_Node _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleBool_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsObool,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
sem_Bool__ParseErrBool_ :: (Node) ->
                           (Presentation) ->
                           (T_Bool_)
sem_Bool__ParseErrBool_ (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsObool :: (Bool)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Bool_)
            -- "PresentationAG.ag"(line 1432, column 13)
            (_lhsObool@_) =
                False
            -- "PresentationAG_Generated.ag"(line 496, column 19)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 792, column 19)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1014, column 19)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrBool_ node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsObool,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
-- ConsList_Alt ------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      totalMaxLHSLength    : Int
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      alts                 : Bindings
      maxLHSLength         : Int
      press                : [Presentation]
      pressTree            : [Presentation]
      pressXML             : [Presentation]
      self                 : SELF

-}
{-
   local variables for ConsList_Alt.Cons_Alt:
      self

-}
{-
   local variables for ConsList_Alt.Nil_Alt:
      self

-}
-- semantic domain
type T_ConsList_Alt = (Int) ->
                      (Bindings) ->
                      ([HeliumMessage]) ->
                      (FocusDoc) ->
                      (Int) ->
                      (LayoutMap) ->
                      (Int) ->
                      (Int) ->
                      (Int) ->
                      ([Int]) ->
                      (([PathDoc],[PathDoc],[PathDoc])) ->
                      (Int) ->
                      ([(String, String)]) ->
                      (Int) ->
                      ([(PathDoc,String)]) ->
                      (FiniteMap String (PathDoc, String)) ->
                      (FiniteMap String (PathDoc, String)) ->
                      ( (Bindings),(Int),(LayoutMap),(Int),(Int),(Int),([Presentation]),([Presentation]),([Presentation]),(ConsList_Alt),(Int),(FiniteMap String (PathDoc, String)))
-- cata
sem_ConsList_Alt :: (ConsList_Alt) ->
                    (T_ConsList_Alt)
sem_ConsList_Alt ((Cons_Alt (_head) (_tail))) =
    (sem_ConsList_Alt_Cons_Alt ((sem_Alt (_head))) ((sem_ConsList_Alt (_tail))))
sem_ConsList_Alt ((Nil_Alt )) =
    (sem_ConsList_Alt_Nil_Alt )
sem_ConsList_Alt_Cons_Alt :: (T_Alt) ->
                             (T_ConsList_Alt) ->
                             (T_ConsList_Alt)
sem_ConsList_Alt_Cons_Alt (head_) (tail_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalts :: (Bindings)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOmaxLHSLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headIalt :: (Binding)
            _headIcol :: (Int)
            _headIlayoutMap :: (LayoutMap)
            _headIlhsLength :: (Int)
            _headInewlines :: (Int)
            _headIpIdC :: (Int)
            _headIpres :: (Presentation)
            _headIpresTree :: (Presentation)
            _headIpresXML :: (Presentation)
            _headIself :: (Alt)
            _headIspaces :: (Int)
            _headIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headOcol :: (Int)
            _headOenv :: (Bindings)
            _headOerrs :: ([HeliumMessage])
            _headOfocusD :: (FocusDoc)
            _headOix :: (Int)
            _headOlayoutMap :: (LayoutMap)
            _headOlevel :: (Int)
            _headOnewlines :: (Int)
            _headOpIdC :: (Int)
            _headOpath :: ([Int])
            _headOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _headOspaces :: (Int)
            _headOtopLevelEnv :: ([(String, String)])
            _headOtotalMaxLHSLength :: (Int)
            _headOtypeEnv :: ([(PathDoc,String)])
            _headOvarsInScope :: (FiniteMap String (PathDoc, String))
            _headOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailIalts :: (Bindings)
            _tailIcol :: (Int)
            _tailIlayoutMap :: (LayoutMap)
            _tailImaxLHSLength :: (Int)
            _tailInewlines :: (Int)
            _tailIpIdC :: (Int)
            _tailIpress :: ([Presentation])
            _tailIpressTree :: ([Presentation])
            _tailIpressXML :: ([Presentation])
            _tailIself :: (ConsList_Alt)
            _tailIspaces :: (Int)
            _tailIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailOcol :: (Int)
            _tailOenv :: (Bindings)
            _tailOerrs :: ([HeliumMessage])
            _tailOfocusD :: (FocusDoc)
            _tailOix :: (Int)
            _tailOlayoutMap :: (LayoutMap)
            _tailOlevel :: (Int)
            _tailOnewlines :: (Int)
            _tailOpIdC :: (Int)
            _tailOpath :: ([Int])
            _tailOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _tailOspaces :: (Int)
            _tailOtopLevelEnv :: ([(String, String)])
            _tailOtotalMaxLHSLength :: (Int)
            _tailOtypeEnv :: ([(PathDoc,String)])
            _tailOvarsInScope :: (FiniteMap String (PathDoc, String))
            _tailOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _headIalt,_headIcol,_headIlayoutMap,_headIlhsLength,_headInewlines,_headIpIdC,_headIpres,_headIpresTree,_headIpresXML,_headIself,_headIspaces,_headIvarsInScopeAtFocus) =
                (head_ (_headOcol) (_headOenv) (_headOerrs) (_headOfocusD) (_headOix) (_headOlayoutMap) (_headOlevel) (_headOnewlines) (_headOpIdC) (_headOpath) (_headOranges) (_headOspaces) (_headOtopLevelEnv) (_headOtotalMaxLHSLength) (_headOtypeEnv) (_headOvarsInScope) (_headOvarsInScopeAtFocus))
            ( _tailIalts,_tailIcol,_tailIlayoutMap,_tailImaxLHSLength,_tailInewlines,_tailIpIdC,_tailIpress,_tailIpressTree,_tailIpressXML,_tailIself,_tailIspaces,_tailIvarsInScopeAtFocus) =
                (tail_ (_tailOcol) (_tailOenv) (_tailOerrs) (_tailOfocusD) (_tailOix) (_tailOlayoutMap) (_tailOlevel) (_tailOnewlines) (_tailOpIdC) (_tailOpath) (_tailOranges) (_tailOspaces) (_tailOtopLevelEnv) (_tailOtotalMaxLHSLength) (_tailOtypeEnv) (_tailOvarsInScope) (_tailOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 707, column 9)
            (_lhsOmaxLHSLength@_) =
                _headIlhsLength `max` _tailImaxLHSLength
            -- "PresentationAG.ag"(line 979, column 18)
            (_lhsOalts@_) =
                _headIalt : _tailIalts
            -- "PresentationAG_Generated.ag"(line 548, column 18)
            (_lhsOpIdC@_) =
                _tailIpIdC
            -- "PresentationAG_Generated.ag"(line 547, column 18)
            (_tailOpIdC@_) =
                _headIpIdC
            -- "PresentationAG_Generated.ag"(line 546, column 18)
            (_headOpIdC@_) =
                _lhsIpIdC + 30
            -- "PresentationAG_Generated.ag"(line 545, column 18)
            (_lhsOpress@_) =
                _headIpres : _tailIpress
            -- "PresentationAG_Generated.ag"(line 544, column 13)
            (_tailOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 543, column 14)
            (_headOpath@_) =
                _lhsIpath++[_lhsIix]
            -- "PresentationAG_Generated.ag"(line 553, column 18)
            (_tailOix@_) =
                _lhsIix + 1
            -- "PresentationAG_Generated.ag"(line 827, column 18)
            (_lhsOpressXML@_) =
                _headIpresXML : _tailIpressXML
            -- "PresentationAG_Generated.ag"(line 1049, column 18)
            (_lhsOpressTree@_) =
                _headIpresTree : _tailIpressTree
            -- self rule
            (_self@_) =
                Cons_Alt _headIself _tailIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _tailIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _tailIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _tailInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _tailIspaces
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _tailIvarsInScopeAtFocus
            -- copy rule (down)
            (_headOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_headOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_headOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_headOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_headOix@_) =
                _lhsIix
            -- copy rule (down)
            (_headOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_headOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_headOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_headOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_headOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_headOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_headOtotalMaxLHSLength@_) =
                _lhsItotalMaxLHSLength
            -- copy rule (down)
            (_headOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_headOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_headOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (chain)
            (_tailOcol@_) =
                _headIcol
            -- copy rule (down)
            (_tailOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_tailOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_tailOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_tailOlayoutMap@_) =
                _headIlayoutMap
            -- copy rule (down)
            (_tailOlevel@_) =
                _lhsIlevel
            -- copy rule (chain)
            (_tailOnewlines@_) =
                _headInewlines
            -- copy rule (down)
            (_tailOranges@_) =
                _lhsIranges
            -- copy rule (chain)
            (_tailOspaces@_) =
                _headIspaces
            -- copy rule (down)
            (_tailOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_tailOtotalMaxLHSLength@_) =
                _lhsItotalMaxLHSLength
            -- copy rule (down)
            (_tailOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_tailOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_tailOvarsInScopeAtFocus@_) =
                _headIvarsInScopeAtFocus
        in  ( _lhsOalts,_lhsOcol,_lhsOlayoutMap,_lhsOmaxLHSLength,_lhsOnewlines,_lhsOpIdC,_lhsOpress,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_ConsList_Alt_Nil_Alt :: (T_ConsList_Alt)
sem_ConsList_Alt_Nil_Alt  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalts :: (Bindings)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOmaxLHSLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 709, column 9)
            (_lhsOmaxLHSLength@_) =
                0
            -- "PresentationAG.ag"(line 980, column 18)
            (_lhsOalts@_) =
                []
            -- "PresentationAG_Generated.ag"(line 549, column 18)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 828, column 18)
            (_lhsOpressXML@_) =
                []
            -- "PresentationAG_Generated.ag"(line 1050, column 18)
            (_lhsOpressTree@_) =
                []
            -- self rule
            (_self@_) =
                Nil_Alt
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOalts,_lhsOcol,_lhsOlayoutMap,_lhsOmaxLHSLength,_lhsOnewlines,_lhsOpIdC,_lhsOpress,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
-- ConsList_Decl -----------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      dcls                 : Bindings
      declaredVars         : [(String,(PathDoc,String))]
      idsPres              : Presentation
      parseErrs            : [String]
      press                : [Presentation]
      pressTree            : [Presentation]
      pressXML             : [Presentation]
      self                 : SELF

-}
{-
   local variables for ConsList_Decl.Cons_Decl:
      self

-}
{-
   local variables for ConsList_Decl.Nil_Decl:
      self

-}
-- semantic domain
type T_ConsList_Decl = (Int) ->
                       (Bindings) ->
                       ([HeliumMessage]) ->
                       (FocusDoc) ->
                       (Int) ->
                       (LayoutMap) ->
                       (Int) ->
                       (Int) ->
                       (Int) ->
                       ([Int]) ->
                       (([PathDoc],[PathDoc],[PathDoc])) ->
                       (Int) ->
                       ([(String, String)]) ->
                       ([(PathDoc,String)]) ->
                       (FiniteMap String (PathDoc, String)) ->
                       (FiniteMap String (PathDoc, String)) ->
                       ( (Int),(Bindings),([(String,(PathDoc,String))]),(Presentation),(LayoutMap),(Int),(Int),([String]),([Presentation]),([Presentation]),([Presentation]),(ConsList_Decl),(Int),(FiniteMap String (PathDoc, String)))
-- cata
sem_ConsList_Decl :: (ConsList_Decl) ->
                     (T_ConsList_Decl)
sem_ConsList_Decl ((Cons_Decl (_head) (_tail))) =
    (sem_ConsList_Decl_Cons_Decl ((sem_Decl (_head))) ((sem_ConsList_Decl (_tail))))
sem_ConsList_Decl ((Nil_Decl )) =
    (sem_ConsList_Decl_Nil_Decl )
sem_ConsList_Decl_Cons_Decl :: (T_Decl) ->
                               (T_ConsList_Decl) ->
                               (T_ConsList_Decl)
sem_ConsList_Decl_Cons_Decl (head_) (tail_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcls :: (Bindings)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOparseErrs :: ([String])
            _lhsOpress :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Decl)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headIcol :: (Int)
            _headIdcl :: (Binding)
            _headIdeclaredVars :: ([(String,(PathDoc,String))])
            _headIidsPres :: (Presentation)
            _headIlayoutMap :: (LayoutMap)
            _headInewlines :: (Int)
            _headIpIdC :: (Int)
            _headIpres :: (Presentation)
            _headIpresTree :: (Presentation)
            _headIpresXML :: (Presentation)
            _headIself :: (Decl)
            _headIspaces :: (Int)
            _headItypeStr :: (Maybe String)
            _headIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headOcol :: (Int)
            _headOenv :: (Bindings)
            _headOerrs :: ([HeliumMessage])
            _headOfocusD :: (FocusDoc)
            _headOix :: (Int)
            _headOlayoutMap :: (LayoutMap)
            _headOlevel :: (Int)
            _headOnewlines :: (Int)
            _headOpIdC :: (Int)
            _headOpath :: ([Int])
            _headOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _headOspaces :: (Int)
            _headOtopLevelEnv :: ([(String, String)])
            _headOtypeEnv :: ([(PathDoc,String)])
            _headOvarsInScope :: (FiniteMap String (PathDoc, String))
            _headOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailIcol :: (Int)
            _tailIdcls :: (Bindings)
            _tailIdeclaredVars :: ([(String,(PathDoc,String))])
            _tailIidsPres :: (Presentation)
            _tailIlayoutMap :: (LayoutMap)
            _tailInewlines :: (Int)
            _tailIpIdC :: (Int)
            _tailIparseErrs :: ([String])
            _tailIpress :: ([Presentation])
            _tailIpressTree :: ([Presentation])
            _tailIpressXML :: ([Presentation])
            _tailIself :: (ConsList_Decl)
            _tailIspaces :: (Int)
            _tailIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailOcol :: (Int)
            _tailOenv :: (Bindings)
            _tailOerrs :: ([HeliumMessage])
            _tailOfocusD :: (FocusDoc)
            _tailOix :: (Int)
            _tailOlayoutMap :: (LayoutMap)
            _tailOlevel :: (Int)
            _tailOnewlines :: (Int)
            _tailOpIdC :: (Int)
            _tailOpath :: ([Int])
            _tailOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _tailOspaces :: (Int)
            _tailOtopLevelEnv :: ([(String, String)])
            _tailOtypeEnv :: ([(PathDoc,String)])
            _tailOvarsInScope :: (FiniteMap String (PathDoc, String))
            _tailOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _headIcol,_headIdcl,_headIdeclaredVars,_headIidsPres,_headIlayoutMap,_headInewlines,_headIpIdC,_headIpres,_headIpresTree,_headIpresXML,_headIself,_headIspaces,_headItypeStr,_headIvarsInScopeAtFocus) =
                (head_ (_headOcol) (_headOenv) (_headOerrs) (_headOfocusD) (_headOix) (_headOlayoutMap) (_headOlevel) (_headOnewlines) (_headOpIdC) (_headOpath) (_headOranges) (_headOspaces) (_headOtopLevelEnv) (_headOtypeEnv) (_headOvarsInScope) (_headOvarsInScopeAtFocus))
            ( _tailIcol,_tailIdcls,_tailIdeclaredVars,_tailIidsPres,_tailIlayoutMap,_tailInewlines,_tailIpIdC,_tailIparseErrs,_tailIpress,_tailIpressTree,_tailIpressXML,_tailIself,_tailIspaces,_tailIvarsInScopeAtFocus) =
                (tail_ (_tailOcol) (_tailOenv) (_tailOerrs) (_tailOfocusD) (_tailOix) (_tailOlayoutMap) (_tailOlevel) (_tailOnewlines) (_tailOpIdC) (_tailOpath) (_tailOranges) (_tailOspaces) (_tailOtopLevelEnv) (_tailOtypeEnv) (_tailOvarsInScope) (_tailOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 65, column 19)
            (_lhsOparseErrs@_) =
                []
            -- "PresentationAG.ag"(line 912, column 19)
            (_lhsOdcls@_) =
                _headIdcl : _tailIdcls
            -- "PresentationAG.ag"(line 1079, column 19)
            (_lhsOidsPres@_) =
                row' [ _headIidsPres, text " ", _tailIidsPres ]
            -- "PresentationAG_Generated.ag"(line 522, column 18)
            (_lhsOpIdC@_) =
                _tailIpIdC
            -- "PresentationAG_Generated.ag"(line 521, column 18)
            (_tailOpIdC@_) =
                _headIpIdC
            -- "PresentationAG_Generated.ag"(line 520, column 18)
            (_headOpIdC@_) =
                _lhsIpIdC + 30
            -- "PresentationAG_Generated.ag"(line 519, column 18)
            (_lhsOpress@_) =
                _headIpres : _tailIpress
            -- "PresentationAG_Generated.ag"(line 518, column 14)
            (_tailOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 517, column 15)
            (_headOpath@_) =
                _lhsIpath++[_lhsIix]
            -- "PresentationAG_Generated.ag"(line 527, column 19)
            (_tailOix@_) =
                _lhsIix + 1
            -- "PresentationAG_Generated.ag"(line 812, column 19)
            (_lhsOpressXML@_) =
                _headIpresXML : _tailIpressXML
            -- "PresentationAG_Generated.ag"(line 1034, column 19)
            (_lhsOpressTree@_) =
                _headIpresTree : _tailIpressTree
            -- use rule
            (_lhsOdeclaredVars@_) =
                _headIdeclaredVars ++ _tailIdeclaredVars
            -- self rule
            (_self@_) =
                Cons_Decl _headIself _tailIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _tailIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _tailIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _tailInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _tailIspaces
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _tailIvarsInScopeAtFocus
            -- copy rule (down)
            (_headOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_headOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_headOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_headOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_headOix@_) =
                _lhsIix
            -- copy rule (down)
            (_headOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_headOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_headOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_headOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_headOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_headOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_headOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_headOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_headOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (chain)
            (_tailOcol@_) =
                _headIcol
            -- copy rule (down)
            (_tailOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_tailOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_tailOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_tailOlayoutMap@_) =
                _headIlayoutMap
            -- copy rule (down)
            (_tailOlevel@_) =
                _lhsIlevel
            -- copy rule (chain)
            (_tailOnewlines@_) =
                _headInewlines
            -- copy rule (down)
            (_tailOranges@_) =
                _lhsIranges
            -- copy rule (chain)
            (_tailOspaces@_) =
                _headIspaces
            -- copy rule (down)
            (_tailOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_tailOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_tailOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_tailOvarsInScopeAtFocus@_) =
                _headIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcls,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOparseErrs,_lhsOpress,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_ConsList_Decl_Nil_Decl :: (T_ConsList_Decl)
sem_ConsList_Decl_Nil_Decl  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcls :: (Bindings)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOparseErrs :: ([String])
            _lhsOpress :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Decl)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 66, column 19)
            (_lhsOparseErrs@_) =
                []
            -- "PresentationAG.ag"(line 913, column 19)
            (_lhsOdcls@_) =
                []
            -- "PresentationAG.ag"(line 1080, column 19)
            (_lhsOidsPres@_) =
                empty
            -- "PresentationAG_Generated.ag"(line 523, column 19)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 813, column 19)
            (_lhsOpressXML@_) =
                []
            -- "PresentationAG_Generated.ag"(line 1035, column 19)
            (_lhsOpressTree@_) =
                []
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                Nil_Decl
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcls,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOparseErrs,_lhsOpress,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
-- ConsList_Exp ------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      press                : [Presentation]
      pressTree            : [Presentation]
      pressXML             : [Presentation]
      self                 : SELF
      vals                 : [Value]

-}
{-
   local variables for ConsList_Exp.Cons_Exp:
      self

-}
{-
   local variables for ConsList_Exp.Nil_Exp:
      self

-}
-- semantic domain
type T_ConsList_Exp = (Int) ->
                      (Bindings) ->
                      ([HeliumMessage]) ->
                      (FocusDoc) ->
                      (Int) ->
                      (LayoutMap) ->
                      (Int) ->
                      (Int) ->
                      (Int) ->
                      ([Int]) ->
                      (([PathDoc],[PathDoc],[PathDoc])) ->
                      (Int) ->
                      ([(String, String)]) ->
                      ([(PathDoc,String)]) ->
                      (FiniteMap String (PathDoc, String)) ->
                      (FiniteMap String (PathDoc, String)) ->
                      ( (Int),(LayoutMap),(Int),(Int),([Presentation]),([Presentation]),([Presentation]),(ConsList_Exp),(Int),([Value]),(FiniteMap String (PathDoc, String)))
-- cata
sem_ConsList_Exp :: (ConsList_Exp) ->
                    (T_ConsList_Exp)
sem_ConsList_Exp ((Cons_Exp (_head) (_tail))) =
    (sem_ConsList_Exp_Cons_Exp ((sem_Exp (_head))) ((sem_ConsList_Exp (_tail))))
sem_ConsList_Exp ((Nil_Exp )) =
    (sem_ConsList_Exp_Nil_Exp )
sem_ConsList_Exp_Cons_Exp :: (T_Exp) ->
                             (T_ConsList_Exp) ->
                             (T_ConsList_Exp)
sem_ConsList_Exp_Cons_Exp (head_) (tail_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Exp)
            _lhsOspaces :: (Int)
            _lhsOvals :: ([Value])
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headIcol :: (Int)
            _headIlamBody :: (([(String, Exp)] -> Exp))
            _headIlayoutMap :: (LayoutMap)
            _headInewlines :: (Int)
            _headIpIdC :: (Int)
            _headIpres :: (Presentation)
            _headIpresTree :: (Presentation)
            _headIpresXML :: (Presentation)
            _headIself :: (Exp)
            _headIspaces :: (Int)
            _headIsubstitute :: (( [(String, Exp)] -> Exp ))
            _headItype :: (String)
            _headIval :: (Value)
            _headIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headOcol :: (Int)
            _headOenv :: (Bindings)
            _headOerrs :: ([HeliumMessage])
            _headOfocusD :: (FocusDoc)
            _headOix :: (Int)
            _headOlayoutMap :: (LayoutMap)
            _headOlevel :: (Int)
            _headOnewlines :: (Int)
            _headOpIdC :: (Int)
            _headOpath :: ([Int])
            _headOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _headOspaces :: (Int)
            _headOtopLevelEnv :: ([(String, String)])
            _headOtypeEnv :: ([(PathDoc,String)])
            _headOvarsInScope :: (FiniteMap String (PathDoc, String))
            _headOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailIcol :: (Int)
            _tailIlayoutMap :: (LayoutMap)
            _tailInewlines :: (Int)
            _tailIpIdC :: (Int)
            _tailIpress :: ([Presentation])
            _tailIpressTree :: ([Presentation])
            _tailIpressXML :: ([Presentation])
            _tailIself :: (ConsList_Exp)
            _tailIspaces :: (Int)
            _tailIvals :: ([Value])
            _tailIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailOcol :: (Int)
            _tailOenv :: (Bindings)
            _tailOerrs :: ([HeliumMessage])
            _tailOfocusD :: (FocusDoc)
            _tailOix :: (Int)
            _tailOlayoutMap :: (LayoutMap)
            _tailOlevel :: (Int)
            _tailOnewlines :: (Int)
            _tailOpIdC :: (Int)
            _tailOpath :: ([Int])
            _tailOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _tailOspaces :: (Int)
            _tailOtopLevelEnv :: ([(String, String)])
            _tailOtypeEnv :: ([(PathDoc,String)])
            _tailOvarsInScope :: (FiniteMap String (PathDoc, String))
            _tailOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _headIcol,_headIlamBody,_headIlayoutMap,_headInewlines,_headIpIdC,_headIpres,_headIpresTree,_headIpresXML,_headIself,_headIspaces,_headIsubstitute,_headItype,_headIval,_headIvarsInScopeAtFocus) =
                (head_ (_headOcol) (_headOenv) (_headOerrs) (_headOfocusD) (_headOix) (_headOlayoutMap) (_headOlevel) (_headOnewlines) (_headOpIdC) (_headOpath) (_headOranges) (_headOspaces) (_headOtopLevelEnv) (_headOtypeEnv) (_headOvarsInScope) (_headOvarsInScopeAtFocus))
            ( _tailIcol,_tailIlayoutMap,_tailInewlines,_tailIpIdC,_tailIpress,_tailIpressTree,_tailIpressXML,_tailIself,_tailIspaces,_tailIvals,_tailIvarsInScopeAtFocus) =
                (tail_ (_tailOcol) (_tailOenv) (_tailOerrs) (_tailOfocusD) (_tailOix) (_tailOlayoutMap) (_tailOlevel) (_tailOnewlines) (_tailOpIdC) (_tailOpath) (_tailOranges) (_tailOspaces) (_tailOtopLevelEnv) (_tailOtypeEnv) (_tailOvarsInScope) (_tailOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 679, column 7)
            (_tailOcol@_) =
                _headIcol + 2
            -- "PresentationAG.ag"(line 969, column 18)
            (_lhsOvals@_) =
                _headIval : _tailIvals
            -- "PresentationAG_Generated.ag"(line 574, column 18)
            (_lhsOpIdC@_) =
                _tailIpIdC
            -- "PresentationAG_Generated.ag"(line 573, column 18)
            (_tailOpIdC@_) =
                _headIpIdC
            -- "PresentationAG_Generated.ag"(line 572, column 18)
            (_headOpIdC@_) =
                _lhsIpIdC + 30
            -- "PresentationAG_Generated.ag"(line 571, column 18)
            (_lhsOpress@_) =
                _headIpres : _tailIpress
            -- "PresentationAG_Generated.ag"(line 570, column 13)
            (_tailOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 569, column 14)
            (_headOpath@_) =
                _lhsIpath++[_lhsIix]
            -- "PresentationAG_Generated.ag"(line 579, column 18)
            (_tailOix@_) =
                _lhsIix + 1
            -- "PresentationAG_Generated.ag"(line 842, column 18)
            (_lhsOpressXML@_) =
                _headIpresXML : _tailIpressXML
            -- "PresentationAG_Generated.ag"(line 1064, column 18)
            (_lhsOpressTree@_) =
                _headIpresTree : _tailIpressTree
            -- self rule
            (_self@_) =
                Cons_Exp _headIself _tailIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _tailIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _tailIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _tailInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _tailIspaces
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _tailIvarsInScopeAtFocus
            -- copy rule (down)
            (_headOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_headOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_headOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_headOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_headOix@_) =
                _lhsIix
            -- copy rule (down)
            (_headOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_headOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_headOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_headOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_headOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_headOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_headOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_headOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_headOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_tailOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_tailOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_tailOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_tailOlayoutMap@_) =
                _headIlayoutMap
            -- copy rule (down)
            (_tailOlevel@_) =
                _lhsIlevel
            -- copy rule (chain)
            (_tailOnewlines@_) =
                _headInewlines
            -- copy rule (down)
            (_tailOranges@_) =
                _lhsIranges
            -- copy rule (chain)
            (_tailOspaces@_) =
                _headIspaces
            -- copy rule (down)
            (_tailOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_tailOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_tailOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_tailOvarsInScopeAtFocus@_) =
                _headIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpress,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOspaces,_lhsOvals,_lhsOvarsInScopeAtFocus)
sem_ConsList_Exp_Nil_Exp :: (T_ConsList_Exp)
sem_ConsList_Exp_Nil_Exp  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Exp)
            _lhsOspaces :: (Int)
            _lhsOvals :: ([Value])
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 970, column 18)
            (_lhsOvals@_) =
                []
            -- "PresentationAG_Generated.ag"(line 575, column 18)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 843, column 18)
            (_lhsOpressXML@_) =
                []
            -- "PresentationAG_Generated.ag"(line 1065, column 18)
            (_lhsOpressTree@_) =
                []
            -- self rule
            (_self@_) =
                Nil_Exp
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpress,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOspaces,_lhsOvals,_lhsOvarsInScopeAtFocus)
-- ConsList_Item -----------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      listType             : ListType
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      typeLoc              : Presentation -> Presentation
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      press                : [Presentation]
      press2               : [Presentation]
      pressTree            : [Presentation]
      pressXML             : [Presentation]
      self                 : SELF

-}
{-
   local variables for ConsList_Item.Cons_Item:
      self

-}
{-
   local variables for ConsList_Item.Nil_Item:
      self

-}
-- semantic domain
type T_ConsList_Item = (FocusDoc) ->
                       (Int) ->
                       (ListType) ->
                       (Int) ->
                       ([Int]) ->
                       (([PathDoc],[PathDoc],[PathDoc])) ->
                       (Presentation -> Presentation) ->
                       (FiniteMap String (PathDoc, String)) ->
                       (FiniteMap String (PathDoc, String)) ->
                       ( (Int),([Presentation]),([Presentation]),([Presentation]),([Presentation]),(ConsList_Item),(FiniteMap String (PathDoc, String)))
-- cata
sem_ConsList_Item :: (ConsList_Item) ->
                     (T_ConsList_Item)
sem_ConsList_Item ((Cons_Item (_head) (_tail))) =
    (sem_ConsList_Item_Cons_Item ((sem_Item (_head))) ((sem_ConsList_Item (_tail))))
sem_ConsList_Item ((Nil_Item )) =
    (sem_ConsList_Item_Nil_Item )
sem_ConsList_Item_Cons_Item :: (T_Item) ->
                               (T_ConsList_Item) ->
                               (T_ConsList_Item)
sem_ConsList_Item_Cons_Item (head_) (tail_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headIpIdC :: (Int)
            _headIpres :: (Presentation)
            _headIpres2 :: (Presentation)
            _headIpresTree :: (Presentation)
            _headIpresXML :: (Presentation)
            _headIself :: (Item)
            _headIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headOfocusD :: (FocusDoc)
            _headOix :: (Int)
            _headOlistType :: (ListType)
            _headOpIdC :: (Int)
            _headOpath :: ([Int])
            _headOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _headOtypeLoc :: (Presentation -> Presentation)
            _headOvarsInScope :: (FiniteMap String (PathDoc, String))
            _headOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailIpIdC :: (Int)
            _tailIpress :: ([Presentation])
            _tailIpress2 :: ([Presentation])
            _tailIpressTree :: ([Presentation])
            _tailIpressXML :: ([Presentation])
            _tailIself :: (ConsList_Item)
            _tailIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailOfocusD :: (FocusDoc)
            _tailOix :: (Int)
            _tailOlistType :: (ListType)
            _tailOpIdC :: (Int)
            _tailOpath :: ([Int])
            _tailOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _tailOtypeLoc :: (Presentation -> Presentation)
            _tailOvarsInScope :: (FiniteMap String (PathDoc, String))
            _tailOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _headIpIdC,_headIpres,_headIpres2,_headIpresTree,_headIpresXML,_headIself,_headIvarsInScopeAtFocus) =
                (head_ (_headOfocusD) (_headOix) (_headOlistType) (_headOpIdC) (_headOpath) (_headOranges) (_headOtypeLoc) (_headOvarsInScope) (_headOvarsInScopeAtFocus))
            ( _tailIpIdC,_tailIpress,_tailIpress2,_tailIpressTree,_tailIpressXML,_tailIself,_tailIvarsInScopeAtFocus) =
                (tail_ (_tailOfocusD) (_tailOix) (_tailOlistType) (_tailOpIdC) (_tailOpath) (_tailOranges) (_tailOtypeLoc) (_tailOvarsInScope) (_tailOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1350, column 15)
            (_headOtypeLoc@_) =
                _lhsItypeLoc
            -- "PresentationAG.ag"(line 1349, column 15)
            (_headOlistType@_) =
                _lhsIlistType
            -- "PresentationAG.ag"(line 1348, column 15)
            (_lhsOpress2@_) =
                _headIpres2 : _tailIpress2
            -- "PresentationAG_Generated.ag"(line 626, column 18)
            (_lhsOpIdC@_) =
                _tailIpIdC
            -- "PresentationAG_Generated.ag"(line 625, column 18)
            (_tailOpIdC@_) =
                _headIpIdC
            -- "PresentationAG_Generated.ag"(line 624, column 18)
            (_headOpIdC@_) =
                _lhsIpIdC + 30
            -- "PresentationAG_Generated.ag"(line 623, column 18)
            (_lhsOpress@_) =
                _headIpres : _tailIpress
            -- "PresentationAG_Generated.ag"(line 622, column 14)
            (_tailOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 621, column 15)
            (_headOpath@_) =
                _lhsIpath++[_lhsIix]
            -- "PresentationAG_Generated.ag"(line 631, column 19)
            (_tailOix@_) =
                _lhsIix + 1
            -- "PresentationAG_Generated.ag"(line 872, column 19)
            (_lhsOpressXML@_) =
                _headIpresXML : _tailIpressXML
            -- "PresentationAG_Generated.ag"(line 1094, column 19)
            (_lhsOpressTree@_) =
                _headIpresTree : _tailIpressTree
            -- self rule
            (_self@_) =
                Cons_Item _headIself _tailIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _tailIvarsInScopeAtFocus
            -- copy rule (down)
            (_headOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_headOix@_) =
                _lhsIix
            -- copy rule (down)
            (_headOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_headOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_headOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_tailOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_tailOlistType@_) =
                _lhsIlistType
            -- copy rule (down)
            (_tailOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_tailOtypeLoc@_) =
                _lhsItypeLoc
            -- copy rule (down)
            (_tailOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_tailOvarsInScopeAtFocus@_) =
                _headIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpress,_lhsOpress2,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_ConsList_Item_Nil_Item :: (T_ConsList_Item)
sem_ConsList_Item_Nil_Item  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1351, column 15)
            (_lhsOpress2@_) =
                []
            -- "PresentationAG_Generated.ag"(line 627, column 19)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 873, column 19)
            (_lhsOpressXML@_) =
                []
            -- "PresentationAG_Generated.ag"(line 1095, column 19)
            (_lhsOpressTree@_) =
                []
            -- self rule
            (_self@_) =
                Nil_Item
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpress,_lhsOpress2,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOvarsInScopeAtFocus)
-- ConsList_Slide ----------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      press                : [Presentation]
      press2               : [Presentation]
      pressTree            : [Presentation]
      pressXML             : [Presentation]
      self                 : SELF

-}
{-
   local variables for ConsList_Slide.Cons_Slide:
      self

-}
{-
   local variables for ConsList_Slide.Nil_Slide:
      self

-}
-- semantic domain
type T_ConsList_Slide = (FocusDoc) ->
                        (Int) ->
                        (Int) ->
                        ([Int]) ->
                        (([PathDoc],[PathDoc],[PathDoc])) ->
                        (FiniteMap String (PathDoc, String)) ->
                        (FiniteMap String (PathDoc, String)) ->
                        ( (Int),([Presentation]),([Presentation]),([Presentation]),([Presentation]),(ConsList_Slide),(FiniteMap String (PathDoc, String)))
-- cata
sem_ConsList_Slide :: (ConsList_Slide) ->
                      (T_ConsList_Slide)
sem_ConsList_Slide ((Cons_Slide (_head) (_tail))) =
    (sem_ConsList_Slide_Cons_Slide ((sem_Slide (_head))) ((sem_ConsList_Slide (_tail))))
sem_ConsList_Slide ((Nil_Slide )) =
    (sem_ConsList_Slide_Nil_Slide )
sem_ConsList_Slide_Cons_Slide :: (T_Slide) ->
                                 (T_ConsList_Slide) ->
                                 (T_ConsList_Slide)
sem_ConsList_Slide_Cons_Slide (head_) (tail_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headIpIdC :: (Int)
            _headIpres :: (Presentation)
            _headIpres2 :: (Presentation)
            _headIpresTree :: (Presentation)
            _headIpresXML :: (Presentation)
            _headIself :: (Slide)
            _headIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _headOfocusD :: (FocusDoc)
            _headOix :: (Int)
            _headOpIdC :: (Int)
            _headOpath :: ([Int])
            _headOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _headOvarsInScope :: (FiniteMap String (PathDoc, String))
            _headOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailIpIdC :: (Int)
            _tailIpress :: ([Presentation])
            _tailIpress2 :: ([Presentation])
            _tailIpressTree :: ([Presentation])
            _tailIpressXML :: ([Presentation])
            _tailIself :: (ConsList_Slide)
            _tailIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _tailOfocusD :: (FocusDoc)
            _tailOix :: (Int)
            _tailOpIdC :: (Int)
            _tailOpath :: ([Int])
            _tailOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _tailOvarsInScope :: (FiniteMap String (PathDoc, String))
            _tailOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _headIpIdC,_headIpres,_headIpres2,_headIpresTree,_headIpresXML,_headIself,_headIvarsInScopeAtFocus) =
                (head_ (_headOfocusD) (_headOix) (_headOpIdC) (_headOpath) (_headOranges) (_headOvarsInScope) (_headOvarsInScopeAtFocus))
            ( _tailIpIdC,_tailIpress,_tailIpress2,_tailIpressTree,_tailIpressXML,_tailIself,_tailIvarsInScopeAtFocus) =
                (tail_ (_tailOfocusD) (_tailOix) (_tailOpIdC) (_tailOpath) (_tailOranges) (_tailOvarsInScope) (_tailOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1343, column 16)
            (_lhsOpress2@_) =
                _headIpres2 : _tailIpress2
            -- "PresentationAG_Generated.ag"(line 600, column 18)
            (_lhsOpIdC@_) =
                _tailIpIdC
            -- "PresentationAG_Generated.ag"(line 599, column 18)
            (_tailOpIdC@_) =
                _headIpIdC
            -- "PresentationAG_Generated.ag"(line 598, column 18)
            (_headOpIdC@_) =
                _lhsIpIdC + 30
            -- "PresentationAG_Generated.ag"(line 597, column 18)
            (_lhsOpress@_) =
                _headIpres : _tailIpress
            -- "PresentationAG_Generated.ag"(line 596, column 15)
            (_tailOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 595, column 16)
            (_headOpath@_) =
                _lhsIpath++[_lhsIix]
            -- "PresentationAG_Generated.ag"(line 605, column 20)
            (_tailOix@_) =
                _lhsIix + 1
            -- "PresentationAG_Generated.ag"(line 857, column 20)
            (_lhsOpressXML@_) =
                _headIpresXML : _tailIpressXML
            -- "PresentationAG_Generated.ag"(line 1079, column 20)
            (_lhsOpressTree@_) =
                _headIpresTree : _tailIpressTree
            -- self rule
            (_self@_) =
                Cons_Slide _headIself _tailIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _tailIvarsInScopeAtFocus
            -- copy rule (down)
            (_headOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_headOix@_) =
                _lhsIix
            -- copy rule (down)
            (_headOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_headOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_headOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_tailOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_tailOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_tailOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_tailOvarsInScopeAtFocus@_) =
                _headIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpress,_lhsOpress2,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_ConsList_Slide_Nil_Slide :: (T_ConsList_Slide)
sem_ConsList_Slide_Nil_Slide  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOpressTree :: ([Presentation])
            _lhsOpressXML :: ([Presentation])
            _lhsOself :: (ConsList_Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1344, column 16)
            (_lhsOpress2@_) =
                []
            -- "PresentationAG_Generated.ag"(line 601, column 20)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 858, column 20)
            (_lhsOpressXML@_) =
                []
            -- "PresentationAG_Generated.ag"(line 1080, column 20)
            (_lhsOpressTree@_) =
                []
            -- self rule
            (_self@_) =
                Nil_Slide
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpress,_lhsOpress2,_lhsOpressTree,_lhsOpressXML,_lhsOself,_lhsOvarsInScopeAtFocus)
-- Decl --------------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      dcl                  : Binding
      declaredVars         : [(String,(PathDoc,String))]
      idsPres              : Presentation
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF
      typeStr              : Maybe String

-}
{-
   local variables for Decl.BoardDecl:
      typeStr
      self

-}
{-
   local variables for Decl.Decl:
      typeStr
      self

-}
{-
   local variables for Decl.HoleDecl:
      typeStr
      self

-}
{-
   local variables for Decl.PPPresentationDecl:
      typeStr
      self

-}
{-
   local variables for Decl.ParseErrDecl:
      typeStr
      self

-}
-- semantic domain
type T_Decl = (Int) ->
              (Bindings) ->
              ([HeliumMessage]) ->
              (FocusDoc) ->
              (Int) ->
              (LayoutMap) ->
              (Int) ->
              (Int) ->
              (Int) ->
              ([Int]) ->
              (([PathDoc],[PathDoc],[PathDoc])) ->
              (Int) ->
              ([(String, String)]) ->
              ([(PathDoc,String)]) ->
              (FiniteMap String (PathDoc, String)) ->
              (FiniteMap String (PathDoc, String)) ->
              ( (Int),(Binding),([(String,(PathDoc,String))]),(Presentation),(LayoutMap),(Int),(Int),(Presentation),(Presentation),(Presentation),(Decl),(Int),(Maybe String),(FiniteMap String (PathDoc, String)))
-- cata
sem_Decl :: (Decl) ->
            (T_Decl)
sem_Decl ((BoardDecl (_idD) (_idP0) (_idP1) (_board))) =
    (sem_Decl_BoardDecl (_idD) (_idP0) (_idP1) ((sem_Board (_board))))
sem_Decl ((Decl (_idD) (_idP0) (_idP1) (_idP2) (_idP3) (_expanded) (_autoLayout) (_ident) (_exp))) =
    (sem_Decl_Decl (_idD) (_idP0) (_idP1) (_idP2) (_idP3) ((sem_Bool_ (_expanded))) ((sem_Bool_ (_autoLayout))) ((sem_Ident (_ident))) ((sem_Exp (_exp))))
sem_Decl ((HoleDecl )) =
    (sem_Decl_HoleDecl )
sem_Decl ((PPPresentationDecl (_idD) (_idP0) (_idP1) (_pPPresentation))) =
    (sem_Decl_PPPresentationDecl (_idD) (_idP0) (_idP1) ((sem_PPPresentation (_pPPresentation))))
sem_Decl ((ParseErrDecl (_node) (_presentation))) =
    (sem_Decl_ParseErrDecl (_node) (_presentation))
sem_Decl_BoardDecl :: (IDD) ->
                      (IDP) ->
                      (IDP) ->
                      (T_Board) ->
                      (T_Decl)
sem_Decl_BoardDecl (idD_) (idP0_) (idP1_) (board_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcl :: (Binding)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Decl)
            _lhsOspaces :: (Int)
            _lhsOtypeStr :: (Maybe String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _boardIpIdC :: (Int)
            _boardIpres :: (Presentation)
            _boardIpresTree :: (Presentation)
            _boardIpresXML :: (Presentation)
            _boardIself :: (Board)
            _boardOfocusD :: (FocusDoc)
            _boardOix :: (Int)
            _boardOpIdC :: (Int)
            _boardOpath :: ([Int])
            ( _boardIpIdC,_boardIpres,_boardIpresTree,_boardIpresXML,_boardIself) =
                (board_ (_boardOfocusD) (_boardOix) (_boardOpIdC) (_boardOpath))
            -- "PresentationAG.ag"(line 730, column 18)
            (_typeStr@_) =
                Nothing
            -- "PresentationAG.ag"(line 917, column 19)
            (_lhsOdcl@_) =
                ("XXXXXX", ErrVal)
            -- "PresentationAG.ag"(line 998, column 7)
            (_lhsOpres@_) =
                loc (DeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [text' (mkIDP idP0_ _lhsIpIdC 0) "Chess: ", _boardIpres]
            -- "PresentationAG.ag"(line 1085, column 24)
            (_lhsOidsPres@_) =
                loc (BoardDeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ text "board;" ]
            -- "PresentationAG_Generated.ag"(line 239, column 15)
            (_lhsOpIdC@_) =
                _boardIpIdC
            -- "PresentationAG_Generated.ag"(line 238, column 15)
            (_boardOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 251, column 15)
            (_boardOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 662, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (BoardDeclNode _self _lhsIpath) _lhsIpath "BoardDecl" [ _boardIpresXML ]
            -- "PresentationAG_Generated.ag"(line 884, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (BoardDeclNode _self _lhsIpath) _lhsIpath "BoardDecl" [ _boardIpresTree ]
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                BoardDecl idD_ idP0_ idP1_ _boardIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOtypeStr@_) =
                _typeStr
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_boardOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_boardOix@_) =
                _lhsIix
        in  ( _lhsOcol,_lhsOdcl,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOtypeStr,_lhsOvarsInScopeAtFocus)
sem_Decl_Decl :: (IDD) ->
                 (IDP) ->
                 (IDP) ->
                 (IDP) ->
                 (IDP) ->
                 (T_Bool_) ->
                 (T_Bool_) ->
                 (T_Ident) ->
                 (T_Exp) ->
                 (T_Decl)
sem_Decl_Decl (idD_) (idP0_) (idP1_) (idP2_) (idP3_) (expanded_) (autoLayout_) (ident_) (exp_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcl :: (Binding)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Decl)
            _lhsOspaces :: (Int)
            _lhsOtypeStr :: (Maybe String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expandedIbool :: (Bool)
            _expandedIpIdC :: (Int)
            _expandedIpres :: (Presentation)
            _expandedIpresTree :: (Presentation)
            _expandedIpresXML :: (Presentation)
            _expandedIself :: (Bool_)
            _expandedOfocusD :: (FocusDoc)
            _expandedOix :: (Int)
            _expandedOpIdC :: (Int)
            _expandedOpath :: ([Int])
            _autoLayoutIbool :: (Bool)
            _autoLayoutIpIdC :: (Int)
            _autoLayoutIpres :: (Presentation)
            _autoLayoutIpresTree :: (Presentation)
            _autoLayoutIpresXML :: (Presentation)
            _autoLayoutIself :: (Bool_)
            _autoLayoutOfocusD :: (FocusDoc)
            _autoLayoutOix :: (Int)
            _autoLayoutOpIdC :: (Int)
            _autoLayoutOpath :: ([Int])
            _identIcol :: (Int)
            _identIfirstToken :: (IDP)
            _identIidsPres :: (Presentation)
            _identIlayoutMap :: (LayoutMap)
            _identInewlines :: (Int)
            _identIpIdC :: (Int)
            _identIpres :: (Presentation)
            _identIpresTree :: (Presentation)
            _identIpresXML :: (Presentation)
            _identIself :: (Ident)
            _identIspaces :: (Int)
            _identIstr :: (String)
            _identIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identOcol :: (Int)
            _identOfocusD :: (FocusDoc)
            _identOix :: (Int)
            _identOlayoutMap :: (LayoutMap)
            _identOlevel :: (Int)
            _identOnewlines :: (Int)
            _identOpIdC :: (Int)
            _identOpath :: ([Int])
            _identOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _identOspaces :: (Int)
            _identOvarsInScope :: (FiniteMap String (PathDoc, String))
            _identOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _expandedIbool,_expandedIpIdC,_expandedIpres,_expandedIpresTree,_expandedIpresXML,_expandedIself) =
                (expanded_ (_expandedOfocusD) (_expandedOix) (_expandedOpIdC) (_expandedOpath))
            ( _autoLayoutIbool,_autoLayoutIpIdC,_autoLayoutIpres,_autoLayoutIpresTree,_autoLayoutIpresXML,_autoLayoutIself) =
                (autoLayout_ (_autoLayoutOfocusD) (_autoLayoutOix) (_autoLayoutOpIdC) (_autoLayoutOpath))
            ( _identIcol,_identIfirstToken,_identIidsPres,_identIlayoutMap,_identInewlines,_identIpIdC,_identIpres,_identIpresTree,_identIpresXML,_identIself,_identIspaces,_identIstr,_identIvarsInScopeAtFocus) =
                (ident_ (_identOcol) (_identOfocusD) (_identOix) (_identOlayoutMap) (_identOlevel) (_identOnewlines) (_identOpIdC) (_identOpath) (_identOranges) (_identOspaces) (_identOvarsInScope) (_identOvarsInScopeAtFocus))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 182, column 7)
            (_lhsOpres@_) =
                loc (DeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $
                    (row' $
                       (if _lhsIlevel == 0
                        then let sigIDP    = mkIDP idP2_ _lhsIpIdC 2
                                 autoLStr = if _autoLayoutIbool then "             {auto layout}" else ""
                             in  case _typeStr of
                                   Nothing ->
                                      case _expIval of
                                              ErrVal -> [ StructuralP sigIDP $ row'
                                                           [text ("-- No value"++autoLStr)]
                                                             `withbgColor` lightGrey
                                                        ]
                                              v      -> [ StructuralP sigIDP $ row'
                                                           [text ("-- Value: " ++ show _expIval++autoLStr )]
                                                             `withbgColor` lightGrey
                                                        ]
                                   Just tpstr ->
                                     [  StructuralP sigIDP . row' $
                                          [ typeD NoIDP (tpstr)
                                          , text " "
                                          , case _expIval of
                                              ErrVal -> row' [text ("-- No value"++autoLStr)]
                                                                 `withbgColor` lightGrey
                                              v      -> row' [ text ("-- Value: " ++ show _expIval++autoLStr)]
                                                                 `withbgColor` lightGrey
                                          ]
                                     ]
                        else [empty])
                          ++
                             [ _identIpres, key (mkIDP idP0_ _lhsIpIdC 0) "="]
                          ++ (if _expandedIbool then
                                [ _expIpres,  sep (mkIDP idP1_ _lhsIpIdC 1) ";"
                                ] else [text " ", box (text "...") `withColor` black `withbgColor` yellow
                                                                   `withMouseDown` expand _lhsIpath _self])
                         ) `addPopupItems`  [ if _expandedIbool
                                              then ( "Collapse: "++strFromIdent _identIself, toggleExpanded _lhsIpath _self)
                                              else ( "Expand: "++strFromIdent _identIself, toggleExpanded _lhsIpath _self)]
                           `addPopupItems`  if _lhsIlevel == 0 then [ if _autoLayoutIbool
                                                                      then ( "Disable Auto Layout", toggleAutoLayout _lhsIpath _self)
                                                                      else ( "Enable Auto Layout", toggleAutoLayout _lhsIpath _self) ]
                                                               else []
            -- "PresentationAG.ag"(line 555, column 13)
            (_lhsOspaces@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 554, column 13)
            (_lhsOnewlines@_) =
                1
            -- "PresentationAG.ag"(line 553, column 13)
            (_lhsOcol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 552, column 13)
            (_expOspaces@_) =
                1
            -- "PresentationAG.ag"(line 551, column 13)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 550, column 13)
            (_expOcol@_) =
                _identIcol+2+1
            -- "PresentationAG.ag"(line 549, column 13)
            (_identOspaces@_) =
                _lhsIspaces
            -- "PresentationAG.ag"(line 548, column 13)
            (_identOnewlines@_) =
                _lhsInewlines
            -- "PresentationAG.ag"(line 547, column 13)
            (_identOcol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 546, column 13)
            (_identOlayoutMap@_) =
                addListToFM _lhsIlayoutMap [(idP0_, (0,1)), (idP1_, (0,0))]
            -- "PresentationAG.ag"(line 537, column 13)
            (_lhsOlayoutMap@_) =
                let lm = if _autoLayoutIbool || _lhsIlevel /= 0 then _expIlayoutMap else _lhsIlayoutMap
                in if idP2_ /= NoIDP || _lhsIlevel /= 0 then lm
                   else case lookupFM lm (_identIfirstToken) of
                          Just (nwln,sp) -> addListToFM lm [ (mkIDP idP2_ _lhsIpIdC 2,(nwln,sp))
                                                                       , (_identIfirstToken, (1,sp)) ]
                          _        -> addToFM lm (mkIDP idP2_ _lhsIpIdC 2) (1,0)
            -- "PresentationAG.ag"(line 727, column 18)
            (_typeStr@_) =
                case lookup (strFromIdent _identIself) _lhsItopLevelEnv of
                  Nothing -> Nothing
                  Just tp -> Just $ strFromIdent _identIself ++ " :: "++ tp
            -- "PresentationAG.ag"(line 760, column 7)
            (_lhsOdeclaredVars@_) =
                [(strFromIdent _identIself, (PathD (_lhsIpath++[2]), _expItype))]
            -- "PresentationAG.ag"(line 771, column 7)
            (_identOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 916, column 18)
            (_lhsOdcl@_) =
                (_identIstr, _expIval)
            -- "PresentationAG.ag"(line 1083, column 24)
            (_lhsOidsPres@_) =
                loc (DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ text "'", _identIidsPres, text "';" ]
            -- "PresentationAG_Generated.ag"(line 237, column 10)
            (_lhsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 236, column 10)
            (_autoLayoutOpIdC@_) =
                _expandedIpIdC
            -- "PresentationAG_Generated.ag"(line 235, column 10)
            (_identOpIdC@_) =
                _autoLayoutIpIdC
            -- "PresentationAG_Generated.ag"(line 234, column 10)
            (_expOpIdC@_) =
                _identIpIdC
            -- "PresentationAG_Generated.ag"(line 233, column 10)
            (_expandedOpIdC@_) =
                _lhsIpIdC + 4
            -- "PresentationAG_Generated.ag"(line 250, column 10)
            (_expOpath@_) =
                _lhsIpath++[3]
            -- "PresentationAG_Generated.ag"(line 249, column 10)
            (_identOpath@_) =
                _lhsIpath++[2]
            -- "PresentationAG_Generated.ag"(line 248, column 10)
            (_autoLayoutOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 247, column 10)
            (_expandedOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 660, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (DeclNode _self _lhsIpath) _lhsIpath "Decl" [ _expandedIpresXML, _autoLayoutIpresXML, _identIpresXML, _expIpresXML ]
            -- "PresentationAG_Generated.ag"(line 882, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (DeclNode _self _lhsIpath) _lhsIpath "Decl" [ _expandedIpresTree, _autoLayoutIpresTree, _identIpresTree, _expIpresTree ]
            -- self rule
            (_self@_) =
                Decl idD_ idP0_ idP1_ idP2_ idP3_ _expandedIself _autoLayoutIself _identIself _expIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (from local)
            (_lhsOtypeStr@_) =
                _typeStr
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expIvarsInScopeAtFocus
            -- copy rule (down)
            (_expandedOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expandedOix@_) =
                _lhsIix
            -- copy rule (down)
            (_autoLayoutOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_autoLayoutOix@_) =
                _lhsIix
            -- copy rule (down)
            (_identOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_identOix@_) =
                _lhsIix
            -- copy rule (down)
            (_identOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_identOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_identOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_expOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (chain)
            (_expOlayoutMap@_) =
                _identIlayoutMap
            -- copy rule (down)
            (_expOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_expOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_expOvarsInScopeAtFocus@_) =
                _identIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcl,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOtypeStr,_lhsOvarsInScopeAtFocus)
sem_Decl_HoleDecl :: (T_Decl)
sem_Decl_HoleDecl  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcl :: (Binding)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Decl)
            _lhsOspaces :: (Int)
            _lhsOtypeStr :: (Maybe String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 732, column 18)
            (_typeStr@_) =
                Nothing
            -- "PresentationAG.ag"(line 919, column 18)
            (_lhsOdcl@_) =
                ("XXXXXX", ErrVal)
            -- "PresentationAG.ag"(line 1089, column 24)
            (_lhsOidsPres@_) =
                presHole _lhsIfocusD "Decl" (HoleDeclNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 242, column 18)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Decl" (HoleDeclNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 665, column 18)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Decl" (HoleDeclNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 887, column 18)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Decl" (HoleDeclNode _self _lhsIpath) _lhsIpath
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                HoleDecl
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOtypeStr@_) =
                _typeStr
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcl,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOtypeStr,_lhsOvarsInScopeAtFocus)
sem_Decl_PPPresentationDecl :: (IDD) ->
                               (IDP) ->
                               (IDP) ->
                               (T_PPPresentation) ->
                               (T_Decl)
sem_Decl_PPPresentationDecl (idD_) (idP0_) (idP1_) (pPPresentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcl :: (Binding)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Decl)
            _lhsOspaces :: (Int)
            _lhsOtypeStr :: (Maybe String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _pPPresentationIpIdC :: (Int)
            _pPPresentationIpres :: (Presentation)
            _pPPresentationIpresTree :: (Presentation)
            _pPPresentationIpresXML :: (Presentation)
            _pPPresentationIself :: (PPPresentation)
            _pPPresentationIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _pPPresentationOfocusD :: (FocusDoc)
            _pPPresentationOix :: (Int)
            _pPPresentationOpIdC :: (Int)
            _pPPresentationOpath :: ([Int])
            _pPPresentationOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _pPPresentationOvarsInScope :: (FiniteMap String (PathDoc, String))
            _pPPresentationOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _pPPresentationIpIdC,_pPPresentationIpres,_pPPresentationIpresTree,_pPPresentationIpresXML,_pPPresentationIself,_pPPresentationIvarsInScopeAtFocus) =
                (pPPresentation_ (_pPPresentationOfocusD) (_pPPresentationOix) (_pPPresentationOpIdC) (_pPPresentationOpath) (_pPPresentationOranges) (_pPPresentationOvarsInScope) (_pPPresentationOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 731, column 27)
            (_typeStr@_) =
                Nothing
            -- "PresentationAG.ag"(line 918, column 24)
            (_lhsOdcl@_) =
                ("XXXXXX", ErrVal)
            -- "PresentationAG.ag"(line 1087, column 24)
            (_lhsOidsPres@_) =
                loc (PPPresentationDeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ text "slides;" ]
            -- "PresentationAG.ag"(line 1144, column 7)
            (_lhsOpres@_) =
                loc (PPPresentationDeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ text' (mkIDP idP0_ _lhsIpIdC 0) "PPT: ", _pPPresentationIpres ]
            -- "PresentationAG_Generated.ag"(line 241, column 24)
            (_lhsOpIdC@_) =
                _pPPresentationIpIdC
            -- "PresentationAG_Generated.ag"(line 240, column 24)
            (_pPPresentationOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 252, column 24)
            (_pPPresentationOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 664, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (PPPresentationDeclNode _self _lhsIpath) _lhsIpath "PPPresentationDecl" [ _pPPresentationIpresXML ]
            -- "PresentationAG_Generated.ag"(line 886, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (PPPresentationDeclNode _self _lhsIpath) _lhsIpath "PPPresentationDecl" [ _pPPresentationIpresTree ]
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                PPPresentationDecl idD_ idP0_ idP1_ _pPPresentationIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOtypeStr@_) =
                _typeStr
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _pPPresentationIvarsInScopeAtFocus
            -- copy rule (down)
            (_pPPresentationOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_pPPresentationOix@_) =
                _lhsIix
            -- copy rule (down)
            (_pPPresentationOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_pPPresentationOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_pPPresentationOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcl,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOtypeStr,_lhsOvarsInScopeAtFocus)
sem_Decl_ParseErrDecl :: (Node) ->
                         (Presentation) ->
                         (T_Decl)
sem_Decl_ParseErrDecl (node_) (presentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcl :: (Binding)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Decl)
            _lhsOspaces :: (Int)
            _lhsOtypeStr :: (Maybe String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 733, column 18)
            (_typeStr@_) =
                Nothing
            -- "PresentationAG.ag"(line 920, column 18)
            (_lhsOdcl@_) =
                ("XXXXXX", ErrVal)
            -- "PresentationAG.ag"(line 1090, column 24)
            (_lhsOidsPres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 243, column 18)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 666, column 18)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 888, column 18)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                ParseErrDecl node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOtypeStr@_) =
                _typeStr
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcl,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOtypeStr,_lhsOvarsInScopeAtFocus)
-- EnrichedDoc -------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc

   chained attributes:
      layoutMap            : LayoutMap
      pIdC                 : Int

   synthesised attributes:
      pres                 : Presentation
      self                 : SELF

-}
{-
   local variables for EnrichedDoc.HoleEnrichedDoc:
      self

-}
{-
   local variables for EnrichedDoc.ParseErrEnrichedDoc:
      self

-}
{-
   local variables for EnrichedDoc.RootEnr:
      topLevelEnv
      typeEnv
      errs
      varsInScope
      self

-}
-- semantic domain
type T_EnrichedDoc = (FocusDoc) ->
                     (LayoutMap) ->
                     (Int) ->
                     ( (LayoutMap),(Int),(Presentation),(EnrichedDoc))
-- cata
sem_EnrichedDoc :: (EnrichedDoc) ->
                   (T_EnrichedDoc)
sem_EnrichedDoc ((HoleEnrichedDoc )) =
    (sem_EnrichedDoc_HoleEnrichedDoc )
sem_EnrichedDoc ((ParseErrEnrichedDoc (_node) (_presentation))) =
    (sem_EnrichedDoc_ParseErrEnrichedDoc (_node) (_presentation))
sem_EnrichedDoc ((RootEnr (_id) (_idP) (_idListDecls) (_decls) (_heliumTypeInfo) (_document))) =
    (sem_EnrichedDoc_RootEnr (_id) (_idP) ((sem_List_Decl (_idListDecls))) ((sem_List_Decl (_decls))) (_heliumTypeInfo) (_document))
sem_EnrichedDoc_HoleEnrichedDoc :: (T_EnrichedDoc)
sem_EnrichedDoc_HoleEnrichedDoc  =
    \ _lhsIfocusD
      _lhsIlayoutMap
      _lhsIpIdC ->
        let _lhsOlayoutMap :: (LayoutMap)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOself :: (EnrichedDoc)
            -- "PresentationAG_Generated.ag"(line 22, column 25)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "EnrichedDoc" (HoleEnrichedDocNode _self []) []
            -- self rule
            (_self@_) =
                HoleEnrichedDoc
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOlayoutMap,_lhsOpIdC,_lhsOpres,_lhsOself)
sem_EnrichedDoc_ParseErrEnrichedDoc :: (Node) ->
                                       (Presentation) ->
                                       (T_EnrichedDoc)
sem_EnrichedDoc_ParseErrEnrichedDoc (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIlayoutMap
      _lhsIpIdC ->
        let _lhsOlayoutMap :: (LayoutMap)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOself :: (EnrichedDoc)
            -- "PresentationAG_Generated.ag"(line 23, column 25)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrEnrichedDoc node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOlayoutMap,_lhsOpIdC,_lhsOpres,_lhsOself)
sem_EnrichedDoc_RootEnr :: (IDD) ->
                           (IDP) ->
                           (T_List_Decl) ->
                           (T_List_Decl) ->
                           (HeliumTypeInfo) ->
                           (Document) ->
                           (T_EnrichedDoc)
sem_EnrichedDoc_RootEnr (id_) (idP_) (idListDecls_) (decls_) (heliumTypeInfo_) (document_) =
    \ _lhsIfocusD
      _lhsIlayoutMap
      _lhsIpIdC ->
        let _lhsOlayoutMap :: (LayoutMap)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOself :: (EnrichedDoc)
            _idListDeclsIcol :: (Int)
            _idListDeclsIdcls :: (Bindings)
            _idListDeclsIdeclaredVars :: ([(String,(PathDoc,String))])
            _idListDeclsIidsPres :: (Presentation)
            _idListDeclsIlayoutMap :: (LayoutMap)
            _idListDeclsInewlines :: (Int)
            _idListDeclsIpIdC :: (Int)
            _idListDeclsIparseErrs :: ([String])
            _idListDeclsIpres :: (Presentation)
            _idListDeclsIpresTree :: (Presentation)
            _idListDeclsIpresXML :: (Presentation)
            _idListDeclsIpress :: ([Presentation])
            _idListDeclsIself :: (List_Decl)
            _idListDeclsIspaces :: (Int)
            _idListDeclsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _idListDeclsOcol :: (Int)
            _idListDeclsOenv :: (Bindings)
            _idListDeclsOerrs :: ([HeliumMessage])
            _idListDeclsOfocusD :: (FocusDoc)
            _idListDeclsOlayoutMap :: (LayoutMap)
            _idListDeclsOlevel :: (Int)
            _idListDeclsOnewlines :: (Int)
            _idListDeclsOpIdC :: (Int)
            _idListDeclsOpath :: ([Int])
            _idListDeclsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _idListDeclsOspaces :: (Int)
            _idListDeclsOtopLevelEnv :: ([(String, String)])
            _idListDeclsOtypeEnv :: ([(PathDoc,String)])
            _idListDeclsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _idListDeclsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _declsIcol :: (Int)
            _declsIdcls :: (Bindings)
            _declsIdeclaredVars :: ([(String,(PathDoc,String))])
            _declsIidsPres :: (Presentation)
            _declsIlayoutMap :: (LayoutMap)
            _declsInewlines :: (Int)
            _declsIpIdC :: (Int)
            _declsIparseErrs :: ([String])
            _declsIpres :: (Presentation)
            _declsIpresTree :: (Presentation)
            _declsIpresXML :: (Presentation)
            _declsIpress :: ([Presentation])
            _declsIself :: (List_Decl)
            _declsIspaces :: (Int)
            _declsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _declsOcol :: (Int)
            _declsOenv :: (Bindings)
            _declsOerrs :: ([HeliumMessage])
            _declsOfocusD :: (FocusDoc)
            _declsOlayoutMap :: (LayoutMap)
            _declsOlevel :: (Int)
            _declsOnewlines :: (Int)
            _declsOpIdC :: (Int)
            _declsOpath :: ([Int])
            _declsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _declsOspaces :: (Int)
            _declsOtopLevelEnv :: ([(String, String)])
            _declsOtypeEnv :: ([(PathDoc,String)])
            _declsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _declsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _idListDeclsIcol,_idListDeclsIdcls,_idListDeclsIdeclaredVars,_idListDeclsIidsPres,_idListDeclsIlayoutMap,_idListDeclsInewlines,_idListDeclsIpIdC,_idListDeclsIparseErrs,_idListDeclsIpres,_idListDeclsIpresTree,_idListDeclsIpresXML,_idListDeclsIpress,_idListDeclsIself,_idListDeclsIspaces,_idListDeclsIvarsInScopeAtFocus) =
                (idListDecls_ (_idListDeclsOcol) (_idListDeclsOenv) (_idListDeclsOerrs) (_idListDeclsOfocusD) (_idListDeclsOlayoutMap) (_idListDeclsOlevel) (_idListDeclsOnewlines) (_idListDeclsOpIdC) (_idListDeclsOpath) (_idListDeclsOranges) (_idListDeclsOspaces) (_idListDeclsOtopLevelEnv) (_idListDeclsOtypeEnv) (_idListDeclsOvarsInScope) (_idListDeclsOvarsInScopeAtFocus))
            ( _declsIcol,_declsIdcls,_declsIdeclaredVars,_declsIidsPres,_declsIlayoutMap,_declsInewlines,_declsIpIdC,_declsIparseErrs,_declsIpres,_declsIpresTree,_declsIpresXML,_declsIpress,_declsIself,_declsIspaces,_declsIvarsInScopeAtFocus) =
                (decls_ (_declsOcol) (_declsOenv) (_declsOerrs) (_declsOfocusD) (_declsOlayoutMap) (_declsOlevel) (_declsOnewlines) (_declsOpIdC) (_declsOpath) (_declsOranges) (_declsOspaces) (_declsOtopLevelEnv) (_declsOtypeEnv) (_declsOvarsInScope) (_declsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 90, column 7)
            (_topLevelEnv@_) =
                let (errs, typeEnv, topLevelEnv) = heliumTypeInfo_ in typeEnv
            -- "PresentationAG.ag"(line 89, column 7)
            (_typeEnv@_) =
                let (errs, typeEnv, topLevelEnv) = heliumTypeInfo_ in topLevelEnv
            -- "PresentationAG.ag"(line 88, column 7)
            (_errs@_) =
                let (errs, typeEnv, topLevelEnv) = heliumTypeInfo_ in errs
            -- "PresentationAG.ag"(line 87, column 7)
            (_declsOlevel@_) =
                0
            -- "PresentationAG.ag"(line 139, column 7)
            (_declsOranges@_) =
                (\(l1,l2,l3)->(concat l1, concat l2, concat l3)) . unzip3
                $ map pthFrmMsg _errs
            -- "PresentationAG.ag"(line 99, column 7)
            (_lhsOpres@_) =
                loc (RootDocNode document_ []) $
                loc (RootEnrNode _self []) $ structural $
                  col [ row' [ hSpace 3
                             , text $ "Document focus: "++show _lhsIfocusD
                             , typeD NoIDP $ ( case lookup _lhsIfocusD _typeEnv of
                                                Nothing -> ""
                                                Just tp -> " :: "++tp)
                                              ++ replicate 80 ' '
                             ]
                      , vSpace 4
                      , hLine
                      , row' [ hSpace 3
                             , text "Top level identifiers:"
                             , row[ text " ", _idListDeclsIidsPres] `withFontSize` 10
                             ]
                      , vSpace 4
                      , row' [ hSpace 3, key NoIDP "module ", bold $ text "Main" , key NoIDP " where"]
                      , row' [ hSpace 3, _declsIpres ]
                      , vSpace 10
                      , hLine
                      , vSpace 4
                      , let errs = if null _declsIparseErrs then _errs else map toMessage _declsIparseErrs
                        in  col' (map presMessage errs ++ [empty]) `withFontSize` 12
                      , vSpace 10
                      , hLine
                      , vSpace 4
                      , text "Variables in scope:"
                      , col [ typeD NoIDP (var++" :: "++tpStr) `link` pth
                            | (var,(pth,tpStr)) <- fmToList _declsIvarsInScopeAtFocus ]
                      ]
                    `withFont'` ("Courier New",14)
            -- "PresentationAG.ag"(line 528, column 13)
            (_lhsOlayoutMap@_) =
                _declsIlayoutMap
            -- "PresentationAG.ag"(line 527, column 13)
            (_declsOspaces@_) =
                0
            -- "PresentationAG.ag"(line 526, column 13)
            (_declsOnewlines@_) =
                1
            -- "PresentationAG.ag"(line 525, column 13)
            (_declsOcol@_) =
                0
            -- "PresentationAG.ag"(line 524, column 13)
            (_declsOlayoutMap@_) =
                _lhsIlayoutMap
            -- "PresentationAG.ag"(line 747, column 7)
            (_varsInScope@_) =
                listToFM _declsIdeclaredVars
            -- "PresentationAG.ag"(line 767, column 7)
            (_declsOvarsInScopeAtFocus@_) =
                emptyFM
            -- "PresentationAG.ag"(line 903, column 7)
            (_declsOenv@_) =
                _declsIdcls
            -- "PresentationAG.ag"(line 1112, column 13)
            (_idListDeclsOranges@_) =
                ([],[],[])
            -- "PresentationAG.ag"(line 1110, column 13)
            (_idListDeclsOvarsInScopeAtFocus@_) =
                emptyFM
            -- "PresentationAG.ag"(line 1109, column 13)
            (_idListDeclsOenv@_) =
                []
            -- "PresentationAG.ag"(line 1108, column 13)
            (_idListDeclsOerrs@_) =
                []
            -- "PresentationAG.ag"(line 1106, column 13)
            (_idListDeclsOlevel@_) =
                0
            -- "PresentationAG.ag"(line 1104, column 13)
            (_idListDeclsOspaces@_) =
                0
            -- "PresentationAG.ag"(line 1103, column 13)
            (_idListDeclsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 1102, column 13)
            (_idListDeclsOcol@_) =
                0
            -- "PresentationAG_Generated.ag"(line 21, column 13)
            (_lhsOpIdC@_) =
                _declsIpIdC
            -- "PresentationAG_Generated.ag"(line 20, column 13)
            (_declsOpIdC@_) =
                _idListDeclsIpIdC
            -- "PresentationAG_Generated.ag"(line 19, column 13)
            (_idListDeclsOpIdC@_) =
                _lhsIpIdC + 4
            -- "PresentationAG_Generated.ag"(line 28, column 13)
            (_declsOpath@_) =
                []
            -- "PresentationAG_Generated.ag"(line 27, column 13)
            (_idListDeclsOpath@_) =
                []
            -- self rule
            (_self@_) =
                RootEnr id_ idP_ _idListDeclsIself _declsIself heliumTypeInfo_ document_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (down)
            (_idListDeclsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_idListDeclsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (from local)
            (_idListDeclsOtopLevelEnv@_) =
                _topLevelEnv
            -- copy rule (from local)
            (_idListDeclsOtypeEnv@_) =
                _typeEnv
            -- copy rule (from local)
            (_idListDeclsOvarsInScope@_) =
                _varsInScope
            -- copy rule (from local)
            (_declsOerrs@_) =
                _errs
            -- copy rule (down)
            (_declsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (from local)
            (_declsOtopLevelEnv@_) =
                _topLevelEnv
            -- copy rule (from local)
            (_declsOtypeEnv@_) =
                _typeEnv
            -- copy rule (from local)
            (_declsOvarsInScope@_) =
                _varsInScope
        in  ( _lhsOlayoutMap,_lhsOpIdC,_lhsOpres,_lhsOself)
-- Exp ---------------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      lamBody              : ([(String, Exp)] -> Exp)
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF
      substitute           : ( [(String, Exp)] -> Exp )
      type                 : String
      val                  : Value

-}
{-
   local variables for Exp.AppExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.BoolExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.CaseExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.DivExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.HoleExp:
      type
      substitute
      self

-}
{-
   local variables for Exp.IdentExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.IfExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.IntExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.LamExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.LetExp:
      varsInScope
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.ListExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.ParenExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.ParseErrExp:
      type
      substitute
      self

-}
{-
   local variables for Exp.PlusExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.PowerExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.ProductExp:
      type
      reductionEdit
      substitute
      self

-}
{-
   local variables for Exp.TimesExp:
      type
      reductionEdit
      substitute
      self

-}
-- semantic domain
type T_Exp = (Int) ->
             (Bindings) ->
             ([HeliumMessage]) ->
             (FocusDoc) ->
             (Int) ->
             (LayoutMap) ->
             (Int) ->
             (Int) ->
             (Int) ->
             ([Int]) ->
             (([PathDoc],[PathDoc],[PathDoc])) ->
             (Int) ->
             ([(String, String)]) ->
             ([(PathDoc,String)]) ->
             (FiniteMap String (PathDoc, String)) ->
             (FiniteMap String (PathDoc, String)) ->
             ( (Int),(([(String, Exp)] -> Exp)),(LayoutMap),(Int),(Int),(Presentation),(Presentation),(Presentation),(Exp),(Int),(( [(String, Exp)] -> Exp )),(String),(Value),(FiniteMap String (PathDoc, String)))
-- cata
sem_Exp :: (Exp) ->
           (T_Exp)
sem_Exp ((AppExp (_idD) (_exp1) (_exp2))) =
    (sem_Exp_AppExp (_idD) ((sem_Exp (_exp1))) ((sem_Exp (_exp2))))
sem_Exp ((BoolExp (_idD) (_idP0) (_bool_))) =
    (sem_Exp_BoolExp (_idD) (_idP0) ((sem_Bool_ (_bool_))))
sem_Exp ((CaseExp (_idD) (_idP0) (_idP1) (_exp) (_alts))) =
    (sem_Exp_CaseExp (_idD) (_idP0) (_idP1) ((sem_Exp (_exp))) ((sem_List_Alt (_alts))))
sem_Exp ((DivExp (_idD) (_idP0) (_exp1) (_exp2))) =
    (sem_Exp_DivExp (_idD) (_idP0) ((sem_Exp (_exp1))) ((sem_Exp (_exp2))))
sem_Exp ((HoleExp )) =
    (sem_Exp_HoleExp )
sem_Exp ((IdentExp (_idd) (_ident))) =
    (sem_Exp_IdentExp (_idd) ((sem_Ident (_ident))))
sem_Exp ((IfExp (_idD) (_idP0) (_idP1) (_idP2) (_exp1) (_exp2) (_exp3))) =
    (sem_Exp_IfExp (_idD) (_idP0) (_idP1) (_idP2) ((sem_Exp (_exp1))) ((sem_Exp (_exp2))) ((sem_Exp (_exp3))))
sem_Exp ((IntExp (_idD) (_idP0) (_int_))) =
    (sem_Exp_IntExp (_idD) (_idP0) ((sem_Int_ (_int_))))
sem_Exp ((LamExp (_idD) (_idP0) (_idP1) (_ident) (_exp))) =
    (sem_Exp_LamExp (_idD) (_idP0) (_idP1) ((sem_Ident (_ident))) ((sem_Exp (_exp))))
sem_Exp ((LetExp (_idD) (_idP0) (_idP1) (_decls) (_exp))) =
    (sem_Exp_LetExp (_idD) (_idP0) (_idP1) ((sem_List_Decl (_decls))) ((sem_Exp (_exp))))
sem_Exp ((ListExp (_idD) (_idP0) (_idP1) (_ids) (_exps))) =
    (sem_Exp_ListExp (_idD) (_idP0) (_idP1) (_ids) ((sem_List_Exp (_exps))))
sem_Exp ((ParenExp (_idD) (_idP0) (_idP1) (_exp))) =
    (sem_Exp_ParenExp (_idD) (_idP0) (_idP1) ((sem_Exp (_exp))))
sem_Exp ((ParseErrExp (_node) (_presentation))) =
    (sem_Exp_ParseErrExp (_node) (_presentation))
sem_Exp ((PlusExp (_idD) (_idP0) (_exp1) (_exp2))) =
    (sem_Exp_PlusExp (_idD) (_idP0) ((sem_Exp (_exp1))) ((sem_Exp (_exp2))))
sem_Exp ((PowerExp (_idD) (_idP0) (_exp1) (_exp2))) =
    (sem_Exp_PowerExp (_idD) (_idP0) ((sem_Exp (_exp1))) ((sem_Exp (_exp2))))
sem_Exp ((ProductExp (_idD) (_idP0) (_idP1) (_ids) (_exps))) =
    (sem_Exp_ProductExp (_idD) (_idP0) (_idP1) (_ids) ((sem_List_Exp (_exps))))
sem_Exp ((TimesExp (_idD) (_idP0) (_exp1) (_exp2))) =
    (sem_Exp_TimesExp (_idD) (_idP0) ((sem_Exp (_exp1))) ((sem_Exp (_exp2))))
sem_Exp_AppExp :: (IDD) ->
                  (T_Exp) ->
                  (T_Exp) ->
                  (T_Exp)
sem_Exp_AppExp (idD_) (exp1_) (exp2_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Icol :: (Int)
            _exp1IlamBody :: (([(String, Exp)] -> Exp))
            _exp1IlayoutMap :: (LayoutMap)
            _exp1Inewlines :: (Int)
            _exp1IpIdC :: (Int)
            _exp1Ipres :: (Presentation)
            _exp1IpresTree :: (Presentation)
            _exp1IpresXML :: (Presentation)
            _exp1Iself :: (Exp)
            _exp1Ispaces :: (Int)
            _exp1Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp1Itype :: (String)
            _exp1Ival :: (Value)
            _exp1IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Ocol :: (Int)
            _exp1Oenv :: (Bindings)
            _exp1Oerrs :: ([HeliumMessage])
            _exp1OfocusD :: (FocusDoc)
            _exp1Oix :: (Int)
            _exp1OlayoutMap :: (LayoutMap)
            _exp1Olevel :: (Int)
            _exp1Onewlines :: (Int)
            _exp1OpIdC :: (Int)
            _exp1Opath :: ([Int])
            _exp1Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp1Ospaces :: (Int)
            _exp1OtopLevelEnv :: ([(String, String)])
            _exp1OtypeEnv :: ([(PathDoc,String)])
            _exp1OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp1OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Icol :: (Int)
            _exp2IlamBody :: (([(String, Exp)] -> Exp))
            _exp2IlayoutMap :: (LayoutMap)
            _exp2Inewlines :: (Int)
            _exp2IpIdC :: (Int)
            _exp2Ipres :: (Presentation)
            _exp2IpresTree :: (Presentation)
            _exp2IpresXML :: (Presentation)
            _exp2Iself :: (Exp)
            _exp2Ispaces :: (Int)
            _exp2Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp2Itype :: (String)
            _exp2Ival :: (Value)
            _exp2IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Ocol :: (Int)
            _exp2Oenv :: (Bindings)
            _exp2Oerrs :: ([HeliumMessage])
            _exp2OfocusD :: (FocusDoc)
            _exp2Oix :: (Int)
            _exp2OlayoutMap :: (LayoutMap)
            _exp2Olevel :: (Int)
            _exp2Onewlines :: (Int)
            _exp2OpIdC :: (Int)
            _exp2Opath :: ([Int])
            _exp2Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp2Ospaces :: (Int)
            _exp2OtopLevelEnv :: ([(String, String)])
            _exp2OtypeEnv :: ([(PathDoc,String)])
            _exp2OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp2OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _exp1Icol,_exp1IlamBody,_exp1IlayoutMap,_exp1Inewlines,_exp1IpIdC,_exp1Ipres,_exp1IpresTree,_exp1IpresXML,_exp1Iself,_exp1Ispaces,_exp1Isubstitute,_exp1Itype,_exp1Ival,_exp1IvarsInScopeAtFocus) =
                (exp1_ (_exp1Ocol) (_exp1Oenv) (_exp1Oerrs) (_exp1OfocusD) (_exp1Oix) (_exp1OlayoutMap) (_exp1Olevel) (_exp1Onewlines) (_exp1OpIdC) (_exp1Opath) (_exp1Oranges) (_exp1Ospaces) (_exp1OtopLevelEnv) (_exp1OtypeEnv) (_exp1OvarsInScope) (_exp1OvarsInScopeAtFocus))
            ( _exp2Icol,_exp2IlamBody,_exp2IlayoutMap,_exp2Inewlines,_exp2IpIdC,_exp2Ipres,_exp2IpresTree,_exp2IpresXML,_exp2Iself,_exp2Ispaces,_exp2Isubstitute,_exp2Itype,_exp2Ival,_exp2IvarsInScopeAtFocus) =
                (exp2_ (_exp2Ocol) (_exp2Oenv) (_exp2Oerrs) (_exp2OfocusD) (_exp2Oix) (_exp2OlayoutMap) (_exp2Olevel) (_exp2Onewlines) (_exp2OpIdC) (_exp2Opath) (_exp2Oranges) (_exp2Ospaces) (_exp2OtopLevelEnv) (_exp2OtypeEnv) (_exp2OvarsInScope) (_exp2OvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 289, column 7)
            (_lhsOpres@_) =
                loc (AppExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [_exp1Ipres, _exp2Ipres]
            -- "PresentationAG.ag"(line 614, column 13)
            (_lhsOcol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 613, column 13)
            (_exp2Ospaces@_) =
                1
            -- "PresentationAG.ag"(line 612, column 13)
            (_exp2Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 611, column 13)
            (_exp2Ocol@_) =
                _exp1Icol+1
            -- "PresentationAG.ag"(line 610, column 13)
            (_exp1OlayoutMap@_) =
                _lhsIlayoutMap
            -- "PresentationAG.ag"(line 795, column 7)
            (_exp1OvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 836, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 943, column 17)
            (_lhsOval@_) =
                case _exp1Ival of LamVal f -> f _exp2Ival
                                  _        -> ErrVal
            -- "PresentationAG_Generated.ag"(line 288, column 12)
            (_lhsOpIdC@_) =
                _exp2IpIdC
            -- "PresentationAG_Generated.ag"(line 287, column 12)
            (_exp2OpIdC@_) =
                _exp1IpIdC
            -- "PresentationAG_Generated.ag"(line 286, column 12)
            (_exp1OpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 325, column 12)
            (_exp2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 324, column 12)
            (_exp1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 690, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (AppExpNode _self _lhsIpath) _lhsIpath "AppExp" [ _exp1IpresXML, _exp2IpresXML ]
            -- "PresentationAG_Generated.ag"(line 912, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (AppExpNode _self _lhsIpath) _lhsIpath "AppExp" [ _exp1IpresTree, _exp2IpresTree ]
            -- "LambdaReduce.ag"(line 70, column 7)
            (_reductionEdit@_) =
                case removeParens _exp1Iself of
                        LamExp _ _ _ ident exp -> [ ("Beta reduce",
                                                     pasteExp _lhsIpath
                                                              (ensureParens (_exp1IlamBody [(strFromIdent ident, _exp2Iself)] ))
                                                    )
                                                  ]
                        _                      -> []
            -- "LambdaReduce.ag"(line 132, column 7)
            (_substitute@_) =
                \substs -> AppExp idD_ (_exp1Isubstitute substs) (_exp2Isubstitute substs)
            -- "LambdaReduce.ag"(line 172, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                AppExp idD_ _exp1Iself _exp2Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _exp2IlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _exp2Inewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _exp2Ispaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _exp2IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp1Ocol@_) =
                _lhsIcol
            -- copy rule (down)
            (_exp1Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp1Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp1Oix@_) =
                _lhsIix
            -- copy rule (down)
            (_exp1Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp1Onewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_exp1Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp1Ospaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_exp1OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp1OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp1OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_exp2Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp2Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp2Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp2OlayoutMap@_) =
                _exp1IlayoutMap
            -- copy rule (down)
            (_exp2Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp2Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp2OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp2OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp2OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp2OvarsInScopeAtFocus@_) =
                _exp1IvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_BoolExp :: (IDD) ->
                   (IDP) ->
                   (T_Bool_) ->
                   (T_Exp)
sem_Exp_BoolExp (idD_) (idP0_) (bool__) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _bool_Ibool :: (Bool)
            _bool_IpIdC :: (Int)
            _bool_Ipres :: (Presentation)
            _bool_IpresTree :: (Presentation)
            _bool_IpresXML :: (Presentation)
            _bool_Iself :: (Bool_)
            _bool_OfocusD :: (FocusDoc)
            _bool_Oix :: (Int)
            _bool_OpIdC :: (Int)
            _bool_Opath :: ([Int])
            ( _bool_Ibool,_bool_IpIdC,_bool_Ipres,_bool_IpresTree,_bool_IpresXML,_bool_Iself) =
                (bool__ (_bool_OfocusD) (_bool_Oix) (_bool_OpIdC) (_bool_Opath))
            -- "PresentationAG.ag"(line 266, column 7)
            (_lhsOpres@_) =
                loc (BoolExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [cons (mkIDP idP0_ _lhsIpIdC 0) "", _bool_Ipres]
            -- "PresentationAG.ag"(line 599, column 13)
            (_lhsOlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (_lhsInewlines,_lhsIspaces)
            -- "PresentationAG.ag"(line 789, column 7)
            (_lhsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 830, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 936, column 17)
            (_lhsOval@_) =
                BoolVal _bool_Ibool
            -- "PresentationAG_Generated.ag"(line 280, column 13)
            (_lhsOpIdC@_) =
                _bool_IpIdC
            -- "PresentationAG_Generated.ag"(line 279, column 13)
            (_bool_OpIdC@_) =
                _lhsIpIdC + 1
            -- "PresentationAG_Generated.ag"(line 320, column 13)
            (_bool_Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 684, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (BoolExpNode _self _lhsIpath) _lhsIpath "BoolExp" [ _bool_IpresXML ]
            -- "PresentationAG_Generated.ag"(line 906, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (BoolExpNode _self _lhsIpath) _lhsIpath "BoolExp" [ _bool_IpresTree ]
            -- "LambdaReduce.ag"(line 64, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 124, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 166, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                BoolExp idD_ idP0_ _bool_Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (down)
            (_bool_OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_bool_Oix@_) =
                _lhsIix
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_CaseExp :: (IDD) ->
                   (IDP) ->
                   (IDP) ->
                   (T_Exp) ->
                   (T_List_Alt) ->
                   (T_Exp)
sem_Exp_CaseExp (idD_) (idP0_) (idP1_) (exp_) (alts_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _altsIalts :: (Bindings)
            _altsIcol :: (Int)
            _altsIlayoutMap :: (LayoutMap)
            _altsImaxLHSLength :: (Int)
            _altsInewlines :: (Int)
            _altsIpIdC :: (Int)
            _altsIpresTree :: (Presentation)
            _altsIpresXML :: (Presentation)
            _altsIpress :: ([Presentation])
            _altsIself :: (List_Alt)
            _altsIspaces :: (Int)
            _altsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _altsOcol :: (Int)
            _altsOenv :: (Bindings)
            _altsOerrs :: ([HeliumMessage])
            _altsOfocusD :: (FocusDoc)
            _altsOlayoutMap :: (LayoutMap)
            _altsOlevel :: (Int)
            _altsOnewlines :: (Int)
            _altsOpIdC :: (Int)
            _altsOpath :: ([Int])
            _altsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _altsOspaces :: (Int)
            _altsOtopLevelEnv :: ([(String, String)])
            _altsOtotalMaxLHSLength :: (Int)
            _altsOtypeEnv :: ([(PathDoc,String)])
            _altsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _altsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            ( _altsIalts,_altsIcol,_altsIlayoutMap,_altsImaxLHSLength,_altsInewlines,_altsIpIdC,_altsIpresTree,_altsIpresXML,_altsIpress,_altsIself,_altsIspaces,_altsIvarsInScopeAtFocus) =
                (alts_ (_altsOcol) (_altsOenv) (_altsOerrs) (_altsOfocusD) (_altsOlayoutMap) (_altsOlevel) (_altsOnewlines) (_altsOpIdC) (_altsOpath) (_altsOranges) (_altsOspaces) (_altsOtopLevelEnv) (_altsOtotalMaxLHSLength) (_altsOtypeEnv) (_altsOvarsInScope) (_altsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 294, column 7)
            (_lhsOpres@_) =
                loc (CaseExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [ key (mkIDP idP0_ _lhsIpIdC 0) "case"
                       , _expIpres
                       , key (mkIDP idP1_ _lhsIpIdC 1) "of"
                       , loc (List_AltNode _altsIself []                ) $ parsing $ presentFocus _lhsIfocusD []                $ row _altsIpress
                       ]
            -- "PresentationAG.ag"(line 625, column 13)
            (_altsOtotalMaxLHSLength@_) =
                _altsImaxLHSLength
            -- "PresentationAG.ag"(line 624, column 13)
            (_lhsOcol@_) =
                _altsIcol
            -- "PresentationAG.ag"(line 623, column 13)
            (_altsOspaces@_) =
                _lhsIcol + 2
            -- "PresentationAG.ag"(line 622, column 13)
            (_altsOnewlines@_) =
                1
            -- "PresentationAG.ag"(line 621, column 13)
            (_altsOcol@_) =
                _lhsIcol + 2
            -- "PresentationAG.ag"(line 620, column 13)
            (_expOspaces@_) =
                1
            -- "PresentationAG.ag"(line 619, column 13)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 618, column 13)
            (_expOcol@_) =
                _lhsIcol + 5
            -- "PresentationAG.ag"(line 615, column 13)
            (_expOlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                    [ (idP0_, (_lhsInewlines,_lhsIspaces))
                    , (idP1_, (0,1)) ]
            -- "PresentationAG.ag"(line 797, column 7)
            (_altsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 838, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 946, column 17)
            (_lhsOval@_) =
                case lookup "a" _altsIalts of {Just v -> v; Nothing -> ErrVal}
            -- "PresentationAG_Generated.ag"(line 291, column 13)
            (_lhsOpIdC@_) =
                _altsIpIdC
            -- "PresentationAG_Generated.ag"(line 290, column 13)
            (_altsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 289, column 13)
            (_expOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 327, column 13)
            (_altsOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 326, column 13)
            (_expOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 692, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (CaseExpNode _self _lhsIpath) _lhsIpath "CaseExp" [ _expIpresXML, _altsIpresXML ]
            -- "PresentationAG_Generated.ag"(line 914, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (CaseExpNode _self _lhsIpath) _lhsIpath "CaseExp" [ _expIpresTree, _altsIpresTree ]
            -- "LambdaReduce.ag"(line 78, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 134, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 174, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                CaseExp idD_ idP0_ idP1_ _expIself _altsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _altsIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _altsInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _altsIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _altsIvarsInScopeAtFocus
            -- copy rule (down)
            (_expOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (down)
            (_expOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_expOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_expOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_altsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_altsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_altsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (chain)
            (_altsOlayoutMap@_) =
                _expIlayoutMap
            -- copy rule (down)
            (_altsOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_altsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_altsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_altsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_altsOvarsInScope@_) =
                _lhsIvarsInScope
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_DivExp :: (IDD) ->
                  (IDP) ->
                  (T_Exp) ->
                  (T_Exp) ->
                  (T_Exp)
sem_Exp_DivExp (idD_) (idP0_) (exp1_) (exp2_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Icol :: (Int)
            _exp1IlamBody :: (([(String, Exp)] -> Exp))
            _exp1IlayoutMap :: (LayoutMap)
            _exp1Inewlines :: (Int)
            _exp1IpIdC :: (Int)
            _exp1Ipres :: (Presentation)
            _exp1IpresTree :: (Presentation)
            _exp1IpresXML :: (Presentation)
            _exp1Iself :: (Exp)
            _exp1Ispaces :: (Int)
            _exp1Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp1Itype :: (String)
            _exp1Ival :: (Value)
            _exp1IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Ocol :: (Int)
            _exp1Oenv :: (Bindings)
            _exp1Oerrs :: ([HeliumMessage])
            _exp1OfocusD :: (FocusDoc)
            _exp1Oix :: (Int)
            _exp1OlayoutMap :: (LayoutMap)
            _exp1Olevel :: (Int)
            _exp1Onewlines :: (Int)
            _exp1OpIdC :: (Int)
            _exp1Opath :: ([Int])
            _exp1Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp1Ospaces :: (Int)
            _exp1OtopLevelEnv :: ([(String, String)])
            _exp1OtypeEnv :: ([(PathDoc,String)])
            _exp1OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp1OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Icol :: (Int)
            _exp2IlamBody :: (([(String, Exp)] -> Exp))
            _exp2IlayoutMap :: (LayoutMap)
            _exp2Inewlines :: (Int)
            _exp2IpIdC :: (Int)
            _exp2Ipres :: (Presentation)
            _exp2IpresTree :: (Presentation)
            _exp2IpresXML :: (Presentation)
            _exp2Iself :: (Exp)
            _exp2Ispaces :: (Int)
            _exp2Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp2Itype :: (String)
            _exp2Ival :: (Value)
            _exp2IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Ocol :: (Int)
            _exp2Oenv :: (Bindings)
            _exp2Oerrs :: ([HeliumMessage])
            _exp2OfocusD :: (FocusDoc)
            _exp2Oix :: (Int)
            _exp2OlayoutMap :: (LayoutMap)
            _exp2Olevel :: (Int)
            _exp2Onewlines :: (Int)
            _exp2OpIdC :: (Int)
            _exp2Opath :: ([Int])
            _exp2Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp2Ospaces :: (Int)
            _exp2OtopLevelEnv :: ([(String, String)])
            _exp2OtypeEnv :: ([(PathDoc,String)])
            _exp2OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp2OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _exp1Icol,_exp1IlamBody,_exp1IlayoutMap,_exp1Inewlines,_exp1IpIdC,_exp1Ipres,_exp1IpresTree,_exp1IpresXML,_exp1Iself,_exp1Ispaces,_exp1Isubstitute,_exp1Itype,_exp1Ival,_exp1IvarsInScopeAtFocus) =
                (exp1_ (_exp1Ocol) (_exp1Oenv) (_exp1Oerrs) (_exp1OfocusD) (_exp1Oix) (_exp1OlayoutMap) (_exp1Olevel) (_exp1Onewlines) (_exp1OpIdC) (_exp1Opath) (_exp1Oranges) (_exp1Ospaces) (_exp1OtopLevelEnv) (_exp1OtypeEnv) (_exp1OvarsInScope) (_exp1OvarsInScopeAtFocus))
            ( _exp2Icol,_exp2IlamBody,_exp2IlayoutMap,_exp2Inewlines,_exp2IpIdC,_exp2Ipres,_exp2IpresTree,_exp2IpresXML,_exp2Iself,_exp2Ispaces,_exp2Isubstitute,_exp2Itype,_exp2Ival,_exp2IvarsInScopeAtFocus) =
                (exp2_ (_exp2Ocol) (_exp2Oenv) (_exp2Oerrs) (_exp2OfocusD) (_exp2Oix) (_exp2OlayoutMap) (_exp2Olevel) (_exp2Onewlines) (_exp2OpIdC) (_exp2Opath) (_exp2Oranges) (_exp2Ospaces) (_exp2OtopLevelEnv) (_exp2OtypeEnv) (_exp2OvarsInScope) (_exp2OvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 255, column 7)
            (_lhsOpres@_) =
                loc (DivExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  frac _exp1Ipres _exp2Ipres
            -- "PresentationAG.ag"(line 590, column 13)
            (_lhsOcol@_) =
                _exp1Icol
            -- "PresentationAG.ag"(line 589, column 13)
            (_exp2Ospaces@_) =
                0
            -- "PresentationAG.ag"(line 588, column 13)
            (_exp2Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 587, column 13)
            (_exp2Ocol@_) =
                0
            -- "PresentationAG.ag"(line 586, column 13)
            (_exp1Ospaces@_) =
                0
            -- "PresentationAG.ag"(line 585, column 13)
            (_exp1Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 584, column 13)
            (_exp1Ocol@_) =
                0
            -- "PresentationAG.ag"(line 583, column 12)
            (_exp1OlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (0,0)
            -- "PresentationAG.ag"(line 785, column 7)
            (_exp1OvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 826, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 930, column 17)
            (_lhsOval@_) =
                evaluateIntOp div _exp1Ival _exp2Ival
            -- "PresentationAG_Generated.ag"(line 275, column 12)
            (_lhsOpIdC@_) =
                _exp2IpIdC
            -- "PresentationAG_Generated.ag"(line 274, column 12)
            (_exp2OpIdC@_) =
                _exp1IpIdC
            -- "PresentationAG_Generated.ag"(line 273, column 12)
            (_exp1OpIdC@_) =
                _lhsIpIdC + 1
            -- "PresentationAG_Generated.ag"(line 317, column 12)
            (_exp2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 316, column 12)
            (_exp1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 680, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (DivExpNode _self _lhsIpath) _lhsIpath "DivExp" [ _exp1IpresXML, _exp2IpresXML ]
            -- "PresentationAG_Generated.ag"(line 902, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (DivExpNode _self _lhsIpath) _lhsIpath "DivExp" [ _exp1IpresTree, _exp2IpresTree ]
            -- "LambdaReduce.ag"(line 56, column 7)
            (_reductionEdit@_) =
                case (removeParens _exp1Iself, removeParens _exp2Iself) of
                       (IntExp idd1 idp1 (Int_ _ int1), IntExp _ _ (Int_ _ int2) ) -> [ ("Reduce primitive div" ,  pasteExp _lhsIpath (IntExp idd1 idp1 (Int_ NoIDD (int1 `div` int2))))]
                       _                                         -> []
            -- "LambdaReduce.ag"(line 120, column 7)
            (_substitute@_) =
                \substs -> DivExp idD_ idP0_ (_exp1Isubstitute substs) (_exp2Isubstitute substs)
            -- "LambdaReduce.ag"(line 162, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                DivExp idD_ idP0_ _exp1Iself _exp2Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _exp2IlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _exp2Inewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _exp2Ispaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _exp2IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp1Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp1Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp1Oix@_) =
                _lhsIix
            -- copy rule (down)
            (_exp1Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp1Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp1OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp1OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp1OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_exp2Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp2Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp2Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp2OlayoutMap@_) =
                _exp1IlayoutMap
            -- copy rule (down)
            (_exp2Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp2Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp2OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp2OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp2OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp2OvarsInScopeAtFocus@_) =
                _exp1IvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_HoleExp :: (T_Exp)
sem_Exp_HoleExp  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 852, column 7)
            (_type@_) =
                "<Hole>"
            -- "PresentationAG.ag"(line 957, column 17)
            (_lhsOval@_) =
                ErrVal
            -- "PresentationAG_Generated.ag"(line 307, column 17)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Exp" (HoleExpNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 705, column 17)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Exp" (HoleExpNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 927, column 17)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Exp" (HoleExpNode _self _lhsIpath) _lhsIpath
            -- "LambdaReduce.ag"(line 150, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 188, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                HoleExp
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_IdentExp :: (IDD) ->
                    (T_Ident) ->
                    (T_Exp)
sem_Exp_IdentExp (idd_) (ident_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identIcol :: (Int)
            _identIfirstToken :: (IDP)
            _identIidsPres :: (Presentation)
            _identIlayoutMap :: (LayoutMap)
            _identInewlines :: (Int)
            _identIpIdC :: (Int)
            _identIpres :: (Presentation)
            _identIpresTree :: (Presentation)
            _identIpresXML :: (Presentation)
            _identIself :: (Ident)
            _identIspaces :: (Int)
            _identIstr :: (String)
            _identIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identOcol :: (Int)
            _identOfocusD :: (FocusDoc)
            _identOix :: (Int)
            _identOlayoutMap :: (LayoutMap)
            _identOlevel :: (Int)
            _identOnewlines :: (Int)
            _identOpIdC :: (Int)
            _identOpath :: ([Int])
            _identOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _identOspaces :: (Int)
            _identOvarsInScope :: (FiniteMap String (PathDoc, String))
            _identOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _identIcol,_identIfirstToken,_identIidsPres,_identIlayoutMap,_identInewlines,_identIpIdC,_identIpres,_identIpresTree,_identIpresXML,_identIself,_identIspaces,_identIstr,_identIvarsInScopeAtFocus) =
                (ident_ (_identOcol) (_identOfocusD) (_identOix) (_identOlayoutMap) (_identOlevel) (_identOnewlines) (_identOpIdC) (_identOpath) (_identOranges) (_identOspaces) (_identOvarsInScope) (_identOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 310, column 7)
            (_lhsOpres@_) =
                loc (IdentExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                    _identIpres
                      `addPopupItems`
                      [( "Jump to declaration of "++show (strFromIdent _identIself),
                            navigateTo $ case lookupFM  _lhsIvarsInScope (strFromIdent _identIself) of
                                           Nothing      -> NoPathD
                                           Just (pth,_) -> pth)]
            -- "PresentationAG.ag"(line 801, column 7)
            (_identOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 842, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 951, column 20)
            (_lhsOval@_) =
                case lookup _identIstr _lhsIenv of { Just v -> v; Nothing -> ErrVal }
            -- "PresentationAG_Generated.ag"(line 296, column 14)
            (_lhsOpIdC@_) =
                _identIpIdC
            -- "PresentationAG_Generated.ag"(line 295, column 14)
            (_identOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 330, column 14)
            (_identOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 696, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (IdentExpNode _self _lhsIpath) _lhsIpath "IdentExp" [ _identIpresXML ]
            -- "PresentationAG_Generated.ag"(line 918, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (IdentExpNode _self _lhsIpath) _lhsIpath "IdentExp" [ _identIpresTree ]
            -- "LambdaReduce.ag"(line 82, column 7)
            (_reductionEdit@_) =
                case lookupFM  _lhsIvarsInScope (strFromIdent _identIself) of
                  Nothing      -> []
                  Just (PathD pth@(_:_),_) ->
                    [( "Replace by definition"
                     , \(DocumentLevel d path cl) ->
                       case selectD (init pth) d of
                         (Clip_Decl (Decl idD idP0 idP1 idP2 idP3 _ _ _ exp)) ->
                               let (DocumentLevel d' _ _) =
                                     editPasteD (DocumentLevel d (PathD _lhsIpath) (Clip_Exp ( setIDPExp (idP0FromIdent _identIself) $ ensureParens exp)))
                               in  (DocumentLevel d' path cl)
                         _ -> (DocumentLevel d path cl)
                     )]
            -- "LambdaReduce.ag"(line 138, column 7)
            (_substitute@_) =
                \substs -> case lookup (strFromIdent _identIself) substs of
                                   Just exp -> exp
                                   Nothing  -> _self
            -- "LambdaReduce.ag"(line 178, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                IdentExp idd_ _identIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _identIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _identIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _identInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _identIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _identIvarsInScopeAtFocus
            -- copy rule (down)
            (_identOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_identOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_identOix@_) =
                _lhsIix
            -- copy rule (down)
            (_identOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_identOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_identOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_identOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_identOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_identOvarsInScope@_) =
                _lhsIvarsInScope
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_IfExp :: (IDD) ->
                 (IDP) ->
                 (IDP) ->
                 (IDP) ->
                 (T_Exp) ->
                 (T_Exp) ->
                 (T_Exp) ->
                 (T_Exp)
sem_Exp_IfExp (idD_) (idP0_) (idP1_) (idP2_) (exp1_) (exp2_) (exp3_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Icol :: (Int)
            _exp1IlamBody :: (([(String, Exp)] -> Exp))
            _exp1IlayoutMap :: (LayoutMap)
            _exp1Inewlines :: (Int)
            _exp1IpIdC :: (Int)
            _exp1Ipres :: (Presentation)
            _exp1IpresTree :: (Presentation)
            _exp1IpresXML :: (Presentation)
            _exp1Iself :: (Exp)
            _exp1Ispaces :: (Int)
            _exp1Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp1Itype :: (String)
            _exp1Ival :: (Value)
            _exp1IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Ocol :: (Int)
            _exp1Oenv :: (Bindings)
            _exp1Oerrs :: ([HeliumMessage])
            _exp1OfocusD :: (FocusDoc)
            _exp1Oix :: (Int)
            _exp1OlayoutMap :: (LayoutMap)
            _exp1Olevel :: (Int)
            _exp1Onewlines :: (Int)
            _exp1OpIdC :: (Int)
            _exp1Opath :: ([Int])
            _exp1Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp1Ospaces :: (Int)
            _exp1OtopLevelEnv :: ([(String, String)])
            _exp1OtypeEnv :: ([(PathDoc,String)])
            _exp1OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp1OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Icol :: (Int)
            _exp2IlamBody :: (([(String, Exp)] -> Exp))
            _exp2IlayoutMap :: (LayoutMap)
            _exp2Inewlines :: (Int)
            _exp2IpIdC :: (Int)
            _exp2Ipres :: (Presentation)
            _exp2IpresTree :: (Presentation)
            _exp2IpresXML :: (Presentation)
            _exp2Iself :: (Exp)
            _exp2Ispaces :: (Int)
            _exp2Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp2Itype :: (String)
            _exp2Ival :: (Value)
            _exp2IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Ocol :: (Int)
            _exp2Oenv :: (Bindings)
            _exp2Oerrs :: ([HeliumMessage])
            _exp2OfocusD :: (FocusDoc)
            _exp2Oix :: (Int)
            _exp2OlayoutMap :: (LayoutMap)
            _exp2Olevel :: (Int)
            _exp2Onewlines :: (Int)
            _exp2OpIdC :: (Int)
            _exp2Opath :: ([Int])
            _exp2Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp2Ospaces :: (Int)
            _exp2OtopLevelEnv :: ([(String, String)])
            _exp2OtypeEnv :: ([(PathDoc,String)])
            _exp2OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp2OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp3Icol :: (Int)
            _exp3IlamBody :: (([(String, Exp)] -> Exp))
            _exp3IlayoutMap :: (LayoutMap)
            _exp3Inewlines :: (Int)
            _exp3IpIdC :: (Int)
            _exp3Ipres :: (Presentation)
            _exp3IpresTree :: (Presentation)
            _exp3IpresXML :: (Presentation)
            _exp3Iself :: (Exp)
            _exp3Ispaces :: (Int)
            _exp3Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp3Itype :: (String)
            _exp3Ival :: (Value)
            _exp3IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp3Ocol :: (Int)
            _exp3Oenv :: (Bindings)
            _exp3Oerrs :: ([HeliumMessage])
            _exp3OfocusD :: (FocusDoc)
            _exp3Oix :: (Int)
            _exp3OlayoutMap :: (LayoutMap)
            _exp3Olevel :: (Int)
            _exp3Onewlines :: (Int)
            _exp3OpIdC :: (Int)
            _exp3Opath :: ([Int])
            _exp3Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp3Ospaces :: (Int)
            _exp3OtopLevelEnv :: ([(String, String)])
            _exp3OtypeEnv :: ([(PathDoc,String)])
            _exp3OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp3OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _exp1Icol,_exp1IlamBody,_exp1IlayoutMap,_exp1Inewlines,_exp1IpIdC,_exp1Ipres,_exp1IpresTree,_exp1IpresXML,_exp1Iself,_exp1Ispaces,_exp1Isubstitute,_exp1Itype,_exp1Ival,_exp1IvarsInScopeAtFocus) =
                (exp1_ (_exp1Ocol) (_exp1Oenv) (_exp1Oerrs) (_exp1OfocusD) (_exp1Oix) (_exp1OlayoutMap) (_exp1Olevel) (_exp1Onewlines) (_exp1OpIdC) (_exp1Opath) (_exp1Oranges) (_exp1Ospaces) (_exp1OtopLevelEnv) (_exp1OtypeEnv) (_exp1OvarsInScope) (_exp1OvarsInScopeAtFocus))
            ( _exp2Icol,_exp2IlamBody,_exp2IlayoutMap,_exp2Inewlines,_exp2IpIdC,_exp2Ipres,_exp2IpresTree,_exp2IpresXML,_exp2Iself,_exp2Ispaces,_exp2Isubstitute,_exp2Itype,_exp2Ival,_exp2IvarsInScopeAtFocus) =
                (exp2_ (_exp2Ocol) (_exp2Oenv) (_exp2Oerrs) (_exp2OfocusD) (_exp2Oix) (_exp2OlayoutMap) (_exp2Olevel) (_exp2Onewlines) (_exp2OpIdC) (_exp2Opath) (_exp2Oranges) (_exp2Ospaces) (_exp2OtopLevelEnv) (_exp2OtypeEnv) (_exp2OvarsInScope) (_exp2OvarsInScopeAtFocus))
            ( _exp3Icol,_exp3IlamBody,_exp3IlayoutMap,_exp3Inewlines,_exp3IpIdC,_exp3Ipres,_exp3IpresTree,_exp3IpresXML,_exp3Iself,_exp3Ispaces,_exp3Isubstitute,_exp3Itype,_exp3Ival,_exp3IvarsInScopeAtFocus) =
                (exp3_ (_exp3Ocol) (_exp3Oenv) (_exp3Oerrs) (_exp3OfocusD) (_exp3Oix) (_exp3OlayoutMap) (_exp3Olevel) (_exp3Onewlines) (_exp3OpIdC) (_exp3Opath) (_exp3Oranges) (_exp3Ospaces) (_exp3OtopLevelEnv) (_exp3OtypeEnv) (_exp3OvarsInScope) (_exp3OvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 321, column 7)
            (_lhsOpres@_) =
                loc (IfExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                      squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row'  $ [ key (mkIDP idP0_ _lhsIpIdC 0) "if",   _exp1Ipres
                              , key (mkIDP idP1_ _lhsIpIdC 1) "then", _exp2Ipres
                              , key (mkIDP idP2_ _lhsIpIdC 2) "else", _exp3Ipres ]
            -- "PresentationAG.ag"(line 648, column 11)
            (_exp3Ospaces@_) =
                1
            -- "PresentationAG.ag"(line 647, column 11)
            (_exp3Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 646, column 11)
            (_exp2Ospaces@_) =
                1
            -- "PresentationAG.ag"(line 645, column 11)
            (_exp2Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 644, column 11)
            (_exp1Ospaces@_) =
                1
            -- "PresentationAG.ag"(line 643, column 11)
            (_exp1Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 642, column 11)
            (_exp3Ocol@_) =
                _lhsIcol + 4+1
            -- "PresentationAG.ag"(line 641, column 11)
            (_exp2Ocol@_) =
                _lhsIcol + 4+1
            -- "PresentationAG.ag"(line 640, column 11)
            (_exp1Ocol@_) =
                _lhsIcol + 2+1
            -- "PresentationAG.ag"(line 636, column 12)
            (_exp1OlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                  [ (idP0_, (_lhsInewlines,_lhsIspaces))
                  , (idP1_, (1,_lhsIcol))
                  , (idP2_, (1,_lhsIcol)) ]
            -- "PresentationAG.ag"(line 803, column 7)
            (_exp1OvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 844, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 952, column 17)
            (_lhsOval@_) =
                case _exp1Ival of BoolVal b -> if b then _exp2Ival else _exp3Ival
                                  _         -> ErrVal
            -- "PresentationAG_Generated.ag"(line 300, column 11)
            (_lhsOpIdC@_) =
                _exp3IpIdC
            -- "PresentationAG_Generated.ag"(line 299, column 11)
            (_exp2OpIdC@_) =
                _exp1IpIdC
            -- "PresentationAG_Generated.ag"(line 298, column 11)
            (_exp3OpIdC@_) =
                _exp2IpIdC
            -- "PresentationAG_Generated.ag"(line 297, column 11)
            (_exp1OpIdC@_) =
                _lhsIpIdC + 3
            -- "PresentationAG_Generated.ag"(line 333, column 11)
            (_exp3Opath@_) =
                _lhsIpath++[2]
            -- "PresentationAG_Generated.ag"(line 332, column 11)
            (_exp2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 331, column 11)
            (_exp1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 698, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (IfExpNode _self _lhsIpath) _lhsIpath "IfExp" [ _exp1IpresXML, _exp2IpresXML, _exp3IpresXML ]
            -- "PresentationAG_Generated.ag"(line 920, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (IfExpNode _self _lhsIpath) _lhsIpath "IfExp" [ _exp1IpresTree, _exp2IpresTree, _exp3IpresTree ]
            -- "LambdaReduce.ag"(line 101, column 7)
            (_reductionEdit@_) =
                case removeParens _exp1Iself of
                       BoolExp _ _ (Bool_ _ bool) -> [ ("Reduce primitive if" , pasteExp _lhsIpath
                                                                                (if bool then setIDPExp idP0_ _exp2Iself
                                                                                         else setIDPExp idP0_ _exp3Iself))]
                       _                          -> []
            -- "LambdaReduce.ag"(line 142, column 7)
            (_substitute@_) =
                \substs -> IfExp idD_ idP0_ idP1_ idP2_ (_exp1Isubstitute substs) (_exp2Isubstitute substs) (_exp3Isubstitute substs)
            -- "LambdaReduce.ag"(line 180, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                IfExp idD_ idP0_ idP1_ idP2_ _exp1Iself _exp2Iself _exp3Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _exp3Icol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _exp3IlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _exp3Inewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _exp3Ispaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _exp3IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp1Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp1Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp1Oix@_) =
                _lhsIix
            -- copy rule (down)
            (_exp1Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp1Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp1OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp1OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp1OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_exp2Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp2Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp2Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp2OlayoutMap@_) =
                _exp1IlayoutMap
            -- copy rule (down)
            (_exp2Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp2Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp2OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp2OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp2OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp2OvarsInScopeAtFocus@_) =
                _exp1IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp3Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp3Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp3OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp3Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp3OlayoutMap@_) =
                _exp2IlayoutMap
            -- copy rule (down)
            (_exp3Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp3Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp3OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp3OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp3OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp3OvarsInScopeAtFocus@_) =
                _exp2IvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_IntExp :: (IDD) ->
                  (IDP) ->
                  (T_Int_) ->
                  (T_Exp)
sem_Exp_IntExp (idD_) (idP0_) (int__) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _int_Iint :: (Int)
            _int_IpIdC :: (Int)
            _int_Ipres :: (Presentation)
            _int_IpresTree :: (Presentation)
            _int_IpresXML :: (Presentation)
            _int_Iself :: (Int_)
            _int_OfocusD :: (FocusDoc)
            _int_Oix :: (Int)
            _int_OpIdC :: (Int)
            _int_Opath :: ([Int])
            ( _int_Iint,_int_IpIdC,_int_Ipres,_int_IpresTree,_int_IpresXML,_int_Iself) =
                (int__ (_int_OfocusD) (_int_Oix) (_int_OpIdC) (_int_Opath))
            -- "PresentationAG.ag"(line 271, column 7)
            (_lhsOpres@_) =
                loc (IntExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [cons (mkIDP idP0_ _lhsIpIdC 0) "", _int_Ipres]
            -- "PresentationAG.ag"(line 598, column 12)
            (_lhsOcol@_) =
                _lhsIcol+length (show _int_Iint)
            -- "PresentationAG.ag"(line 597, column 12)
            (_lhsOlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (_lhsInewlines,_lhsIspaces)
            -- "PresentationAG.ag"(line 791, column 7)
            (_lhsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 832, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 937, column 17)
            (_lhsOval@_) =
                IntVal _int_Iint
            -- "PresentationAG_Generated.ag"(line 282, column 12)
            (_lhsOpIdC@_) =
                _int_IpIdC
            -- "PresentationAG_Generated.ag"(line 281, column 12)
            (_int_OpIdC@_) =
                _lhsIpIdC + 1
            -- "PresentationAG_Generated.ag"(line 321, column 12)
            (_int_Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 686, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (IntExpNode _self _lhsIpath) _lhsIpath "IntExp" [ _int_IpresXML ]
            -- "PresentationAG_Generated.ag"(line 908, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (IntExpNode _self _lhsIpath) _lhsIpath "IntExp" [ _int_IpresTree ]
            -- "LambdaReduce.ag"(line 66, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 126, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 168, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                IntExp idD_ idP0_ _int_Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (down)
            (_int_OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_int_Oix@_) =
                _lhsIix
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_LamExp :: (IDD) ->
                  (IDP) ->
                  (IDP) ->
                  (T_Ident) ->
                  (T_Exp) ->
                  (T_Exp)
sem_Exp_LamExp (idD_) (idP0_) (idP1_) (ident_) (exp_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identIcol :: (Int)
            _identIfirstToken :: (IDP)
            _identIidsPres :: (Presentation)
            _identIlayoutMap :: (LayoutMap)
            _identInewlines :: (Int)
            _identIpIdC :: (Int)
            _identIpres :: (Presentation)
            _identIpresTree :: (Presentation)
            _identIpresXML :: (Presentation)
            _identIself :: (Ident)
            _identIspaces :: (Int)
            _identIstr :: (String)
            _identIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _identOcol :: (Int)
            _identOfocusD :: (FocusDoc)
            _identOix :: (Int)
            _identOlayoutMap :: (LayoutMap)
            _identOlevel :: (Int)
            _identOnewlines :: (Int)
            _identOpIdC :: (Int)
            _identOpath :: ([Int])
            _identOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _identOspaces :: (Int)
            _identOvarsInScope :: (FiniteMap String (PathDoc, String))
            _identOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _identIcol,_identIfirstToken,_identIidsPres,_identIlayoutMap,_identInewlines,_identIpIdC,_identIpres,_identIpresTree,_identIpresXML,_identIself,_identIspaces,_identIstr,_identIvarsInScopeAtFocus) =
                (ident_ (_identOcol) (_identOfocusD) (_identOix) (_identOlayoutMap) (_identOlevel) (_identOnewlines) (_identOpIdC) (_identOpath) (_identOranges) (_identOspaces) (_identOvarsInScope) (_identOvarsInScopeAtFocus))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 276, column 7)
            (_lhsOpres@_) =
                loc (LamExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [
                         key (mkIDP idP0_ _lhsIpIdC 0) "\\"
                       , _identIpres
                       , text' (mkIDP idP1_ _lhsIpIdC 1) ""
                         , key NoIDP "®"    `withFontFam` "symbol"
                       , _expIpres ]
            -- "PresentationAG.ag"(line 609, column 13)
            (_lhsOcol@_) =
                _expIcol
            -- "PresentationAG.ag"(line 608, column 13)
            (_expOspaces@_) =
                1
            -- "PresentationAG.ag"(line 607, column 13)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 606, column 13)
            (_expOcol@_) =
                _identIcol + 3
            -- "PresentationAG.ag"(line 605, column 13)
            (_identOspaces@_) =
                0
            -- "PresentationAG.ag"(line 604, column 13)
            (_identOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 603, column 13)
            (_identOcol@_) =
                _lhsIcol + 1
            -- "PresentationAG.ag"(line 600, column 13)
            (_identOlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                  [ (idP0_, (_lhsInewlines,_lhsIspaces))
                  , (idP1_, (0,1)) ]
            -- "PresentationAG.ag"(line 753, column 7)
            (_expOvarsInScope@_) =
                addToFM _lhsIvarsInScope (strFromIdent _identIself)
                                         (PathD $ (_lhsIpath++[0]), _expItype)
            -- "PresentationAG.ag"(line 793, column 7)
            (_identOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 834, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 938, column 17)
            (_lhsOval@_) =
                LamVal (\arg ->
                         let (_,_,_,_,_,_,_,_,_,_,_,_,v,_) =
                               exp_ undefined ((_identIstr, arg): _lhsIenv) undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined
                         in  v)
            -- "PresentationAG_Generated.ag"(line 285, column 12)
            (_lhsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 284, column 12)
            (_expOpIdC@_) =
                _identIpIdC
            -- "PresentationAG_Generated.ag"(line 283, column 12)
            (_identOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 323, column 12)
            (_expOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 322, column 12)
            (_identOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 688, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (LamExpNode _self _lhsIpath) _lhsIpath "LamExp" [ _identIpresXML, _expIpresXML ]
            -- "PresentationAG_Generated.ag"(line 910, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (LamExpNode _self _lhsIpath) _lhsIpath "LamExp" [ _identIpresTree, _expIpresTree ]
            -- "LambdaReduce.ag"(line 68, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 128, column 7)
            (_substitute@_) =
                \substs -> LamExp idD_ idP0_ idP1_ _identIself (_expIsubstitute
                                                                 (filter (\(str,_) -> str /= strFromIdent _identIself)
                                                                         substs))
            -- "LambdaReduce.ag"(line 170, column 7)
            (_lhsOlamBody@_) =
                _expIsubstitute
            -- self rule
            (_self@_) =
                LamExp idD_ idP0_ idP1_ _identIself _expIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _expIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _expInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _expIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expIvarsInScopeAtFocus
            -- copy rule (down)
            (_identOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_identOix@_) =
                _lhsIix
            -- copy rule (down)
            (_identOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_identOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_identOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_expOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (chain)
            (_expOlayoutMap@_) =
                _identIlayoutMap
            -- copy rule (down)
            (_expOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (chain)
            (_expOvarsInScopeAtFocus@_) =
                _identIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_LetExp :: (IDD) ->
                  (IDP) ->
                  (IDP) ->
                  (T_List_Decl) ->
                  (T_Exp) ->
                  (T_Exp)
sem_Exp_LetExp (idD_) (idP0_) (idP1_) (decls_) (exp_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _declsIcol :: (Int)
            _declsIdcls :: (Bindings)
            _declsIdeclaredVars :: ([(String,(PathDoc,String))])
            _declsIidsPres :: (Presentation)
            _declsIlayoutMap :: (LayoutMap)
            _declsInewlines :: (Int)
            _declsIpIdC :: (Int)
            _declsIparseErrs :: ([String])
            _declsIpres :: (Presentation)
            _declsIpresTree :: (Presentation)
            _declsIpresXML :: (Presentation)
            _declsIpress :: ([Presentation])
            _declsIself :: (List_Decl)
            _declsIspaces :: (Int)
            _declsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _declsOcol :: (Int)
            _declsOenv :: (Bindings)
            _declsOerrs :: ([HeliumMessage])
            _declsOfocusD :: (FocusDoc)
            _declsOlayoutMap :: (LayoutMap)
            _declsOlevel :: (Int)
            _declsOnewlines :: (Int)
            _declsOpIdC :: (Int)
            _declsOpath :: ([Int])
            _declsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _declsOspaces :: (Int)
            _declsOtopLevelEnv :: ([(String, String)])
            _declsOtypeEnv :: ([(PathDoc,String)])
            _declsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _declsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _declsIcol,_declsIdcls,_declsIdeclaredVars,_declsIidsPres,_declsIlayoutMap,_declsInewlines,_declsIpIdC,_declsIparseErrs,_declsIpres,_declsIpresTree,_declsIpresXML,_declsIpress,_declsIself,_declsIspaces,_declsIvarsInScopeAtFocus) =
                (decls_ (_declsOcol) (_declsOenv) (_declsOerrs) (_declsOfocusD) (_declsOlayoutMap) (_declsOlevel) (_declsOnewlines) (_declsOpIdC) (_declsOpath) (_declsOranges) (_declsOspaces) (_declsOtopLevelEnv) (_declsOtypeEnv) (_declsOvarsInScope) (_declsOvarsInScopeAtFocus))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 94, column 7)
            (_declsOlevel@_) =
                _lhsIlevel + 1
            -- "PresentationAG.ag"(line 302, column 7)
            (_lhsOpres@_) =
                loc (CaseExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [ key (mkIDP idP0_ _lhsIpIdC 0) "let"
                       , loc (List_DeclNode _declsIself []               ) $ parsing $ presentFocus _lhsIfocusD []                 $ row _declsIpress
                       , key (mkIDP idP1_ _lhsIpIdC 1) "in", _expIpres ]
            -- "PresentationAG.ag"(line 634, column 11)
            (_expOspaces@_) =
                2
            -- "PresentationAG.ag"(line 633, column 11)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 632, column 11)
            (_declsOspaces@_) =
                1
            -- "PresentationAG.ag"(line 631, column 11)
            (_declsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 630, column 11)
            (_expOcol@_) =
                _lhsIcol + 3+1
            -- "PresentationAG.ag"(line 629, column 11)
            (_declsOcol@_) =
                _lhsIcol + 3+1
            -- "PresentationAG.ag"(line 626, column 13)
            (_declsOlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                  [ (idP0_, (_lhsInewlines,_lhsIspaces))
                  , (idP1_, (1,_lhsIcol))]
            -- "PresentationAG.ag"(line 751, column 7)
            (_varsInScope@_) =
                addListToFM _lhsIvarsInScope _declsIdeclaredVars
            -- "PresentationAG.ag"(line 799, column 7)
            (_declsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 840, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 947, column 17)
            (_lhsOval@_) =
                let (_,_,_,_,_,_,_,_,_,_,_,_,v,_) =
                      exp_ undefined (_declsIdcls ++ _lhsIenv) undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined undefined
                in  v
            -- "PresentationAG_Generated.ag"(line 294, column 12)
            (_lhsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 293, column 12)
            (_expOpIdC@_) =
                _declsIpIdC
            -- "PresentationAG_Generated.ag"(line 292, column 12)
            (_declsOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 329, column 12)
            (_expOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 328, column 12)
            (_declsOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 694, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (LetExpNode _self _lhsIpath) _lhsIpath "LetExp" [ _declsIpresXML, _expIpresXML ]
            -- "PresentationAG_Generated.ag"(line 916, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (LetExpNode _self _lhsIpath) _lhsIpath "LetExp" [ _declsIpresTree, _expIpresTree ]
            -- "LambdaReduce.ag"(line 80, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 136, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 176, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                LetExp idD_ idP0_ idP1_ _declsIself _expIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _expIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _expIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _expInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _expIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expIvarsInScopeAtFocus
            -- copy rule (down)
            (_declsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_declsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_declsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_declsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_declsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_declsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (from local)
            (_declsOvarsInScope@_) =
                _varsInScope
            -- copy rule (down)
            (_expOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (chain)
            (_expOlayoutMap@_) =
                _declsIlayoutMap
            -- copy rule (down)
            (_expOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (from local)
            (_expOvarsInScope@_) =
                _varsInScope
            -- copy rule (chain)
            (_expOvarsInScopeAtFocus@_) =
                _declsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_ListExp :: (IDD) ->
                   (IDP) ->
                   (IDP) ->
                   ([IDP]) ->
                   (T_List_Exp) ->
                   (T_Exp)
sem_Exp_ListExp (idD_) (idP0_) (idP1_) (ids_) (exps_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expsIcol :: (Int)
            _expsIlayoutMap :: (LayoutMap)
            _expsInewlines :: (Int)
            _expsIpIdC :: (Int)
            _expsIpresTree :: (Presentation)
            _expsIpresXML :: (Presentation)
            _expsIpress :: ([Presentation])
            _expsIself :: (List_Exp)
            _expsIspaces :: (Int)
            _expsIvals :: ([Value])
            _expsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expsOcol :: (Int)
            _expsOenv :: (Bindings)
            _expsOerrs :: ([HeliumMessage])
            _expsOfocusD :: (FocusDoc)
            _expsOlayoutMap :: (LayoutMap)
            _expsOlevel :: (Int)
            _expsOnewlines :: (Int)
            _expsOpIdC :: (Int)
            _expsOpath :: ([Int])
            _expsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expsOspaces :: (Int)
            _expsOtopLevelEnv :: ([(String, String)])
            _expsOtypeEnv :: ([(PathDoc,String)])
            _expsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _expsIcol,_expsIlayoutMap,_expsInewlines,_expsIpIdC,_expsIpresTree,_expsIpresXML,_expsIpress,_expsIself,_expsIspaces,_expsIvals,_expsIvarsInScopeAtFocus) =
                (exps_ (_expsOcol) (_expsOenv) (_expsOerrs) (_expsOfocusD) (_expsOlayoutMap) (_expsOlevel) (_expsOnewlines) (_expsOpIdC) (_expsOpath) (_expsOranges) (_expsOspaces) (_expsOtopLevelEnv) (_expsOtypeEnv) (_expsOvarsInScope) (_expsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 335, column 7)
            (_lhsOpres@_) =
                loc (ListExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' $    [sep (mkIDP idP0_ _lhsIpIdC 0) "["]
                         ++ let xps = _expsIpress
                                sps = map (\id -> sep id ",") (ids_++ map IDP [_lhsIpIdC .. ] )
                            in (if null xps
                                then []
                                else head xps : concat [ [s,e] | (s,e) <- zip sps (tail xps)])
                         ++ [sep (mkIDP idP1_ _lhsIpIdC 1) "]"]
            -- "PresentationAG.ag"(line 666, column 13)
            (_lhsOspaces@_) =
                0
            -- "PresentationAG.ag"(line 665, column 13)
            (_lhsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 664, column 13)
            (_lhsOcol@_) =
                _expsIcol + 1+1
            -- "PresentationAG.ag"(line 663, column 13)
            (_expsOspaces@_) =
                1
            -- "PresentationAG.ag"(line 662, column 13)
            (_expsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 661, column 13)
            (_expsOcol@_) =
                _lhsIcol + 1+1
            -- "PresentationAG.ag"(line 658, column 13)
            (_expsOlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                  [ (idP0_, (_lhsInewlines,_lhsIspaces))
                  , (idP1_, (0,1)) ]
            -- "PresentationAG.ag"(line 807, column 7)
            (_expsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 848, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 955, column 17)
            (_lhsOval@_) =
                ListVal _expsIvals
            -- "PresentationAG_Generated.ag"(line 304, column 13)
            (_lhsOpIdC@_) =
                _expsIpIdC
            -- "PresentationAG_Generated.ag"(line 303, column 13)
            (_expsOpIdC@_) =
                _lhsIpIdC + 3
            -- "PresentationAG_Generated.ag"(line 335, column 13)
            (_expsOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 702, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (ListExpNode _self _lhsIpath) _lhsIpath "ListExp" [ _expsIpresXML ]
            -- "PresentationAG_Generated.ag"(line 924, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (ListExpNode _self _lhsIpath) _lhsIpath "ListExp" [ _expsIpresTree ]
            -- "LambdaReduce.ag"(line 109, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 146, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 184, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                ListExp idD_ idP0_ idP1_ ids_ _expsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _expsIlayoutMap
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expsIvarsInScopeAtFocus
            -- copy rule (down)
            (_expsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expsOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_expsOvarsInScope@_) =
                _lhsIvarsInScope
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_ParenExp :: (IDD) ->
                    (IDP) ->
                    (IDP) ->
                    (T_Exp) ->
                    (T_Exp)
sem_Exp_ParenExp (idD_) (idP0_) (idP1_) (exp_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 329, column 7)
            (_lhsOpres@_) =
                loc (ParenExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row'  [sep (mkIDP idP0_ _lhsIpIdC 0) "(", _expIpres , sep (mkIDP idP1_ _lhsIpIdC 1) ")"]
            -- "PresentationAG.ag"(line 657, column 14)
            (_lhsOspaces@_) =
                0
            -- "PresentationAG.ag"(line 656, column 14)
            (_lhsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 655, column 14)
            (_lhsOcol@_) =
                _expIcol + 1+1
            -- "PresentationAG.ag"(line 654, column 14)
            (_expOspaces@_) =
                1
            -- "PresentationAG.ag"(line 653, column 14)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 652, column 14)
            (_expOcol@_) =
                _lhsIcol + 1+1
            -- "PresentationAG.ag"(line 649, column 14)
            (_expOlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                  [ (idP0_, (_lhsInewlines,_lhsIspaces))
                  , (idP1_, (0,1)) ]
            -- "PresentationAG.ag"(line 805, column 7)
            (_expOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 846, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 954, column 17)
            (_lhsOval@_) =
                _expIval
            -- "PresentationAG_Generated.ag"(line 302, column 14)
            (_lhsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 301, column 14)
            (_expOpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 334, column 14)
            (_expOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 700, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (ParenExpNode _self _lhsIpath) _lhsIpath "ParenExp" [ _expIpresXML ]
            -- "PresentationAG_Generated.ag"(line 922, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (ParenExpNode _self _lhsIpath) _lhsIpath "ParenExp" [ _expIpresTree ]
            -- "LambdaReduce.ag"(line 107, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 144, column 7)
            (_substitute@_) =
                \substs -> ParenExp idD_ idP0_ idP1_ (_expIsubstitute substs)
            -- "LambdaReduce.ag"(line 182, column 7)
            (_lhsOlamBody@_) =
                _expIlamBody
            -- self rule
            (_self@_) =
                ParenExp idD_ idP0_ idP1_ _expIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _expIlayoutMap
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expIvarsInScopeAtFocus
            -- copy rule (down)
            (_expOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (down)
            (_expOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_expOvarsInScope@_) =
                _lhsIvarsInScope
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_ParseErrExp :: (Node) ->
                       (Presentation) ->
                       (T_Exp)
sem_Exp_ParseErrExp (node_) (presentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 854, column 7)
            (_type@_) =
                "<ParseErr>"
            -- "PresentationAG.ag"(line 958, column 17)
            (_lhsOval@_) =
                ErrVal
            -- "PresentationAG_Generated.ag"(line 308, column 17)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 706, column 17)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 928, column 17)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- "LambdaReduce.ag"(line 152, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 190, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                ParseErrExp node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_PlusExp :: (IDD) ->
                   (IDP) ->
                   (T_Exp) ->
                   (T_Exp) ->
                   (T_Exp)
sem_Exp_PlusExp (idD_) (idP0_) (exp1_) (exp2_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Icol :: (Int)
            _exp1IlamBody :: (([(String, Exp)] -> Exp))
            _exp1IlayoutMap :: (LayoutMap)
            _exp1Inewlines :: (Int)
            _exp1IpIdC :: (Int)
            _exp1Ipres :: (Presentation)
            _exp1IpresTree :: (Presentation)
            _exp1IpresXML :: (Presentation)
            _exp1Iself :: (Exp)
            _exp1Ispaces :: (Int)
            _exp1Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp1Itype :: (String)
            _exp1Ival :: (Value)
            _exp1IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Ocol :: (Int)
            _exp1Oenv :: (Bindings)
            _exp1Oerrs :: ([HeliumMessage])
            _exp1OfocusD :: (FocusDoc)
            _exp1Oix :: (Int)
            _exp1OlayoutMap :: (LayoutMap)
            _exp1Olevel :: (Int)
            _exp1Onewlines :: (Int)
            _exp1OpIdC :: (Int)
            _exp1Opath :: ([Int])
            _exp1Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp1Ospaces :: (Int)
            _exp1OtopLevelEnv :: ([(String, String)])
            _exp1OtypeEnv :: ([(PathDoc,String)])
            _exp1OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp1OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Icol :: (Int)
            _exp2IlamBody :: (([(String, Exp)] -> Exp))
            _exp2IlayoutMap :: (LayoutMap)
            _exp2Inewlines :: (Int)
            _exp2IpIdC :: (Int)
            _exp2Ipres :: (Presentation)
            _exp2IpresTree :: (Presentation)
            _exp2IpresXML :: (Presentation)
            _exp2Iself :: (Exp)
            _exp2Ispaces :: (Int)
            _exp2Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp2Itype :: (String)
            _exp2Ival :: (Value)
            _exp2IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Ocol :: (Int)
            _exp2Oenv :: (Bindings)
            _exp2Oerrs :: ([HeliumMessage])
            _exp2OfocusD :: (FocusDoc)
            _exp2Oix :: (Int)
            _exp2OlayoutMap :: (LayoutMap)
            _exp2Olevel :: (Int)
            _exp2Onewlines :: (Int)
            _exp2OpIdC :: (Int)
            _exp2Opath :: ([Int])
            _exp2Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp2Ospaces :: (Int)
            _exp2OtopLevelEnv :: ([(String, String)])
            _exp2OtypeEnv :: ([(PathDoc,String)])
            _exp2OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp2OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _exp1Icol,_exp1IlamBody,_exp1IlayoutMap,_exp1Inewlines,_exp1IpIdC,_exp1Ipres,_exp1IpresTree,_exp1IpresXML,_exp1Iself,_exp1Ispaces,_exp1Isubstitute,_exp1Itype,_exp1Ival,_exp1IvarsInScopeAtFocus) =
                (exp1_ (_exp1Ocol) (_exp1Oenv) (_exp1Oerrs) (_exp1OfocusD) (_exp1Oix) (_exp1OlayoutMap) (_exp1Olevel) (_exp1Onewlines) (_exp1OpIdC) (_exp1Opath) (_exp1Oranges) (_exp1Ospaces) (_exp1OtopLevelEnv) (_exp1OtypeEnv) (_exp1OvarsInScope) (_exp1OvarsInScopeAtFocus))
            ( _exp2Icol,_exp2IlamBody,_exp2IlayoutMap,_exp2Inewlines,_exp2IpIdC,_exp2Ipres,_exp2IpresTree,_exp2IpresXML,_exp2Iself,_exp2Ispaces,_exp2Isubstitute,_exp2Itype,_exp2Ival,_exp2IvarsInScopeAtFocus) =
                (exp2_ (_exp2Ocol) (_exp2Oenv) (_exp2Oerrs) (_exp2OfocusD) (_exp2Oix) (_exp2OlayoutMap) (_exp2Olevel) (_exp2Onewlines) (_exp2OpIdC) (_exp2Opath) (_exp2Oranges) (_exp2Ospaces) (_exp2OtopLevelEnv) (_exp2OtypeEnv) (_exp2OvarsInScope) (_exp2OvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 245, column 7)
            (_lhsOpres@_) =
                loc (PlusExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [_exp1Ipres , op (mkIDP idP0_ _lhsIpIdC 0) "+", _exp2Ipres]
            -- "PresentationAG.ag"(line 576, column 13)
            (_lhsOcol@_) =
                _exp2Icol
            -- "PresentationAG.ag"(line 575, column 13)
            (_exp2Ospaces@_) =
                1
            -- "PresentationAG.ag"(line 574, column 13)
            (_exp2Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 573, column 13)
            (_exp2Ocol@_) =
                _exp1Icol + 3
            -- "PresentationAG.ag"(line 572, column 13)
            (_exp1Ocol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 571, column 13)
            (_exp1OlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (0,1)
            -- "PresentationAG.ag"(line 781, column 7)
            (_exp1OvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 822, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 928, column 17)
            (_lhsOval@_) =
                evaluateIntOp (+) _exp1Ival _exp2Ival
            -- "PresentationAG_Generated.ag"(line 269, column 13)
            (_lhsOpIdC@_) =
                _exp2IpIdC
            -- "PresentationAG_Generated.ag"(line 268, column 13)
            (_exp2OpIdC@_) =
                _exp1IpIdC
            -- "PresentationAG_Generated.ag"(line 267, column 13)
            (_exp1OpIdC@_) =
                _lhsIpIdC + 1
            -- "PresentationAG_Generated.ag"(line 313, column 13)
            (_exp2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 312, column 13)
            (_exp1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 676, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (PlusExpNode _self _lhsIpath) _lhsIpath "PlusExp" [ _exp1IpresXML, _exp2IpresXML ]
            -- "PresentationAG_Generated.ag"(line 898, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (PlusExpNode _self _lhsIpath) _lhsIpath "PlusExp" [ _exp1IpresTree, _exp2IpresTree ]
            -- "LambdaReduce.ag"(line 48, column 7)
            (_reductionEdit@_) =
                case (removeParens _exp1Iself, removeParens _exp2Iself) of
                       (IntExp idd1 idp1 (Int_ _ int1), IntExp _ _ (Int_ _ int2) ) -> [ ("Reduce primitive (+)" , pasteExp _lhsIpath (IntExp idd1 idp1 (Int_ NoIDD (int1+int2))))]
                       _                                         -> []
            -- "LambdaReduce.ag"(line 116, column 7)
            (_substitute@_) =
                \substs -> PlusExp idD_ idP0_ (_exp1Isubstitute substs) (_exp2Isubstitute substs)
            -- "LambdaReduce.ag"(line 158, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                PlusExp idD_ idP0_ _exp1Iself _exp2Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _exp2IlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _exp2Inewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _exp2Ispaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _exp2IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp1Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp1Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp1Oix@_) =
                _lhsIix
            -- copy rule (down)
            (_exp1Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp1Onewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_exp1Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp1Ospaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_exp1OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp1OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp1OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_exp2Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp2Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp2Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp2OlayoutMap@_) =
                _exp1IlayoutMap
            -- copy rule (down)
            (_exp2Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp2Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp2OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp2OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp2OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp2OvarsInScopeAtFocus@_) =
                _exp1IvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_PowerExp :: (IDD) ->
                    (IDP) ->
                    (T_Exp) ->
                    (T_Exp) ->
                    (T_Exp)
sem_Exp_PowerExp (idD_) (idP0_) (exp1_) (exp2_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Icol :: (Int)
            _exp1IlamBody :: (([(String, Exp)] -> Exp))
            _exp1IlayoutMap :: (LayoutMap)
            _exp1Inewlines :: (Int)
            _exp1IpIdC :: (Int)
            _exp1Ipres :: (Presentation)
            _exp1IpresTree :: (Presentation)
            _exp1IpresXML :: (Presentation)
            _exp1Iself :: (Exp)
            _exp1Ispaces :: (Int)
            _exp1Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp1Itype :: (String)
            _exp1Ival :: (Value)
            _exp1IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Ocol :: (Int)
            _exp1Oenv :: (Bindings)
            _exp1Oerrs :: ([HeliumMessage])
            _exp1OfocusD :: (FocusDoc)
            _exp1Oix :: (Int)
            _exp1OlayoutMap :: (LayoutMap)
            _exp1Olevel :: (Int)
            _exp1Onewlines :: (Int)
            _exp1OpIdC :: (Int)
            _exp1Opath :: ([Int])
            _exp1Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp1Ospaces :: (Int)
            _exp1OtopLevelEnv :: ([(String, String)])
            _exp1OtypeEnv :: ([(PathDoc,String)])
            _exp1OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp1OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Icol :: (Int)
            _exp2IlamBody :: (([(String, Exp)] -> Exp))
            _exp2IlayoutMap :: (LayoutMap)
            _exp2Inewlines :: (Int)
            _exp2IpIdC :: (Int)
            _exp2Ipres :: (Presentation)
            _exp2IpresTree :: (Presentation)
            _exp2IpresXML :: (Presentation)
            _exp2Iself :: (Exp)
            _exp2Ispaces :: (Int)
            _exp2Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp2Itype :: (String)
            _exp2Ival :: (Value)
            _exp2IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Ocol :: (Int)
            _exp2Oenv :: (Bindings)
            _exp2Oerrs :: ([HeliumMessage])
            _exp2OfocusD :: (FocusDoc)
            _exp2Oix :: (Int)
            _exp2OlayoutMap :: (LayoutMap)
            _exp2Olevel :: (Int)
            _exp2Onewlines :: (Int)
            _exp2OpIdC :: (Int)
            _exp2Opath :: ([Int])
            _exp2Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp2Ospaces :: (Int)
            _exp2OtopLevelEnv :: ([(String, String)])
            _exp2OtypeEnv :: ([(PathDoc,String)])
            _exp2OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp2OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _exp1Icol,_exp1IlamBody,_exp1IlayoutMap,_exp1Inewlines,_exp1IpIdC,_exp1Ipres,_exp1IpresTree,_exp1IpresXML,_exp1Iself,_exp1Ispaces,_exp1Isubstitute,_exp1Itype,_exp1Ival,_exp1IvarsInScopeAtFocus) =
                (exp1_ (_exp1Ocol) (_exp1Oenv) (_exp1Oerrs) (_exp1OfocusD) (_exp1Oix) (_exp1OlayoutMap) (_exp1Olevel) (_exp1Onewlines) (_exp1OpIdC) (_exp1Opath) (_exp1Oranges) (_exp1Ospaces) (_exp1OtopLevelEnv) (_exp1OtypeEnv) (_exp1OvarsInScope) (_exp1OvarsInScopeAtFocus))
            ( _exp2Icol,_exp2IlamBody,_exp2IlayoutMap,_exp2Inewlines,_exp2IpIdC,_exp2Ipres,_exp2IpresTree,_exp2IpresXML,_exp2Iself,_exp2Ispaces,_exp2Isubstitute,_exp2Itype,_exp2Ival,_exp2IvarsInScopeAtFocus) =
                (exp2_ (_exp2Ocol) (_exp2Oenv) (_exp2Oerrs) (_exp2OfocusD) (_exp2Oix) (_exp2OlayoutMap) (_exp2Olevel) (_exp2Onewlines) (_exp2OpIdC) (_exp2Opath) (_exp2Oranges) (_exp2Ospaces) (_exp2OtopLevelEnv) (_exp2OtypeEnv) (_exp2OvarsInScope) (_exp2OvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 260, column 7)
            (_lhsOpres@_) =
                loc (PowerExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  power _exp1Ipres _exp2Ipres
            -- "PresentationAG.ag"(line 596, column 13)
            (_lhsOcol@_) =
                _exp2Icol
            -- "PresentationAG.ag"(line 595, column 13)
            (_exp2Ospaces@_) =
                0
            -- "PresentationAG.ag"(line 594, column 13)
            (_exp2Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 593, column 13)
            (_exp2Ocol@_) =
                0
            -- "PresentationAG.ag"(line 592, column 13)
            (_exp1Ocol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 591, column 14)
            (_exp1OlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (0,0)
            -- "PresentationAG.ag"(line 787, column 7)
            (_exp1OvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 828, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 931, column 17)
            (_lhsOval@_) =
                evaluateIntOp (^) _exp1Ival _exp2Ival
            -- "PresentationAG_Generated.ag"(line 278, column 14)
            (_lhsOpIdC@_) =
                _exp2IpIdC
            -- "PresentationAG_Generated.ag"(line 277, column 14)
            (_exp2OpIdC@_) =
                _exp1IpIdC
            -- "PresentationAG_Generated.ag"(line 276, column 14)
            (_exp1OpIdC@_) =
                _lhsIpIdC + 1
            -- "PresentationAG_Generated.ag"(line 319, column 14)
            (_exp2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 318, column 14)
            (_exp1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 682, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (PowerExpNode _self _lhsIpath) _lhsIpath "PowerExp" [ _exp1IpresXML, _exp2IpresXML ]
            -- "PresentationAG_Generated.ag"(line 904, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (PowerExpNode _self _lhsIpath) _lhsIpath "PowerExp" [ _exp1IpresTree, _exp2IpresTree ]
            -- "LambdaReduce.ag"(line 60, column 7)
            (_reductionEdit@_) =
                case (removeParens _exp1Iself, removeParens _exp2Iself) of
                       (IntExp idd1 idp1 (Int_ _ int1), IntExp _ _ (Int_ _ int2) ) -> [ ("Reduce primitive (^)" , pasteExp _lhsIpath (IntExp idd1 idp1 (Int_ NoIDD (int1^int2))))]
                       _                                         -> []
            -- "LambdaReduce.ag"(line 122, column 7)
            (_substitute@_) =
                \substs -> PowerExp idD_ idP0_ (_exp1Isubstitute substs) (_exp2Isubstitute substs)
            -- "LambdaReduce.ag"(line 164, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                PowerExp idD_ idP0_ _exp1Iself _exp2Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _exp2IlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _exp2Inewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _exp2Ispaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _exp2IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp1Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp1Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp1Oix@_) =
                _lhsIix
            -- copy rule (down)
            (_exp1Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp1Onewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_exp1Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp1Ospaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_exp1OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp1OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp1OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_exp2Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp2Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp2Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp2OlayoutMap@_) =
                _exp1IlayoutMap
            -- copy rule (down)
            (_exp2Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp2Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp2OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp2OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp2OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp2OvarsInScopeAtFocus@_) =
                _exp1IvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_ProductExp :: (IDD) ->
                      (IDP) ->
                      (IDP) ->
                      ([IDP]) ->
                      (T_List_Exp) ->
                      (T_Exp)
sem_Exp_ProductExp (idD_) (idP0_) (idP1_) (ids_) (exps_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expsIcol :: (Int)
            _expsIlayoutMap :: (LayoutMap)
            _expsInewlines :: (Int)
            _expsIpIdC :: (Int)
            _expsIpresTree :: (Presentation)
            _expsIpresXML :: (Presentation)
            _expsIpress :: ([Presentation])
            _expsIself :: (List_Exp)
            _expsIspaces :: (Int)
            _expsIvals :: ([Value])
            _expsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expsOcol :: (Int)
            _expsOenv :: (Bindings)
            _expsOerrs :: ([HeliumMessage])
            _expsOfocusD :: (FocusDoc)
            _expsOlayoutMap :: (LayoutMap)
            _expsOlevel :: (Int)
            _expsOnewlines :: (Int)
            _expsOpIdC :: (Int)
            _expsOpath :: ([Int])
            _expsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expsOspaces :: (Int)
            _expsOtopLevelEnv :: ([(String, String)])
            _expsOtypeEnv :: ([(PathDoc,String)])
            _expsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _expsIcol,_expsIlayoutMap,_expsInewlines,_expsIpIdC,_expsIpresTree,_expsIpresXML,_expsIpress,_expsIself,_expsIspaces,_expsIvals,_expsIvarsInScopeAtFocus) =
                (exps_ (_expsOcol) (_expsOenv) (_expsOerrs) (_expsOfocusD) (_expsOlayoutMap) (_expsOlevel) (_expsOnewlines) (_expsOpIdC) (_expsOpath) (_expsOranges) (_expsOspaces) (_expsOtopLevelEnv) (_expsOtypeEnv) (_expsOvarsInScope) (_expsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 345, column 7)
            (_lhsOpres@_) =
                loc (ProductExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' $    [sep (mkIDP idP0_ _lhsIpIdC 0) "("]
                         ++ let xps = _expsIpress
                                sps = map (\id -> sep id ",") (ids_++ map IDP [_lhsIpIdC .. ] )
                            in  if null xps
                                then []
                                else head xps : concat [ [s,e] | (s,e) <- zip sps (tail xps)]
                         ++ [sep (mkIDP idP1_ _lhsIpIdC 1) ")"]
            -- "PresentationAG.ag"(line 675, column 13)
            (_lhsOspaces@_) =
                0
            -- "PresentationAG.ag"(line 674, column 13)
            (_lhsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 673, column 13)
            (_lhsOcol@_) =
                _expsIcol + 1+1
            -- "PresentationAG.ag"(line 672, column 13)
            (_expsOspaces@_) =
                1
            -- "PresentationAG.ag"(line 671, column 13)
            (_expsOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 670, column 13)
            (_expsOcol@_) =
                _lhsIcol + 1+1
            -- "PresentationAG.ag"(line 667, column 16)
            (_expsOlayoutMap@_) =
                addListToFM _lhsIlayoutMap
                  [ (idP0_, (_lhsInewlines,_lhsIspaces))
                  , (idP1_, (0,1)) ]
            -- "PresentationAG.ag"(line 809, column 7)
            (_expsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 850, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 956, column 17)
            (_lhsOval@_) =
                ProdVal _expsIvals
            -- "PresentationAG_Generated.ag"(line 306, column 16)
            (_lhsOpIdC@_) =
                _expsIpIdC
            -- "PresentationAG_Generated.ag"(line 305, column 16)
            (_expsOpIdC@_) =
                _lhsIpIdC + 3
            -- "PresentationAG_Generated.ag"(line 336, column 16)
            (_expsOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 704, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (ProductExpNode _self _lhsIpath) _lhsIpath "ProductExp" [ _expsIpresXML ]
            -- "PresentationAG_Generated.ag"(line 926, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (ProductExpNode _self _lhsIpath) _lhsIpath "ProductExp" [ _expsIpresTree ]
            -- "LambdaReduce.ag"(line 111, column 7)
            (_reductionEdit@_) =
                []
            -- "LambdaReduce.ag"(line 148, column 7)
            (_substitute@_) =
                \substs -> _self
            -- "LambdaReduce.ag"(line 186, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                ProductExp idD_ idP0_ idP1_ ids_ _expsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _expsIlayoutMap
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expsIvarsInScopeAtFocus
            -- copy rule (down)
            (_expsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_expsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_expsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expsOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_expsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_expsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_expsOvarsInScope@_) =
                _lhsIvarsInScope
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
sem_Exp_TimesExp :: (IDD) ->
                    (IDP) ->
                    (T_Exp) ->
                    (T_Exp) ->
                    (T_Exp)
sem_Exp_TimesExp (idD_) (idP0_) (exp1_) (exp2_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlamBody :: (([(String, Exp)] -> Exp))
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Exp)
            _lhsOspaces :: (Int)
            _lhsOsubstitute :: (( [(String, Exp)] -> Exp ))
            _lhsOtype :: (String)
            _lhsOval :: (Value)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Icol :: (Int)
            _exp1IlamBody :: (([(String, Exp)] -> Exp))
            _exp1IlayoutMap :: (LayoutMap)
            _exp1Inewlines :: (Int)
            _exp1IpIdC :: (Int)
            _exp1Ipres :: (Presentation)
            _exp1IpresTree :: (Presentation)
            _exp1IpresXML :: (Presentation)
            _exp1Iself :: (Exp)
            _exp1Ispaces :: (Int)
            _exp1Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp1Itype :: (String)
            _exp1Ival :: (Value)
            _exp1IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp1Ocol :: (Int)
            _exp1Oenv :: (Bindings)
            _exp1Oerrs :: ([HeliumMessage])
            _exp1OfocusD :: (FocusDoc)
            _exp1Oix :: (Int)
            _exp1OlayoutMap :: (LayoutMap)
            _exp1Olevel :: (Int)
            _exp1Onewlines :: (Int)
            _exp1OpIdC :: (Int)
            _exp1Opath :: ([Int])
            _exp1Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp1Ospaces :: (Int)
            _exp1OtopLevelEnv :: ([(String, String)])
            _exp1OtypeEnv :: ([(PathDoc,String)])
            _exp1OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp1OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Icol :: (Int)
            _exp2IlamBody :: (([(String, Exp)] -> Exp))
            _exp2IlayoutMap :: (LayoutMap)
            _exp2Inewlines :: (Int)
            _exp2IpIdC :: (Int)
            _exp2Ipres :: (Presentation)
            _exp2IpresTree :: (Presentation)
            _exp2IpresXML :: (Presentation)
            _exp2Iself :: (Exp)
            _exp2Ispaces :: (Int)
            _exp2Isubstitute :: (( [(String, Exp)] -> Exp ))
            _exp2Itype :: (String)
            _exp2Ival :: (Value)
            _exp2IvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _exp2Ocol :: (Int)
            _exp2Oenv :: (Bindings)
            _exp2Oerrs :: ([HeliumMessage])
            _exp2OfocusD :: (FocusDoc)
            _exp2Oix :: (Int)
            _exp2OlayoutMap :: (LayoutMap)
            _exp2Olevel :: (Int)
            _exp2Onewlines :: (Int)
            _exp2OpIdC :: (Int)
            _exp2Opath :: ([Int])
            _exp2Oranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _exp2Ospaces :: (Int)
            _exp2OtopLevelEnv :: ([(String, String)])
            _exp2OtypeEnv :: ([(PathDoc,String)])
            _exp2OvarsInScope :: (FiniteMap String (PathDoc, String))
            _exp2OvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _exp1Icol,_exp1IlamBody,_exp1IlayoutMap,_exp1Inewlines,_exp1IpIdC,_exp1Ipres,_exp1IpresTree,_exp1IpresXML,_exp1Iself,_exp1Ispaces,_exp1Isubstitute,_exp1Itype,_exp1Ival,_exp1IvarsInScopeAtFocus) =
                (exp1_ (_exp1Ocol) (_exp1Oenv) (_exp1Oerrs) (_exp1OfocusD) (_exp1Oix) (_exp1OlayoutMap) (_exp1Olevel) (_exp1Onewlines) (_exp1OpIdC) (_exp1Opath) (_exp1Oranges) (_exp1Ospaces) (_exp1OtopLevelEnv) (_exp1OtypeEnv) (_exp1OvarsInScope) (_exp1OvarsInScopeAtFocus))
            ( _exp2Icol,_exp2IlamBody,_exp2IlayoutMap,_exp2Inewlines,_exp2IpIdC,_exp2Ipres,_exp2IpresTree,_exp2IpresXML,_exp2Iself,_exp2Ispaces,_exp2Isubstitute,_exp2Itype,_exp2Ival,_exp2IvarsInScopeAtFocus) =
                (exp2_ (_exp2Ocol) (_exp2Oenv) (_exp2Oerrs) (_exp2OfocusD) (_exp2Oix) (_exp2OlayoutMap) (_exp2Olevel) (_exp2Onewlines) (_exp2OpIdC) (_exp2Opath) (_exp2Oranges) (_exp2Ospaces) (_exp2OtopLevelEnv) (_exp2OtypeEnv) (_exp2OvarsInScope) (_exp2OvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 250, column 7)
            (_lhsOpres@_) =
                loc (TimesExpNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $ addReductionPopupItems _reductionEdit $
                  row' [_exp1Ipres , op (mkIDP idP0_ _lhsIpIdC 0) "*", _exp2Ipres]
            -- "PresentationAG.ag"(line 582, column 13)
            (_lhsOcol@_) =
                _exp2Icol
            -- "PresentationAG.ag"(line 581, column 13)
            (_exp2Ospaces@_) =
                1
            -- "PresentationAG.ag"(line 580, column 13)
            (_exp2Onewlines@_) =
                0
            -- "PresentationAG.ag"(line 579, column 13)
            (_exp2Ocol@_) =
                _exp1Icol + 3
            -- "PresentationAG.ag"(line 578, column 13)
            (_exp1Ocol@_) =
                _lhsIcol
            -- "PresentationAG.ag"(line 577, column 14)
            (_exp1OlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (0,1)
            -- "PresentationAG.ag"(line 783, column 7)
            (_exp1OvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 824, column 7)
            (_type@_) =
                lookupType _lhsItypeEnv _lhsIpath
            -- "PresentationAG.ag"(line 929, column 17)
            (_lhsOval@_) =
                evaluateIntOp (*) _exp1Ival _exp2Ival
            -- "PresentationAG_Generated.ag"(line 272, column 14)
            (_lhsOpIdC@_) =
                _exp2IpIdC
            -- "PresentationAG_Generated.ag"(line 271, column 14)
            (_exp2OpIdC@_) =
                _exp1IpIdC
            -- "PresentationAG_Generated.ag"(line 270, column 14)
            (_exp1OpIdC@_) =
                _lhsIpIdC + 1
            -- "PresentationAG_Generated.ag"(line 315, column 14)
            (_exp2Opath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 314, column 14)
            (_exp1Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 678, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (TimesExpNode _self _lhsIpath) _lhsIpath "TimesExp" [ _exp1IpresXML, _exp2IpresXML ]
            -- "PresentationAG_Generated.ag"(line 900, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (TimesExpNode _self _lhsIpath) _lhsIpath "TimesExp" [ _exp1IpresTree, _exp2IpresTree ]
            -- "LambdaReduce.ag"(line 52, column 7)
            (_reductionEdit@_) =
                case (removeParens _exp1Iself, removeParens _exp2Iself) of
                       (IntExp idd1 idp1 (Int_ _ int1), IntExp _ _ (Int_ _ int2) ) -> [ ("Reduce primitive (*)" , pasteExp _lhsIpath (IntExp idd1 idp1 (Int_ NoIDD (int1*int2))))]
                       _                                         -> []
            -- "LambdaReduce.ag"(line 118, column 7)
            (_substitute@_) =
                \substs -> TimesExp idD_ idP0_ (_exp1Isubstitute substs) (_exp2Isubstitute substs)
            -- "LambdaReduce.ag"(line 160, column 7)
            (_lhsOlamBody@_) =
                _substitute
            -- self rule
            (_self@_) =
                TimesExp idD_ idP0_ _exp1Iself _exp2Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _exp2IlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _exp2Inewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _exp2Ispaces
            -- copy rule (from local)
            (_lhsOsubstitute@_) =
                _substitute
            -- copy rule (from local)
            (_lhsOtype@_) =
                _type
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _exp2IvarsInScopeAtFocus
            -- copy rule (down)
            (_exp1Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp1Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp1OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp1Oix@_) =
                _lhsIix
            -- copy rule (down)
            (_exp1Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp1Onewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_exp1Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp1Ospaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_exp1OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp1OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp1OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_exp2Oenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_exp2Oerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_exp2OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_exp2Oix@_) =
                _lhsIix
            -- copy rule (chain)
            (_exp2OlayoutMap@_) =
                _exp1IlayoutMap
            -- copy rule (down)
            (_exp2Olevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_exp2Oranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_exp2OtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_exp2OtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_exp2OvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_exp2OvarsInScopeAtFocus@_) =
                _exp1IvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlamBody,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOsubstitute,_lhsOtype,_lhsOval,_lhsOvarsInScopeAtFocus)
-- Ident -------------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      firstToken           : IDP
      idsPres              : Presentation
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF
      str                  : String

-}
{-
   local variables for Ident.HoleIdent:
      self

-}
{-
   local variables for Ident.Ident:
      self

-}
{-
   local variables for Ident.ParseErrIdent:
      self

-}
-- semantic domain
type T_Ident = (Int) ->
               (FocusDoc) ->
               (Int) ->
               (LayoutMap) ->
               (Int) ->
               (Int) ->
               (Int) ->
               ([Int]) ->
               (([PathDoc],[PathDoc],[PathDoc])) ->
               (Int) ->
               (FiniteMap String (PathDoc, String)) ->
               (FiniteMap String (PathDoc, String)) ->
               ( (Int),(IDP),(Presentation),(LayoutMap),(Int),(Int),(Presentation),(Presentation),(Presentation),(Ident),(Int),(String),(FiniteMap String (PathDoc, String)))
-- cata
sem_Ident :: (Ident) ->
             (T_Ident)
sem_Ident ((HoleIdent )) =
    (sem_Ident_HoleIdent )
sem_Ident ((Ident (_idD) (_idP0) (_idP1) (_string_))) =
    (sem_Ident_Ident (_idD) (_idP0) (_idP1) ((sem_String_ (_string_))))
sem_Ident ((ParseErrIdent (_node) (_presentation))) =
    (sem_Ident_ParseErrIdent (_node) (_presentation))
sem_Ident_HoleIdent :: (T_Ident)
sem_Ident_HoleIdent  =
    \ _lhsIcol
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOfirstToken :: (IDP)
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Ident)
            _lhsOspaces :: (Int)
            _lhsOstr :: (String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 564, column 12)
            (_lhsOfirstToken@_) =
                NoIDP
            -- "PresentationAG.ag"(line 924, column 19)
            (_lhsOstr@_) =
                ""
            -- "PresentationAG.ag"(line 1095, column 24)
            (_lhsOidsPres@_) =
                presHole _lhsIfocusD "Ident" (HoleIdentNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 258, column 19)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Ident" (HoleIdentNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 671, column 19)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Ident" (HoleIdentNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 893, column 19)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Ident" (HoleIdentNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleIdent
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOfirstToken,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOstr,_lhsOvarsInScopeAtFocus)
sem_Ident_Ident :: (IDD) ->
                   (IDP) ->
                   (IDP) ->
                   (T_String_) ->
                   (T_Ident)
sem_Ident_Ident (idD_) (idP0_) (idP1_) (string__) =
    \ _lhsIcol
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOfirstToken :: (IDP)
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Ident)
            _lhsOspaces :: (Int)
            _lhsOstr :: (String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _string_Ilength :: (Int)
            _string_IpIdC :: (Int)
            _string_Ipres :: (Presentation)
            _string_IpresTree :: (Presentation)
            _string_IpresXML :: (Presentation)
            _string_Iself :: (String_)
            _string_Istr :: (String)
            _string_OfocusD :: (FocusDoc)
            _string_Oix :: (Int)
            _string_OpIdC :: (Int)
            _string_Opath :: ([Int])
            ( _string_Ilength,_string_IpIdC,_string_Ipres,_string_IpresTree,_string_IpresXML,_string_Iself,_string_Istr) =
                (string__ (_string_OfocusD) (_string_Oix) (_string_OpIdC) (_string_Opath))
            -- "PresentationAG.ag"(line 231, column 7)
            (_lhsOpres@_) =
                loc (IdentNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  squiggleRanges _lhsIranges _lhsIpath $
                  row' [ text' (mkIDP idP0_ _lhsIpIdC 0)  "", _string_Ipres, text ""]
            -- "PresentationAG.ag"(line 560, column 12)
            (_lhsOfirstToken@_) =
                idP0_
            -- "PresentationAG.ag"(line 559, column 12)
            (_lhsOcol@_) =
                _lhsIcol+ length _string_Istr
            -- "PresentationAG.ag"(line 558, column 12)
            (_lhsOlayoutMap@_) =
                addToFM _lhsIlayoutMap idP0_ (_lhsInewlines,_lhsIspaces)
            -- "PresentationAG.ag"(line 775, column 7)
            (_lhsOvarsInScopeAtFocus@_) =
                if (PathD _lhsIpath) == _lhsIfocusD then _lhsIvarsInScope else _lhsIvarsInScopeAtFocus
            -- "PresentationAG.ag"(line 923, column 19)
            (_lhsOstr@_) =
                _string_Istr
            -- "PresentationAG.ag"(line 1093, column 24)
            (_lhsOidsPres@_) =
                loc (IdentNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ _string_Ipres ]
            -- "PresentationAG_Generated.ag"(line 257, column 11)
            (_lhsOpIdC@_) =
                _string_IpIdC
            -- "PresentationAG_Generated.ag"(line 256, column 11)
            (_string_OpIdC@_) =
                _lhsIpIdC + 2
            -- "PresentationAG_Generated.ag"(line 263, column 11)
            (_string_Opath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 670, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (IdentNode _self _lhsIpath) _lhsIpath "Ident" [ _string_IpresXML ]
            -- "PresentationAG_Generated.ag"(line 892, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (IdentNode _self _lhsIpath) _lhsIpath "Ident" [ _string_IpresTree ]
            -- self rule
            (_self@_) =
                Ident idD_ idP0_ idP1_ _string_Iself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_string_OfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_string_Oix@_) =
                _lhsIix
        in  ( _lhsOcol,_lhsOfirstToken,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOstr,_lhsOvarsInScopeAtFocus)
sem_Ident_ParseErrIdent :: (Node) ->
                           (Presentation) ->
                           (T_Ident)
sem_Ident_ParseErrIdent (node_) (presentation_) =
    \ _lhsIcol
      _lhsIfocusD
      _lhsIix
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOfirstToken :: (IDP)
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Ident)
            _lhsOspaces :: (Int)
            _lhsOstr :: (String)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 562, column 12)
            (_lhsOfirstToken@_) =
                NoIDP
            -- "PresentationAG.ag"(line 925, column 19)
            (_lhsOstr@_) =
                ""
            -- "PresentationAG.ag"(line 1096, column 24)
            (_lhsOidsPres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 259, column 19)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 672, column 19)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 894, column 19)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrIdent node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOfirstToken,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOspaces,_lhsOstr,_lhsOvarsInScopeAtFocus)
-- Int_ --------------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]

   chained attributes:
      pIdC                 : Int

   synthesised attributes:
      int                  : Int
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for Int_.HoleInt_:
      self

-}
{-
   local variables for Int_.Int_:
      self

-}
{-
   local variables for Int_.ParseErrInt_:
      self

-}
-- semantic domain
type T_Int_ = (FocusDoc) ->
              (Int) ->
              (Int) ->
              ([Int]) ->
              ( (Int),(Int),(Presentation),(Presentation),(Presentation),(Int_))
-- cata
sem_Int_ :: (Int_) ->
            (T_Int_)
sem_Int_ ((HoleInt_ )) =
    (sem_Int__HoleInt_ )
sem_Int_ ((Int_ (_idd) (_int))) =
    (sem_Int__Int_ (_idd) (_int))
sem_Int_ ((ParseErrInt_ (_node) (_presentation))) =
    (sem_Int__ParseErrInt_ (_node) (_presentation))
sem_Int__HoleInt_ :: (T_Int_)
sem_Int__HoleInt_  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOint :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Int_)
            -- "PresentationAG.ag"(line 1422, column 13)
            (_lhsOint@_) =
                0
            -- "PresentationAG_Generated.ag"(line 500, column 18)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Int_" (HoleInt_Node _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 797, column 18)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Int_" (HoleInt_Node _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1019, column 18)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Int_" (HoleInt_Node _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleInt_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOint,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
sem_Int__Int_ :: (IDD) ->
                 (Int) ->
                 (T_Int_)
sem_Int__Int_ (idd_) (int_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOint :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Int_)
            -- "PresentationAG.ag"(line 1416, column 7)
            (_lhsOpres@_) =
                loc (Int_Node _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [text $ show int_, text ""]
            -- "PresentationAG.ag"(line 1420, column 13)
            (_lhsOint@_) =
                int_
            -- "PresentationAG_Generated.ag"(line 796, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (Int_Node _self _lhsIpath) _lhsIpath "Int_" [ presentPrimXMLInt int_ ]
            -- "PresentationAG_Generated.ag"(line 1018, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (Int_Node _self _lhsIpath) _lhsIpath "Int_" [ presentPrimTreeInt int_ ]
            -- self rule
            (_self@_) =
                Int_ idd_ int_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOint,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
sem_Int__ParseErrInt_ :: (Node) ->
                         (Presentation) ->
                         (T_Int_)
sem_Int__ParseErrInt_ (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOint :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Int_)
            -- "PresentationAG.ag"(line 1422, column 13)
            (_lhsOint@_) =
                0
            -- "PresentationAG_Generated.ag"(line 501, column 18)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 798, column 18)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1020, column 18)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrInt_ node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOint,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself)
-- Item --------------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      listType             : ListType
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      typeLoc              : Presentation -> Presentation
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      pres2                : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for Item.HeliumItem:
      self

-}
{-
   local variables for Item.HoleItem:
      self

-}
{-
   local variables for Item.ListItem:
      self

-}
{-
   local variables for Item.ParseErrItem:
      self

-}
{-
   local variables for Item.StringItem:
      self

-}
-- semantic domain
type T_Item = (FocusDoc) ->
              (Int) ->
              (ListType) ->
              (Int) ->
              ([Int]) ->
              (([PathDoc],[PathDoc],[PathDoc])) ->
              (Presentation -> Presentation) ->
              (FiniteMap String (PathDoc, String)) ->
              (FiniteMap String (PathDoc, String)) ->
              ( (Int),(Presentation),(Presentation),(Presentation),(Presentation),(Item),(FiniteMap String (PathDoc, String)))
-- cata
sem_Item :: (Item) ->
            (T_Item)
sem_Item ((HeliumItem (_idd) (_exp))) =
    (sem_Item_HeliumItem (_idd) ((sem_Exp (_exp))))
sem_Item ((HoleItem )) =
    (sem_Item_HoleItem )
sem_Item ((ListItem (_idd) (_itemList))) =
    (sem_Item_ListItem (_idd) ((sem_ItemList (_itemList))))
sem_Item ((ParseErrItem (_node) (_presentation))) =
    (sem_Item_ParseErrItem (_node) (_presentation))
sem_Item ((StringItem (_idd) (_string))) =
    (sem_Item_StringItem (_idd) ((sem_String_ (_string))))
sem_Item_HeliumItem :: (IDD) ->
                       (T_Exp) ->
                       (T_Item)
sem_Item_HeliumItem (idd_) (exp_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expIcol :: (Int)
            _expIlamBody :: (([(String, Exp)] -> Exp))
            _expIlayoutMap :: (LayoutMap)
            _expInewlines :: (Int)
            _expIpIdC :: (Int)
            _expIpres :: (Presentation)
            _expIpresTree :: (Presentation)
            _expIpresXML :: (Presentation)
            _expIself :: (Exp)
            _expIspaces :: (Int)
            _expIsubstitute :: (( [(String, Exp)] -> Exp ))
            _expItype :: (String)
            _expIval :: (Value)
            _expIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _expOcol :: (Int)
            _expOenv :: (Bindings)
            _expOerrs :: ([HeliumMessage])
            _expOfocusD :: (FocusDoc)
            _expOix :: (Int)
            _expOlayoutMap :: (LayoutMap)
            _expOlevel :: (Int)
            _expOnewlines :: (Int)
            _expOpIdC :: (Int)
            _expOpath :: ([Int])
            _expOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _expOspaces :: (Int)
            _expOtopLevelEnv :: ([(String, String)])
            _expOtypeEnv :: ([(PathDoc,String)])
            _expOvarsInScope :: (FiniteMap String (PathDoc, String))
            _expOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _expIcol,_expIlamBody,_expIlayoutMap,_expInewlines,_expIpIdC,_expIpres,_expIpresTree,_expIpresXML,_expIself,_expIspaces,_expIsubstitute,_expItype,_expIval,_expIvarsInScopeAtFocus) =
                (exp_ (_expOcol) (_expOenv) (_expOerrs) (_expOfocusD) (_expOix) (_expOlayoutMap) (_expOlevel) (_expOnewlines) (_expOpIdC) (_expOpath) (_expOranges) (_expOspaces) (_expOtopLevelEnv) (_expOtypeEnv) (_expOvarsInScope) (_expOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1132, column 16)
            (_expOenv@_) =
                []
            -- "PresentationAG.ag"(line 1131, column 16)
            (_expOtopLevelEnv@_) =
                []
            -- "PresentationAG.ag"(line 1130, column 16)
            (_expOtypeEnv@_) =
                []
            -- "PresentationAG.ag"(line 1129, column 16)
            (_expOerrs@_) =
                []
            -- "PresentationAG.ag"(line 1127, column 16)
            (_expOlayoutMap@_) =
                emptyFM
            -- "PresentationAG.ag"(line 1126, column 16)
            (_expOlevel@_) =
                0
            -- "PresentationAG.ag"(line 1124, column 16)
            (_expOspaces@_) =
                0
            -- "PresentationAG.ag"(line 1123, column 16)
            (_expOnewlines@_) =
                0
            -- "PresentationAG.ag"(line 1122, column 16)
            (_expOcol@_) =
                0
            -- "PresentationAG.ag"(line 1226, column 20)
            (_lhsOpres@_) =
                loc (HeliumItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col' [ text "HeliumItem $"
                       , row [text "  ", _expIpres]
                       ]
            -- "PresentationAG.ag"(line 1320, column 20)
            (_lhsOpres2@_) =
                loc (HeliumItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [itemStart _lhsIix _lhsIlistType _lhsItypeLoc, _expIpres
                                                            `withColor` black
                                                            `withbgColor` white
                                                            `withFontFam` "Courier New" ]
            -- "PresentationAG_Generated.ag"(line 476, column 16)
            (_lhsOpIdC@_) =
                _expIpIdC
            -- "PresentationAG_Generated.ag"(line 475, column 16)
            (_expOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 485, column 16)
            (_expOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 776, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (HeliumItemNode _self _lhsIpath) _lhsIpath "HeliumItem" [ _expIpresXML ]
            -- "PresentationAG_Generated.ag"(line 998, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (HeliumItemNode _self _lhsIpath) _lhsIpath "HeliumItem" [ _expIpresTree ]
            -- self rule
            (_self@_) =
                HeliumItem idd_ _expIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _expIvarsInScopeAtFocus
            -- copy rule (down)
            (_expOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_expOix@_) =
                _lhsIix
            -- copy rule (down)
            (_expOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_expOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_expOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_Item_HoleItem :: (T_Item)
sem_Item_HoleItem  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1374, column 18)
            (_lhsOpres2@_) =
                presHole _lhsIfocusD "Item" (HoleItemNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 479, column 18)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Item" (HoleItemNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 779, column 18)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Item" (HoleItemNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1001, column 18)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Item" (HoleItemNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleItem
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_Item_ListItem :: (IDD) ->
                     (T_ItemList) ->
                     (T_Item)
sem_Item_ListItem (idd_) (itemList_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _itemListIpIdC :: (Int)
            _itemListIpres :: (Presentation)
            _itemListIpres2 :: (Presentation)
            _itemListIpresTree :: (Presentation)
            _itemListIpresXML :: (Presentation)
            _itemListIself :: (ItemList)
            _itemListIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _itemListOfocusD :: (FocusDoc)
            _itemListOix :: (Int)
            _itemListOpIdC :: (Int)
            _itemListOpath :: ([Int])
            _itemListOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _itemListOvarsInScope :: (FiniteMap String (PathDoc, String))
            _itemListOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _itemListIpIdC,_itemListIpres,_itemListIpres2,_itemListIpresTree,_itemListIpresXML,_itemListIself,_itemListIvarsInScopeAtFocus) =
                (itemList_ (_itemListOfocusD) (_itemListOix) (_itemListOpIdC) (_itemListOpath) (_itemListOranges) (_itemListOvarsInScope) (_itemListOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1230, column 20)
            (_lhsOpres@_) =
                loc (ListItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col' [ text "ListItem $"
                       , row [text "  ", _itemListIpres]
                       ]
            -- "PresentationAG.ag"(line 1325, column 20)
            (_lhsOpres2@_) =
                loc (ListItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ text "   ",
                         _itemListIpres2
                                     `withFontSize_` (\fs -> if fs > 5 then fs * 80 `div` 100 else fs)
                       ]
            -- "PresentationAG_Generated.ag"(line 478, column 14)
            (_lhsOpIdC@_) =
                _itemListIpIdC
            -- "PresentationAG_Generated.ag"(line 477, column 14)
            (_itemListOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 486, column 14)
            (_itemListOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 778, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (ListItemNode _self _lhsIpath) _lhsIpath "ListItem" [ _itemListIpresXML ]
            -- "PresentationAG_Generated.ag"(line 1000, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (ListItemNode _self _lhsIpath) _lhsIpath "ListItem" [ _itemListIpresTree ]
            -- self rule
            (_self@_) =
                ListItem idd_ _itemListIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _itemListIvarsInScopeAtFocus
            -- copy rule (down)
            (_itemListOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_itemListOix@_) =
                _lhsIix
            -- copy rule (down)
            (_itemListOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_itemListOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_itemListOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_Item_ParseErrItem :: (Node) ->
                         (Presentation) ->
                         (T_Item)
sem_Item_ParseErrItem (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1375, column 18)
            (_lhsOpres2@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 480, column 18)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 780, column 18)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1002, column 18)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrItem node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_Item_StringItem :: (IDD) ->
                       (T_String_) ->
                       (T_Item)
sem_Item_StringItem (idd_) (string_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _stringIlength :: (Int)
            _stringIpIdC :: (Int)
            _stringIpres :: (Presentation)
            _stringIpresTree :: (Presentation)
            _stringIpresXML :: (Presentation)
            _stringIself :: (String_)
            _stringIstr :: (String)
            _stringOfocusD :: (FocusDoc)
            _stringOix :: (Int)
            _stringOpIdC :: (Int)
            _stringOpath :: ([Int])
            ( _stringIlength,_stringIpIdC,_stringIpres,_stringIpresTree,_stringIpresXML,_stringIself,_stringIstr) =
                (string_ (_stringOfocusD) (_stringOix) (_stringOpIdC) (_stringOpath))
            -- "PresentationAG.ag"(line 1220, column 20)
            (_lhsOpres@_) =
                loc (StringItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                   row' [ text "StringItem "
                        , row' [ text "\""
                               , _stringIpres
                               , text "\""
                               ] `withColor` darkViolet ]
            -- "PresentationAG.ag"(line 1318, column 20)
            (_lhsOpres2@_) =
                loc (StringItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [itemStart _lhsIix _lhsIlistType _lhsItypeLoc, _stringIpres]
            -- "PresentationAG_Generated.ag"(line 474, column 16)
            (_lhsOpIdC@_) =
                _stringIpIdC
            -- "PresentationAG_Generated.ag"(line 473, column 16)
            (_stringOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 484, column 16)
            (_stringOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 774, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (StringItemNode _self _lhsIpath) _lhsIpath "StringItem" [ _stringIpresXML ]
            -- "PresentationAG_Generated.ag"(line 996, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (StringItemNode _self _lhsIpath) _lhsIpath "StringItem" [ _stringIpresTree ]
            -- self rule
            (_self@_) =
                StringItem idd_ _stringIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_stringOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_stringOix@_) =
                _lhsIix
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
-- ItemList ----------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      pres2                : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for ItemList.HoleItemList:
      self

-}
{-
   local variables for ItemList.ItemList:
      self

-}
{-
   local variables for ItemList.ParseErrItemList:
      self

-}
-- semantic domain
type T_ItemList = (FocusDoc) ->
                  (Int) ->
                  (Int) ->
                  ([Int]) ->
                  (([PathDoc],[PathDoc],[PathDoc])) ->
                  (FiniteMap String (PathDoc, String)) ->
                  (FiniteMap String (PathDoc, String)) ->
                  ( (Int),(Presentation),(Presentation),(Presentation),(Presentation),(ItemList),(FiniteMap String (PathDoc, String)))
-- cata
sem_ItemList :: (ItemList) ->
                (T_ItemList)
sem_ItemList ((HoleItemList )) =
    (sem_ItemList_HoleItemList )
sem_ItemList ((ItemList (_idd) (_listType) (_items))) =
    (sem_ItemList_ItemList (_idd) ((sem_ListType (_listType))) ((sem_List_Item (_items))))
sem_ItemList ((ParseErrItemList (_node) (_presentation))) =
    (sem_ItemList_ParseErrItemList (_node) (_presentation))
sem_ItemList_HoleItemList :: (T_ItemList)
sem_ItemList_HoleItemList  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ItemList)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1362, column 22)
            (_lhsOpres2@_) =
                presHole _lhsIfocusD "ItemList" (HoleItemListNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 458, column 22)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "ItemList" (HoleItemListNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 759, column 22)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "ItemList" (HoleItemListNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 981, column 22)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "ItemList" (HoleItemListNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleItemList
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_ItemList_ItemList :: (IDD) ->
                         (T_ListType) ->
                         (T_List_Item) ->
                         (T_ItemList)
sem_ItemList_ItemList (idd_) (listType_) (items_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ItemList)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _listTypeIpIdC :: (Int)
            _listTypeIpres :: (Presentation)
            _listTypeIpres2 :: (Presentation)
            _listTypeIpresTree :: (Presentation)
            _listTypeIpresXML :: (Presentation)
            _listTypeIself :: (ListType)
            _listTypeItypeLoc :: (Presentation -> Presentation)
            _listTypeIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _listTypeOfocusD :: (FocusDoc)
            _listTypeOix :: (Int)
            _listTypeOpIdC :: (Int)
            _listTypeOpath :: ([Int])
            _listTypeOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _listTypeOvarsInScope :: (FiniteMap String (PathDoc, String))
            _listTypeOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _itemsIpIdC :: (Int)
            _itemsIpres :: (Presentation)
            _itemsIpres2 :: (Presentation)
            _itemsIpresTree :: (Presentation)
            _itemsIpresXML :: (Presentation)
            _itemsIpress :: ([Presentation])
            _itemsIpress2 :: ([Presentation])
            _itemsIself :: (List_Item)
            _itemsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _itemsOfocusD :: (FocusDoc)
            _itemsOlistType :: (ListType)
            _itemsOpIdC :: (Int)
            _itemsOpath :: ([Int])
            _itemsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _itemsOtypeLoc :: (Presentation -> Presentation)
            _itemsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _itemsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _listTypeIpIdC,_listTypeIpres,_listTypeIpres2,_listTypeIpresTree,_listTypeIpresXML,_listTypeIself,_listTypeItypeLoc,_listTypeIvarsInScopeAtFocus) =
                (listType_ (_listTypeOfocusD) (_listTypeOix) (_listTypeOpIdC) (_listTypeOpath) (_listTypeOranges) (_listTypeOvarsInScope) (_listTypeOvarsInScopeAtFocus))
            ( _itemsIpIdC,_itemsIpres,_itemsIpres2,_itemsIpresTree,_itemsIpresXML,_itemsIpress,_itemsIpress2,_itemsIself,_itemsIvarsInScopeAtFocus) =
                (items_ (_itemsOfocusD) (_itemsOlistType) (_itemsOpIdC) (_itemsOpath) (_itemsOranges) (_itemsOtypeLoc) (_itemsOvarsInScope) (_itemsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1194, column 14)
            (_lhsOpres@_) =
                loc (ItemListNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col' [ row' [ text "ItemList ", _listTypeIpres, text " $"]
                       , _itemsIpres
                    ]
            -- "PresentationAG.ag"(line 1287, column 13)
            (_itemsOtypeLoc@_) =
                _listTypeItypeLoc
            -- "PresentationAG.ag"(line 1286, column 13)
            (_itemsOlistType@_) =
                _listTypeIself
            -- "PresentationAG.ag"(line 1281, column 14)
            (_lhsOpres2@_) =
                loc (ItemListNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [ _listTypeIpres2
                       , _itemsIpres2
                       ]
            -- "PresentationAG_Generated.ag"(line 457, column 14)
            (_lhsOpIdC@_) =
                _itemsIpIdC
            -- "PresentationAG_Generated.ag"(line 456, column 14)
            (_itemsOpIdC@_) =
                _listTypeIpIdC
            -- "PresentationAG_Generated.ag"(line 455, column 14)
            (_listTypeOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 464, column 14)
            (_itemsOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 463, column 14)
            (_listTypeOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 758, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (ItemListNode _self _lhsIpath) _lhsIpath "ItemList" [ _listTypeIpresXML, _itemsIpresXML ]
            -- "PresentationAG_Generated.ag"(line 980, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (ItemListNode _self _lhsIpath) _lhsIpath "ItemList" [ _listTypeIpresTree, _itemsIpresTree ]
            -- self rule
            (_self@_) =
                ItemList idd_ _listTypeIself _itemsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _itemsIvarsInScopeAtFocus
            -- copy rule (down)
            (_listTypeOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_listTypeOix@_) =
                _lhsIix
            -- copy rule (down)
            (_listTypeOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_listTypeOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_listTypeOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
            -- copy rule (down)
            (_itemsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_itemsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_itemsOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (chain)
            (_itemsOvarsInScopeAtFocus@_) =
                _listTypeIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_ItemList_ParseErrItemList :: (Node) ->
                                 (Presentation) ->
                                 (T_ItemList)
sem_ItemList_ParseErrItemList (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ItemList)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1363, column 22)
            (_lhsOpres2@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 459, column 22)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 760, column 22)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 982, column 22)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrItemList node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
-- ListType ----------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      pres2                : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF
      typeLoc              : Presentation -> Presentation

-}
{-
   local variables for ListType.Alpha:
      self

-}
{-
   local variables for ListType.Bullet:
      self

-}
{-
   local variables for ListType.HoleListType:
      self

-}
{-
   local variables for ListType.Number:
      self

-}
{-
   local variables for ListType.ParseErrListType:
      self

-}
-- semantic domain
type T_ListType = (FocusDoc) ->
                  (Int) ->
                  (Int) ->
                  ([Int]) ->
                  (([PathDoc],[PathDoc],[PathDoc])) ->
                  (FiniteMap String (PathDoc, String)) ->
                  (FiniteMap String (PathDoc, String)) ->
                  ( (Int),(Presentation),(Presentation),(Presentation),(Presentation),(ListType),(Presentation -> Presentation),(FiniteMap String (PathDoc, String)))
-- cata
sem_ListType :: (ListType) ->
                (T_ListType)
sem_ListType ((Alpha (_idd))) =
    (sem_ListType_Alpha (_idd))
sem_ListType ((Bullet (_idd))) =
    (sem_ListType_Bullet (_idd))
sem_ListType ((HoleListType )) =
    (sem_ListType_HoleListType )
sem_ListType ((Number (_idd))) =
    (sem_ListType_Number (_idd))
sem_ListType ((ParseErrListType (_node) (_presentation))) =
    (sem_ListType_ParseErrListType (_node) (_presentation))
sem_ListType_Alpha :: (IDD) ->
                      (T_ListType)
sem_ListType_Alpha (idd_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ListType)
            _lhsOtypeLoc :: (Presentation -> Presentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1216, column 20)
            (_lhsOpres@_) =
                loc (AlphaNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  text "Alpha"
            -- "PresentationAG.ag"(line 1298, column 20)
            (_lhsOtypeLoc@_) =
                loc (AlphaNode _self _lhsIpath)
            -- "PresentationAG.ag"(line 1296, column 20)
            (_lhsOpres2@_) =
                loc (AlphaNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 empty
            -- "PresentationAG_Generated.ag"(line 768, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (AlphaNode _self _lhsIpath) _lhsIpath "Alpha" [  ]
            -- "PresentationAG_Generated.ag"(line 990, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (AlphaNode _self _lhsIpath) _lhsIpath "Alpha" [  ]
            -- self rule
            (_self@_) =
                Alpha idd_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOtypeLoc,_lhsOvarsInScopeAtFocus)
sem_ListType_Bullet :: (IDD) ->
                       (T_ListType)
sem_ListType_Bullet (idd_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ListType)
            _lhsOtypeLoc :: (Presentation -> Presentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1212, column 20)
            (_lhsOpres@_) =
                loc (BulletNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  text "Bullet"
            -- "PresentationAG.ag"(line 1292, column 20)
            (_lhsOtypeLoc@_) =
                loc (BulletNode _self _lhsIpath)
            -- "PresentationAG.ag"(line 1290, column 20)
            (_lhsOpres2@_) =
                loc (BulletNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 empty
            -- "PresentationAG_Generated.ag"(line 764, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (BulletNode _self _lhsIpath) _lhsIpath "Bullet" [  ]
            -- "PresentationAG_Generated.ag"(line 986, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (BulletNode _self _lhsIpath) _lhsIpath "Bullet" [  ]
            -- self rule
            (_self@_) =
                Bullet idd_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOtypeLoc,_lhsOvarsInScopeAtFocus)
sem_ListType_HoleListType :: (T_ListType)
sem_ListType_HoleListType  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ListType)
            _lhsOtypeLoc :: (Presentation -> Presentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1300, column 18)
            (_lhsOtypeLoc@_) =
                id
            -- "PresentationAG.ag"(line 1366, column 22)
            (_lhsOpres2@_) =
                presHole _lhsIfocusD "ListType" (HoleListTypeNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 468, column 22)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "ListType" (HoleListTypeNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 769, column 22)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "ListType" (HoleListTypeNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 991, column 22)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "ListType" (HoleListTypeNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleListType
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOtypeLoc,_lhsOvarsInScopeAtFocus)
sem_ListType_Number :: (IDD) ->
                       (T_ListType)
sem_ListType_Number (idd_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ListType)
            _lhsOtypeLoc :: (Presentation -> Presentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1214, column 20)
            (_lhsOpres@_) =
                loc (NumberNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  text "Number"
            -- "PresentationAG.ag"(line 1295, column 20)
            (_lhsOtypeLoc@_) =
                loc (NumberNode _self _lhsIpath)
            -- "PresentationAG.ag"(line 1293, column 20)
            (_lhsOpres2@_) =
                loc (NumberNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 empty
            -- "PresentationAG_Generated.ag"(line 766, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (NumberNode _self _lhsIpath) _lhsIpath "Number" [  ]
            -- "PresentationAG_Generated.ag"(line 988, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (NumberNode _self _lhsIpath) _lhsIpath "Number" [  ]
            -- self rule
            (_self@_) =
                Number idd_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOtypeLoc,_lhsOvarsInScopeAtFocus)
sem_ListType_ParseErrListType :: (Node) ->
                                 (Presentation) ->
                                 (T_ListType)
sem_ListType_ParseErrListType (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (ListType)
            _lhsOtypeLoc :: (Presentation -> Presentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1299, column 22)
            (_lhsOtypeLoc@_) =
                id
            -- "PresentationAG.ag"(line 1367, column 22)
            (_lhsOpres2@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 469, column 22)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 770, column 22)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 992, column 22)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrListType node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOtypeLoc,_lhsOvarsInScopeAtFocus)
-- List_Alt ----------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      totalMaxLHSLength    : Int
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      alts                 : Bindings
      maxLHSLength         : Int
      presTree             : Presentation
      presXML              : Presentation
      press                : [Presentation]
      self                 : SELF

-}
{-
   local variables for List_Alt.HoleList_Alt:
      self

-}
{-
   local variables for List_Alt.List_Alt:
      self

-}
{-
   local variables for List_Alt.ParseErrList_Alt:
      self

-}
-- semantic domain
type T_List_Alt = (Int) ->
                  (Bindings) ->
                  ([HeliumMessage]) ->
                  (FocusDoc) ->
                  (LayoutMap) ->
                  (Int) ->
                  (Int) ->
                  (Int) ->
                  ([Int]) ->
                  (([PathDoc],[PathDoc],[PathDoc])) ->
                  (Int) ->
                  ([(String, String)]) ->
                  (Int) ->
                  ([(PathDoc,String)]) ->
                  (FiniteMap String (PathDoc, String)) ->
                  (FiniteMap String (PathDoc, String)) ->
                  ( (Bindings),(Int),(LayoutMap),(Int),(Int),(Int),(Presentation),(Presentation),([Presentation]),(List_Alt),(Int),(FiniteMap String (PathDoc, String)))
-- cata
sem_List_Alt :: (List_Alt) ->
                (T_List_Alt)
sem_List_Alt ((HoleList_Alt )) =
    (sem_List_Alt_HoleList_Alt )
sem_List_Alt ((List_Alt (_idd) (_elts))) =
    (sem_List_Alt_List_Alt (_idd) ((sem_ConsList_Alt (_elts))))
sem_List_Alt ((ParseErrList_Alt (_node) (_presentation))) =
    (sem_List_Alt_ParseErrList_Alt (_node) (_presentation))
sem_List_Alt_HoleList_Alt :: (T_List_Alt)
sem_List_Alt_HoleList_Alt  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalts :: (Bindings)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOmaxLHSLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 701, column 9)
            (_lhsOmaxLHSLength@_) =
                0
            -- "PresentationAG.ag"(line 976, column 7)
            (_lhsOalts@_) =
                []
            -- "PresentationAG_Generated.ag"(line 539, column 22)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 823, column 7)
            (_lhsOpresXML@_) =
                loc (List_AltNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presHole _lhsIfocusD "List_Alt" (HoleList_AltNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1045, column 7)
            (_lhsOpresTree@_) =
                loc (List_AltNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "List_Alt" (HoleList_AltNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleList_Alt
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOalts,_lhsOcol,_lhsOlayoutMap,_lhsOmaxLHSLength,_lhsOnewlines,_lhsOpIdC,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_List_Alt_List_Alt :: (IDD) ->
                         (T_ConsList_Alt) ->
                         (T_List_Alt)
sem_List_Alt_List_Alt (idd_) (elts_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalts :: (Bindings)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOmaxLHSLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsIalts :: (Bindings)
            _eltsIcol :: (Int)
            _eltsIlayoutMap :: (LayoutMap)
            _eltsImaxLHSLength :: (Int)
            _eltsInewlines :: (Int)
            _eltsIpIdC :: (Int)
            _eltsIpress :: ([Presentation])
            _eltsIpressTree :: ([Presentation])
            _eltsIpressXML :: ([Presentation])
            _eltsIself :: (ConsList_Alt)
            _eltsIspaces :: (Int)
            _eltsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsOcol :: (Int)
            _eltsOenv :: (Bindings)
            _eltsOerrs :: ([HeliumMessage])
            _eltsOfocusD :: (FocusDoc)
            _eltsOix :: (Int)
            _eltsOlayoutMap :: (LayoutMap)
            _eltsOlevel :: (Int)
            _eltsOnewlines :: (Int)
            _eltsOpIdC :: (Int)
            _eltsOpath :: ([Int])
            _eltsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _eltsOspaces :: (Int)
            _eltsOtopLevelEnv :: ([(String, String)])
            _eltsOtotalMaxLHSLength :: (Int)
            _eltsOtypeEnv :: ([(PathDoc,String)])
            _eltsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _eltsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _eltsIalts,_eltsIcol,_eltsIlayoutMap,_eltsImaxLHSLength,_eltsInewlines,_eltsIpIdC,_eltsIpress,_eltsIpressTree,_eltsIpressXML,_eltsIself,_eltsIspaces,_eltsIvarsInScopeAtFocus) =
                (elts_ (_eltsOcol) (_eltsOenv) (_eltsOerrs) (_eltsOfocusD) (_eltsOix) (_eltsOlayoutMap) (_eltsOlevel) (_eltsOnewlines) (_eltsOpIdC) (_eltsOpath) (_eltsOranges) (_eltsOspaces) (_eltsOtopLevelEnv) (_eltsOtotalMaxLHSLength) (_eltsOtypeEnv) (_eltsOvarsInScope) (_eltsOvarsInScopeAtFocus))
            -- "PresentationAG_Generated.ag"(line 538, column 7)
            (_eltsOix@_) =
                0
            -- "PresentationAG_Generated.ag"(line 537, column 7)
            (_eltsOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 536, column 7)
            (_lhsOpIdC@_) =
                _eltsIpIdC
            -- "PresentationAG_Generated.ag"(line 535, column 7)
            (_eltsOpIdC@_) =
                _lhsIpIdC + 100
            -- "PresentationAG_Generated.ag"(line 531, column 7)
            (_lhsOpress@_) =
                map ( loc (List_AltNode _self _lhsIpath)
                    . presentFocus _lhsIfocusD _lhsIpath )
                    _eltsIpress
            -- "PresentationAG_Generated.ag"(line 817, column 7)
            (_lhsOpresXML@_) =
                loc (List_AltNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                col _eltsIpressXML
            -- "PresentationAG_Generated.ag"(line 1039, column 7)
            (_lhsOpresTree@_) =
                loc (List_AltNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col _eltsIpressTree
            -- self rule
            (_self@_) =
                List_Alt idd_ _eltsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOalts@_) =
                _eltsIalts
            -- copy rule (up)
            (_lhsOcol@_) =
                _eltsIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _eltsIlayoutMap
            -- copy rule (up)
            (_lhsOmaxLHSLength@_) =
                _eltsImaxLHSLength
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _eltsInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _eltsIspaces
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _eltsIvarsInScopeAtFocus
            -- copy rule (down)
            (_eltsOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_eltsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_eltsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_eltsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_eltsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_eltsOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_eltsOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_eltsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_eltsOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_eltsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_eltsOtotalMaxLHSLength@_) =
                _lhsItotalMaxLHSLength
            -- copy rule (down)
            (_eltsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_eltsOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_eltsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOalts,_lhsOcol,_lhsOlayoutMap,_lhsOmaxLHSLength,_lhsOnewlines,_lhsOpIdC,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_List_Alt_ParseErrList_Alt :: (Node) ->
                                 (Presentation) ->
                                 (T_List_Alt)
sem_List_Alt_ParseErrList_Alt (node_) (presentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItotalMaxLHSLength
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOalts :: (Bindings)
            _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOmaxLHSLength :: (Int)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Alt)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 703, column 9)
            (_lhsOmaxLHSLength@_) =
                0
            -- "PresentationAG.ag"(line 974, column 7)
            (_lhsOalts@_) =
                []
            -- "PresentationAG_Generated.ag"(line 540, column 22)
            (_lhsOpress@_) =
                [ presParseErr node_ presentation_ ]
            -- "PresentationAG_Generated.ag"(line 820, column 7)
            (_lhsOpresXML@_) =
                loc (List_AltNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1042, column 7)
            (_lhsOpresTree@_) =
                loc (List_AltNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrList_Alt node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOalts,_lhsOcol,_lhsOlayoutMap,_lhsOmaxLHSLength,_lhsOnewlines,_lhsOpIdC,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
-- List_Decl ---------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      dcls                 : Bindings
      declaredVars         : [(String,(PathDoc,String))]
      idsPres              : Presentation
      parseErrs            : [String]
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      press                : [Presentation]
      self                 : SELF

-}
{-
   local variables for List_Decl.HoleList_Decl:
      self

-}
{-
   local variables for List_Decl.List_Decl:
      self

-}
{-
   local variables for List_Decl.ParseErrList_Decl:
      self

-}
-- semantic domain
type T_List_Decl = (Int) ->
                   (Bindings) ->
                   ([HeliumMessage]) ->
                   (FocusDoc) ->
                   (LayoutMap) ->
                   (Int) ->
                   (Int) ->
                   (Int) ->
                   ([Int]) ->
                   (([PathDoc],[PathDoc],[PathDoc])) ->
                   (Int) ->
                   ([(String, String)]) ->
                   ([(PathDoc,String)]) ->
                   (FiniteMap String (PathDoc, String)) ->
                   (FiniteMap String (PathDoc, String)) ->
                   ( (Int),(Bindings),([(String,(PathDoc,String))]),(Presentation),(LayoutMap),(Int),(Int),([String]),(Presentation),(Presentation),(Presentation),([Presentation]),(List_Decl),(Int),(FiniteMap String (PathDoc, String)))
-- cata
sem_List_Decl :: (List_Decl) ->
                 (T_List_Decl)
sem_List_Decl ((HoleList_Decl )) =
    (sem_List_Decl_HoleList_Decl )
sem_List_Decl ((List_Decl (_idd) (_elts))) =
    (sem_List_Decl_List_Decl (_idd) ((sem_ConsList_Decl (_elts))))
sem_List_Decl ((ParseErrList_Decl (_node) (_presentation))) =
    (sem_List_Decl_ParseErrList_Decl (_node) (_presentation))
sem_List_Decl_HoleList_Decl :: (T_List_Decl)
sem_List_Decl_HoleList_Decl  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcls :: (Bindings)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOparseErrs :: ([String])
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Decl)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 62, column 7)
            (_lhsOparseErrs@_) =
                []
            -- "PresentationAG.ag"(line 168, column 7)
            (_lhsOpres@_) =
                loc (List_DeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "Decls" (HoleList_DeclNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG.ag"(line 909, column 7)
            (_lhsOdcls@_) =
                []
            -- "PresentationAG.ag"(line 1075, column 23)
            (_lhsOidsPres@_) =
                presHole _lhsIfocusD "Decls" (HoleList_DeclNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 513, column 23)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 808, column 7)
            (_lhsOpresXML@_) =
                loc (List_DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presHole _lhsIfocusD "List_Decl" (HoleList_DeclNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1030, column 7)
            (_lhsOpresTree@_) =
                loc (List_DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "List_Decl" (HoleList_DeclNode _self _lhsIpath) _lhsIpath
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                HoleList_Decl
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcls,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOparseErrs,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_List_Decl_List_Decl :: (IDD) ->
                           (T_ConsList_Decl) ->
                           (T_List_Decl)
sem_List_Decl_List_Decl (idd_) (elts_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcls :: (Bindings)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOparseErrs :: ([String])
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Decl)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsIcol :: (Int)
            _eltsIdcls :: (Bindings)
            _eltsIdeclaredVars :: ([(String,(PathDoc,String))])
            _eltsIidsPres :: (Presentation)
            _eltsIlayoutMap :: (LayoutMap)
            _eltsInewlines :: (Int)
            _eltsIpIdC :: (Int)
            _eltsIparseErrs :: ([String])
            _eltsIpress :: ([Presentation])
            _eltsIpressTree :: ([Presentation])
            _eltsIpressXML :: ([Presentation])
            _eltsIself :: (ConsList_Decl)
            _eltsIspaces :: (Int)
            _eltsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsOcol :: (Int)
            _eltsOenv :: (Bindings)
            _eltsOerrs :: ([HeliumMessage])
            _eltsOfocusD :: (FocusDoc)
            _eltsOix :: (Int)
            _eltsOlayoutMap :: (LayoutMap)
            _eltsOlevel :: (Int)
            _eltsOnewlines :: (Int)
            _eltsOpIdC :: (Int)
            _eltsOpath :: ([Int])
            _eltsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _eltsOspaces :: (Int)
            _eltsOtopLevelEnv :: ([(String, String)])
            _eltsOtypeEnv :: ([(PathDoc,String)])
            _eltsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _eltsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _eltsIcol,_eltsIdcls,_eltsIdeclaredVars,_eltsIidsPres,_eltsIlayoutMap,_eltsInewlines,_eltsIpIdC,_eltsIparseErrs,_eltsIpress,_eltsIpressTree,_eltsIpressXML,_eltsIself,_eltsIspaces,_eltsIvarsInScopeAtFocus) =
                (elts_ (_eltsOcol) (_eltsOenv) (_eltsOerrs) (_eltsOfocusD) (_eltsOix) (_eltsOlayoutMap) (_eltsOlevel) (_eltsOnewlines) (_eltsOpIdC) (_eltsOpath) (_eltsOranges) (_eltsOspaces) (_eltsOtopLevelEnv) (_eltsOtypeEnv) (_eltsOvarsInScope) (_eltsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 162, column 7)
            (_lhsOpres@_) =
                loc (List_DeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row _eltsIpress
            -- "PresentationAG.ag"(line 1073, column 23)
            (_lhsOidsPres@_) =
                loc (List_DeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                _eltsIidsPres
            -- "PresentationAG_Generated.ag"(line 512, column 7)
            (_eltsOix@_) =
                0
            -- "PresentationAG_Generated.ag"(line 511, column 7)
            (_eltsOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 510, column 7)
            (_lhsOpIdC@_) =
                _eltsIpIdC
            -- "PresentationAG_Generated.ag"(line 509, column 7)
            (_eltsOpIdC@_) =
                _lhsIpIdC + 100
            -- "PresentationAG_Generated.ag"(line 505, column 7)
            (_lhsOpress@_) =
                map ( loc (List_DeclNode _self _lhsIpath)
                    . presentFocus _lhsIfocusD _lhsIpath )
                    _eltsIpress
            -- "PresentationAG_Generated.ag"(line 802, column 7)
            (_lhsOpresXML@_) =
                loc (List_DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                col _eltsIpressXML
            -- "PresentationAG_Generated.ag"(line 1024, column 7)
            (_lhsOpresTree@_) =
                loc (List_DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col _eltsIpressTree
            -- use rule
            (_lhsOdeclaredVars@_) =
                _eltsIdeclaredVars
            -- self rule
            (_self@_) =
                List_Decl idd_ _eltsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _eltsIcol
            -- copy rule (up)
            (_lhsOdcls@_) =
                _eltsIdcls
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _eltsIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _eltsInewlines
            -- copy rule (up)
            (_lhsOparseErrs@_) =
                _eltsIparseErrs
            -- copy rule (up)
            (_lhsOspaces@_) =
                _eltsIspaces
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _eltsIvarsInScopeAtFocus
            -- copy rule (down)
            (_eltsOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_eltsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_eltsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_eltsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_eltsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_eltsOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_eltsOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_eltsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_eltsOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_eltsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_eltsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_eltsOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_eltsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcls,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOparseErrs,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
sem_List_Decl_ParseErrList_Decl :: (Node) ->
                                   (Presentation) ->
                                   (T_List_Decl)
sem_List_Decl_ParseErrList_Decl (node_) (presentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOdcls :: (Bindings)
            _lhsOdeclaredVars :: ([(String,(PathDoc,String))])
            _lhsOidsPres :: (Presentation)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOparseErrs :: ([String])
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Decl)
            _lhsOspaces :: (Int)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 60, column 7)
            (_lhsOparseErrs@_) =
                []
            -- "PresentationAG.ag"(line 165, column 7)
            (_lhsOpres@_) =
                loc (List_DeclNode _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- "PresentationAG.ag"(line 907, column 7)
            (_lhsOdcls@_) =
                []
            -- "PresentationAG.ag"(line 1076, column 23)
            (_lhsOidsPres@_) =
                empty
            -- "PresentationAG_Generated.ag"(line 514, column 23)
            (_lhsOpress@_) =
                [ presParseErr node_ presentation_ ]
            -- "PresentationAG_Generated.ag"(line 805, column 7)
            (_lhsOpresXML@_) =
                loc (List_DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1027, column 7)
            (_lhsOpresTree@_) =
                loc (List_DeclNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- use rule
            (_lhsOdeclaredVars@_) =
                []
            -- self rule
            (_self@_) =
                ParseErrList_Decl node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOdcls,_lhsOdeclaredVars,_lhsOidsPres,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOparseErrs,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvarsInScopeAtFocus)
-- List_Exp ----------------------------------------------------
{-
   inherited attributes:
      env                  : Bindings
      errs                 : [HeliumMessage]
      focusD               : FocusDoc
      level                : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      topLevelEnv          : [(String, String)]
      typeEnv              : [(PathDoc,String)]
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      col                  : Int
      layoutMap            : LayoutMap
      newlines             : Int
      pIdC                 : Int
      spaces               : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      presTree             : Presentation
      presXML              : Presentation
      press                : [Presentation]
      self                 : SELF
      vals                 : [Value]

-}
{-
   local variables for List_Exp.HoleList_Exp:
      self

-}
{-
   local variables for List_Exp.List_Exp:
      self

-}
{-
   local variables for List_Exp.ParseErrList_Exp:
      self

-}
-- semantic domain
type T_List_Exp = (Int) ->
                  (Bindings) ->
                  ([HeliumMessage]) ->
                  (FocusDoc) ->
                  (LayoutMap) ->
                  (Int) ->
                  (Int) ->
                  (Int) ->
                  ([Int]) ->
                  (([PathDoc],[PathDoc],[PathDoc])) ->
                  (Int) ->
                  ([(String, String)]) ->
                  ([(PathDoc,String)]) ->
                  (FiniteMap String (PathDoc, String)) ->
                  (FiniteMap String (PathDoc, String)) ->
                  ( (Int),(LayoutMap),(Int),(Int),(Presentation),(Presentation),([Presentation]),(List_Exp),(Int),([Value]),(FiniteMap String (PathDoc, String)))
-- cata
sem_List_Exp :: (List_Exp) ->
                (T_List_Exp)
sem_List_Exp ((HoleList_Exp )) =
    (sem_List_Exp_HoleList_Exp )
sem_List_Exp ((List_Exp (_idd) (_elts))) =
    (sem_List_Exp_List_Exp (_idd) ((sem_ConsList_Exp (_elts))))
sem_List_Exp ((ParseErrList_Exp (_node) (_presentation))) =
    (sem_List_Exp_ParseErrList_Exp (_node) (_presentation))
sem_List_Exp_HoleList_Exp :: (T_List_Exp)
sem_List_Exp_HoleList_Exp  =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Exp)
            _lhsOspaces :: (Int)
            _lhsOvals :: ([Value])
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 966, column 7)
            (_lhsOvals@_) =
                []
            -- "PresentationAG_Generated.ag"(line 565, column 22)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 838, column 7)
            (_lhsOpresXML@_) =
                loc (List_ExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presHole _lhsIfocusD "List_Exp" (HoleList_ExpNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1060, column 7)
            (_lhsOpresTree@_) =
                loc (List_ExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "List_Exp" (HoleList_ExpNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleList_Exp
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvals,_lhsOvarsInScopeAtFocus)
sem_List_Exp_List_Exp :: (IDD) ->
                         (T_ConsList_Exp) ->
                         (T_List_Exp)
sem_List_Exp_List_Exp (idd_) (elts_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Exp)
            _lhsOspaces :: (Int)
            _lhsOvals :: ([Value])
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsIcol :: (Int)
            _eltsIlayoutMap :: (LayoutMap)
            _eltsInewlines :: (Int)
            _eltsIpIdC :: (Int)
            _eltsIpress :: ([Presentation])
            _eltsIpressTree :: ([Presentation])
            _eltsIpressXML :: ([Presentation])
            _eltsIself :: (ConsList_Exp)
            _eltsIspaces :: (Int)
            _eltsIvals :: ([Value])
            _eltsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsOcol :: (Int)
            _eltsOenv :: (Bindings)
            _eltsOerrs :: ([HeliumMessage])
            _eltsOfocusD :: (FocusDoc)
            _eltsOix :: (Int)
            _eltsOlayoutMap :: (LayoutMap)
            _eltsOlevel :: (Int)
            _eltsOnewlines :: (Int)
            _eltsOpIdC :: (Int)
            _eltsOpath :: ([Int])
            _eltsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _eltsOspaces :: (Int)
            _eltsOtopLevelEnv :: ([(String, String)])
            _eltsOtypeEnv :: ([(PathDoc,String)])
            _eltsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _eltsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _eltsIcol,_eltsIlayoutMap,_eltsInewlines,_eltsIpIdC,_eltsIpress,_eltsIpressTree,_eltsIpressXML,_eltsIself,_eltsIspaces,_eltsIvals,_eltsIvarsInScopeAtFocus) =
                (elts_ (_eltsOcol) (_eltsOenv) (_eltsOerrs) (_eltsOfocusD) (_eltsOix) (_eltsOlayoutMap) (_eltsOlevel) (_eltsOnewlines) (_eltsOpIdC) (_eltsOpath) (_eltsOranges) (_eltsOspaces) (_eltsOtopLevelEnv) (_eltsOtypeEnv) (_eltsOvarsInScope) (_eltsOvarsInScopeAtFocus))
            -- "PresentationAG_Generated.ag"(line 564, column 7)
            (_eltsOix@_) =
                0
            -- "PresentationAG_Generated.ag"(line 563, column 7)
            (_eltsOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 562, column 7)
            (_lhsOpIdC@_) =
                _eltsIpIdC
            -- "PresentationAG_Generated.ag"(line 561, column 7)
            (_eltsOpIdC@_) =
                _lhsIpIdC + 100
            -- "PresentationAG_Generated.ag"(line 557, column 7)
            (_lhsOpress@_) =
                map ( loc (List_ExpNode _self _lhsIpath)
                    . presentFocus _lhsIfocusD _lhsIpath )
                    _eltsIpress
            -- "PresentationAG_Generated.ag"(line 832, column 7)
            (_lhsOpresXML@_) =
                loc (List_ExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                col _eltsIpressXML
            -- "PresentationAG_Generated.ag"(line 1054, column 7)
            (_lhsOpresTree@_) =
                loc (List_ExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col _eltsIpressTree
            -- self rule
            (_self@_) =
                List_Exp idd_ _eltsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOcol@_) =
                _eltsIcol
            -- copy rule (up)
            (_lhsOlayoutMap@_) =
                _eltsIlayoutMap
            -- copy rule (up)
            (_lhsOnewlines@_) =
                _eltsInewlines
            -- copy rule (up)
            (_lhsOspaces@_) =
                _eltsIspaces
            -- copy rule (up)
            (_lhsOvals@_) =
                _eltsIvals
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _eltsIvarsInScopeAtFocus
            -- copy rule (down)
            (_eltsOcol@_) =
                _lhsIcol
            -- copy rule (down)
            (_eltsOenv@_) =
                _lhsIenv
            -- copy rule (down)
            (_eltsOerrs@_) =
                _lhsIerrs
            -- copy rule (down)
            (_eltsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_eltsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (down)
            (_eltsOlevel@_) =
                _lhsIlevel
            -- copy rule (down)
            (_eltsOnewlines@_) =
                _lhsInewlines
            -- copy rule (down)
            (_eltsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_eltsOspaces@_) =
                _lhsIspaces
            -- copy rule (down)
            (_eltsOtopLevelEnv@_) =
                _lhsItopLevelEnv
            -- copy rule (down)
            (_eltsOtypeEnv@_) =
                _lhsItypeEnv
            -- copy rule (down)
            (_eltsOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_eltsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvals,_lhsOvarsInScopeAtFocus)
sem_List_Exp_ParseErrList_Exp :: (Node) ->
                                 (Presentation) ->
                                 (T_List_Exp)
sem_List_Exp_ParseErrList_Exp (node_) (presentation_) =
    \ _lhsIcol
      _lhsIenv
      _lhsIerrs
      _lhsIfocusD
      _lhsIlayoutMap
      _lhsIlevel
      _lhsInewlines
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIspaces
      _lhsItopLevelEnv
      _lhsItypeEnv
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOcol :: (Int)
            _lhsOlayoutMap :: (LayoutMap)
            _lhsOnewlines :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOself :: (List_Exp)
            _lhsOspaces :: (Int)
            _lhsOvals :: ([Value])
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 964, column 7)
            (_lhsOvals@_) =
                []
            -- "PresentationAG_Generated.ag"(line 566, column 22)
            (_lhsOpress@_) =
                [ presParseErr node_ presentation_ ]
            -- "PresentationAG_Generated.ag"(line 835, column 7)
            (_lhsOpresXML@_) =
                loc (List_ExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1057, column 7)
            (_lhsOpresTree@_) =
                loc (List_ExpNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrList_Exp node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOcol@_) =
                _lhsIcol
            -- copy rule (chain)
            (_lhsOlayoutMap@_) =
                _lhsIlayoutMap
            -- copy rule (chain)
            (_lhsOnewlines@_) =
                _lhsInewlines
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOspaces@_) =
                _lhsIspaces
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOcol,_lhsOlayoutMap,_lhsOnewlines,_lhsOpIdC,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOself,_lhsOspaces,_lhsOvals,_lhsOvarsInScopeAtFocus)
-- List_Item ---------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      listType             : ListType
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      typeLoc              : Presentation -> Presentation
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      pres2                : Presentation
      presTree             : Presentation
      presXML              : Presentation
      press                : [Presentation]
      press2               : [Presentation]
      self                 : SELF

-}
{-
   local variables for List_Item.HoleList_Item:
      self

-}
{-
   local variables for List_Item.List_Item:
      self

-}
{-
   local variables for List_Item.ParseErrList_Item:
      self

-}
-- semantic domain
type T_List_Item = (FocusDoc) ->
                   (ListType) ->
                   (Int) ->
                   ([Int]) ->
                   (([PathDoc],[PathDoc],[PathDoc])) ->
                   (Presentation -> Presentation) ->
                   (FiniteMap String (PathDoc, String)) ->
                   (FiniteMap String (PathDoc, String)) ->
                   ( (Int),(Presentation),(Presentation),(Presentation),(Presentation),([Presentation]),([Presentation]),(List_Item),(FiniteMap String (PathDoc, String)))
-- cata
sem_List_Item :: (List_Item) ->
                 (T_List_Item)
sem_List_Item ((HoleList_Item )) =
    (sem_List_Item_HoleList_Item )
sem_List_Item ((List_Item (_idd) (_elts))) =
    (sem_List_Item_List_Item (_idd) ((sem_ConsList_Item (_elts))))
sem_List_Item ((ParseErrList_Item (_node) (_presentation))) =
    (sem_List_Item_ParseErrList_Item (_node) (_presentation))
sem_List_Item_HoleList_Item :: (T_List_Item)
sem_List_Item_HoleList_Item  =
    \ _lhsIfocusD
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOself :: (List_Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1207, column 7)
            (_lhsOpres@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "Items" (HoleList_ItemNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG.ag"(line 1312, column 7)
            (_lhsOpres2@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 presHole _lhsIfocusD "Items" (HoleList_ItemNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG.ag"(line 1370, column 23)
            (_lhsOpress2@_) =
                [presHole _lhsIfocusD "Items" (HoleList_ItemNode _self _lhsIpath) _lhsIpath]
            -- "PresentationAG_Generated.ag"(line 617, column 23)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 868, column 7)
            (_lhsOpresXML@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presHole _lhsIfocusD "List_Item" (HoleList_ItemNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1090, column 7)
            (_lhsOpresTree@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "List_Item" (HoleList_ItemNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleList_Item
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOpress2,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_List_Item_List_Item :: (IDD) ->
                           (T_ConsList_Item) ->
                           (T_List_Item)
sem_List_Item_List_Item (idd_) (elts_) =
    \ _lhsIfocusD
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOself :: (List_Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsIpIdC :: (Int)
            _eltsIpress :: ([Presentation])
            _eltsIpress2 :: ([Presentation])
            _eltsIpressTree :: ([Presentation])
            _eltsIpressXML :: ([Presentation])
            _eltsIself :: (ConsList_Item)
            _eltsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsOfocusD :: (FocusDoc)
            _eltsOix :: (Int)
            _eltsOlistType :: (ListType)
            _eltsOpIdC :: (Int)
            _eltsOpath :: ([Int])
            _eltsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _eltsOtypeLoc :: (Presentation -> Presentation)
            _eltsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _eltsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _eltsIpIdC,_eltsIpress,_eltsIpress2,_eltsIpressTree,_eltsIpressXML,_eltsIself,_eltsIvarsInScopeAtFocus) =
                (elts_ (_eltsOfocusD) (_eltsOix) (_eltsOlistType) (_eltsOpIdC) (_eltsOpath) (_eltsOranges) (_eltsOtypeLoc) (_eltsOvarsInScope) (_eltsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1201, column 7)
            (_lhsOpres@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presentList _eltsIpress
            -- "PresentationAG.ag"(line 1306, column 7)
            (_lhsOpres2@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 col' _eltsIpress2
            -- "PresentationAG_Generated.ag"(line 616, column 7)
            (_eltsOix@_) =
                0
            -- "PresentationAG_Generated.ag"(line 615, column 7)
            (_eltsOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 614, column 7)
            (_lhsOpIdC@_) =
                _eltsIpIdC
            -- "PresentationAG_Generated.ag"(line 613, column 7)
            (_eltsOpIdC@_) =
                _lhsIpIdC + 100
            -- "PresentationAG_Generated.ag"(line 609, column 7)
            (_lhsOpress@_) =
                map ( loc (List_ItemNode _self _lhsIpath)
                    . presentFocus _lhsIfocusD _lhsIpath )
                    _eltsIpress
            -- "PresentationAG_Generated.ag"(line 862, column 7)
            (_lhsOpresXML@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                col _eltsIpressXML
            -- "PresentationAG_Generated.ag"(line 1084, column 7)
            (_lhsOpresTree@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col _eltsIpressTree
            -- self rule
            (_self@_) =
                List_Item idd_ _eltsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOpress2@_) =
                _eltsIpress2
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _eltsIvarsInScopeAtFocus
            -- copy rule (down)
            (_eltsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_eltsOlistType@_) =
                _lhsIlistType
            -- copy rule (down)
            (_eltsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_eltsOtypeLoc@_) =
                _lhsItypeLoc
            -- copy rule (down)
            (_eltsOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_eltsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOpress2,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_List_Item_ParseErrList_Item :: (Node) ->
                                   (Presentation) ->
                                   (T_List_Item)
sem_List_Item_ParseErrList_Item (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIlistType
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsItypeLoc
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOself :: (List_Item)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1204, column 7)
            (_lhsOpres@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- "PresentationAG.ag"(line 1309, column 7)
            (_lhsOpres2@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 presParseErr node_ presentation_
            -- "PresentationAG.ag"(line 1371, column 23)
            (_lhsOpress2@_) =
                [presParseErr node_ presentation_]
            -- "PresentationAG_Generated.ag"(line 618, column 23)
            (_lhsOpress@_) =
                [ presParseErr node_ presentation_ ]
            -- "PresentationAG_Generated.ag"(line 865, column 7)
            (_lhsOpresXML@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1087, column 7)
            (_lhsOpresTree@_) =
                loc (List_ItemNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrList_Item node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOpress2,_lhsOself,_lhsOvarsInScopeAtFocus)
-- List_Slide --------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      pres2                : Presentation
      presTree             : Presentation
      presXML              : Presentation
      press                : [Presentation]
      press2               : [Presentation]
      self                 : SELF

-}
{-
   local variables for List_Slide.HoleList_Slide:
      self

-}
{-
   local variables for List_Slide.List_Slide:
      self

-}
{-
   local variables for List_Slide.ParseErrList_Slide:
      self

-}
-- semantic domain
type T_List_Slide = (FocusDoc) ->
                    (Int) ->
                    ([Int]) ->
                    (([PathDoc],[PathDoc],[PathDoc])) ->
                    (FiniteMap String (PathDoc, String)) ->
                    (FiniteMap String (PathDoc, String)) ->
                    ( (Int),(Presentation),(Presentation),(Presentation),(Presentation),([Presentation]),([Presentation]),(List_Slide),(FiniteMap String (PathDoc, String)))
-- cata
sem_List_Slide :: (List_Slide) ->
                  (T_List_Slide)
sem_List_Slide ((HoleList_Slide )) =
    (sem_List_Slide_HoleList_Slide )
sem_List_Slide ((List_Slide (_idd) (_elts))) =
    (sem_List_Slide_List_Slide (_idd) ((sem_ConsList_Slide (_elts))))
sem_List_Slide ((ParseErrList_Slide (_node) (_presentation))) =
    (sem_List_Slide_ParseErrList_Slide (_node) (_presentation))
sem_List_Slide_HoleList_Slide :: (T_List_Slide)
sem_List_Slide_HoleList_Slide  =
    \ _lhsIfocusD
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOself :: (List_Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1174, column 7)
            (_lhsOpres@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "Slides" (HoleList_SlideNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG.ag"(line 1268, column 7)
            (_lhsOpres2@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 presHole _lhsIfocusD "Slides" (HoleList_SlideNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG.ag"(line 1354, column 24)
            (_lhsOpress2@_) =
                [presHole _lhsIfocusD "Slides" (HoleList_SlideNode _self _lhsIpath) _lhsIpath]
            -- "PresentationAG_Generated.ag"(line 591, column 24)
            (_lhsOpress@_) =
                []
            -- "PresentationAG_Generated.ag"(line 853, column 7)
            (_lhsOpresXML@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presHole _lhsIfocusD "List_Slide" (HoleList_SlideNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1075, column 7)
            (_lhsOpresTree@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presHole _lhsIfocusD "List_Slide" (HoleList_SlideNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleList_Slide
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOpress2,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_List_Slide_List_Slide :: (IDD) ->
                             (T_ConsList_Slide) ->
                             (T_List_Slide)
sem_List_Slide_List_Slide (idd_) (elts_) =
    \ _lhsIfocusD
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOself :: (List_Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsIpIdC :: (Int)
            _eltsIpress :: ([Presentation])
            _eltsIpress2 :: ([Presentation])
            _eltsIpressTree :: ([Presentation])
            _eltsIpressXML :: ([Presentation])
            _eltsIself :: (ConsList_Slide)
            _eltsIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _eltsOfocusD :: (FocusDoc)
            _eltsOix :: (Int)
            _eltsOpIdC :: (Int)
            _eltsOpath :: ([Int])
            _eltsOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _eltsOvarsInScope :: (FiniteMap String (PathDoc, String))
            _eltsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _eltsIpIdC,_eltsIpress,_eltsIpress2,_eltsIpressTree,_eltsIpressXML,_eltsIself,_eltsIvarsInScopeAtFocus) =
                (elts_ (_eltsOfocusD) (_eltsOix) (_eltsOpIdC) (_eltsOpath) (_eltsOranges) (_eltsOvarsInScope) (_eltsOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1168, column 7)
            (_lhsOpres@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presentList _eltsIpress
            -- "PresentationAG.ag"(line 1262, column 7)
            (_lhsOpres2@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 col' $ intersperse (col' [vSpace 4, hLine, vSpace 4]) _eltsIpress2
            -- "PresentationAG_Generated.ag"(line 590, column 7)
            (_eltsOix@_) =
                0
            -- "PresentationAG_Generated.ag"(line 589, column 7)
            (_eltsOpath@_) =
                _lhsIpath
            -- "PresentationAG_Generated.ag"(line 588, column 7)
            (_lhsOpIdC@_) =
                _eltsIpIdC
            -- "PresentationAG_Generated.ag"(line 587, column 7)
            (_eltsOpIdC@_) =
                _lhsIpIdC + 100
            -- "PresentationAG_Generated.ag"(line 583, column 7)
            (_lhsOpress@_) =
                map ( loc (List_SlideNode _self _lhsIpath)
                    . presentFocus _lhsIfocusD _lhsIpath )
                    _eltsIpress
            -- "PresentationAG_Generated.ag"(line 847, column 7)
            (_lhsOpresXML@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                col _eltsIpressXML
            -- "PresentationAG_Generated.ag"(line 1069, column 7)
            (_lhsOpresTree@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col _eltsIpressTree
            -- self rule
            (_self@_) =
                List_Slide idd_ _eltsIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOpress2@_) =
                _eltsIpress2
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _eltsIvarsInScopeAtFocus
            -- copy rule (down)
            (_eltsOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_eltsOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_eltsOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_eltsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOpress2,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_List_Slide_ParseErrList_Slide :: (Node) ->
                                     (Presentation) ->
                                     (T_List_Slide)
sem_List_Slide_ParseErrList_Slide (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOpress :: ([Presentation])
            _lhsOpress2 :: ([Presentation])
            _lhsOself :: (List_Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1171, column 7)
            (_lhsOpres@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- "PresentationAG.ag"(line 1265, column 7)
            (_lhsOpres2@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                 presParseErr node_ presentation_
            -- "PresentationAG.ag"(line 1355, column 24)
            (_lhsOpress2@_) =
                [presParseErr node_ presentation_]
            -- "PresentationAG_Generated.ag"(line 592, column 24)
            (_lhsOpress@_) =
                [ presParseErr node_ presentation_ ]
            -- "PresentationAG_Generated.ag"(line 850, column 7)
            (_lhsOpresXML@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1072, column 7)
            (_lhsOpresTree@_) =
                loc (List_SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrList_Slide node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOpress,_lhsOpress2,_lhsOself,_lhsOvarsInScopeAtFocus)
-- PPPresentation ----------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for PPPresentation.HolePPPresentation:
      self

-}
{-
   local variables for PPPresentation.PPPresentation:
      self

-}
{-
   local variables for PPPresentation.ParseErrPPPresentation:
      self

-}
-- semantic domain
type T_PPPresentation = (FocusDoc) ->
                        (Int) ->
                        (Int) ->
                        ([Int]) ->
                        (([PathDoc],[PathDoc],[PathDoc])) ->
                        (FiniteMap String (PathDoc, String)) ->
                        (FiniteMap String (PathDoc, String)) ->
                        ( (Int),(Presentation),(Presentation),(Presentation),(PPPresentation),(FiniteMap String (PathDoc, String)))
-- cata
sem_PPPresentation :: (PPPresentation) ->
                      (T_PPPresentation)
sem_PPPresentation ((HolePPPresentation )) =
    (sem_PPPresentation_HolePPPresentation )
sem_PPPresentation ((PPPresentation (_idd) (_viewType) (_slides))) =
    (sem_PPPresentation_PPPresentation (_idd) ((sem_Bool_ (_viewType))) ((sem_List_Slide (_slides))))
sem_PPPresentation ((ParseErrPPPresentation (_node) (_presentation))) =
    (sem_PPPresentation_ParseErrPPPresentation (_node) (_presentation))
sem_PPPresentation_HolePPPresentation :: (T_PPPresentation)
sem_PPPresentation_HolePPPresentation  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (PPPresentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG_Generated.ag"(line 432, column 28)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "PPPresentation" (HolePPPresentationNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 747, column 28)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "PPPresentation" (HolePPPresentationNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 969, column 28)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "PPPresentation" (HolePPPresentationNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HolePPPresentation
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_PPPresentation_PPPresentation :: (IDD) ->
                                     (T_Bool_) ->
                                     (T_List_Slide) ->
                                     (T_PPPresentation)
sem_PPPresentation_PPPresentation (idd_) (viewType_) (slides_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (PPPresentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _viewTypeIbool :: (Bool)
            _viewTypeIpIdC :: (Int)
            _viewTypeIpres :: (Presentation)
            _viewTypeIpresTree :: (Presentation)
            _viewTypeIpresXML :: (Presentation)
            _viewTypeIself :: (Bool_)
            _viewTypeOfocusD :: (FocusDoc)
            _viewTypeOix :: (Int)
            _viewTypeOpIdC :: (Int)
            _viewTypeOpath :: ([Int])
            _slidesIpIdC :: (Int)
            _slidesIpres :: (Presentation)
            _slidesIpres2 :: (Presentation)
            _slidesIpresTree :: (Presentation)
            _slidesIpresXML :: (Presentation)
            _slidesIpress :: ([Presentation])
            _slidesIpress2 :: ([Presentation])
            _slidesIself :: (List_Slide)
            _slidesIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _slidesOfocusD :: (FocusDoc)
            _slidesOpIdC :: (Int)
            _slidesOpath :: ([Int])
            _slidesOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _slidesOvarsInScope :: (FiniteMap String (PathDoc, String))
            _slidesOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _viewTypeIbool,_viewTypeIpIdC,_viewTypeIpres,_viewTypeIpresTree,_viewTypeIpresXML,_viewTypeIself) =
                (viewType_ (_viewTypeOfocusD) (_viewTypeOix) (_viewTypeOpIdC) (_viewTypeOpath))
            ( _slidesIpIdC,_slidesIpres,_slidesIpres2,_slidesIpresTree,_slidesIpresXML,_slidesIpress,_slidesIpress2,_slidesIself,_slidesIvarsInScopeAtFocus) =
                (slides_ (_slidesOfocusD) (_slidesOpIdC) (_slidesOpath) (_slidesOranges) (_slidesOvarsInScope) (_slidesOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1149, column 20)
            (_lhsOpres@_) =
                loc (PPPresentationNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                   col' $ [ row' [ text "View type: "
                               ,  if _viewTypeIbool
                                  then (box $ text $ "Edit view") `addPopupItems` [("Change to presentation view",toggleViewType _lhsIpath _self)]
                                  else (box $ text $"Presentation view") `addPopupItems` [("Change to edit view",toggleViewType _lhsIpath _self)]
                                ]
                        , vSpace 10
                        ] ++
                          if _viewTypeIbool
                          then
                            [ row' [ text "pres ",key NoIDP "=",text " Presentation ", text " $"]
                            , row' [ text "         ", _slidesIpres]
                            ]
                          else
                            [ _slidesIpres2
                            ]
            -- "PresentationAG_Generated.ag"(line 431, column 20)
            (_lhsOpIdC@_) =
                _slidesIpIdC
            -- "PresentationAG_Generated.ag"(line 430, column 20)
            (_slidesOpIdC@_) =
                _viewTypeIpIdC
            -- "PresentationAG_Generated.ag"(line 429, column 20)
            (_viewTypeOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 438, column 20)
            (_slidesOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 437, column 20)
            (_viewTypeOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 746, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (PPPresentationNode _self _lhsIpath) _lhsIpath "PPPresentation" [ _viewTypeIpresXML, _slidesIpresXML ]
            -- "PresentationAG_Generated.ag"(line 968, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (PPPresentationNode _self _lhsIpath) _lhsIpath "PPPresentation" [ _viewTypeIpresTree, _slidesIpresTree ]
            -- self rule
            (_self@_) =
                PPPresentation idd_ _viewTypeIself _slidesIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _slidesIvarsInScopeAtFocus
            -- copy rule (down)
            (_viewTypeOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_viewTypeOix@_) =
                _lhsIix
            -- copy rule (down)
            (_slidesOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_slidesOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_slidesOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_slidesOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_PPPresentation_ParseErrPPPresentation :: (Node) ->
                                             (Presentation) ->
                                             (T_PPPresentation)
sem_PPPresentation_ParseErrPPPresentation (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (PPPresentation)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG_Generated.ag"(line 433, column 28)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 748, column 28)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 970, column 28)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrPPPresentation node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
-- Slide -------------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]
      ranges               : ([PathDoc],[PathDoc],[PathDoc])
      varsInScope          : FiniteMap String (PathDoc, String)

   chained attributes:
      pIdC                 : Int
      varsInScopeAtFocus   : FiniteMap String (PathDoc, String)

   synthesised attributes:
      pres                 : Presentation
      pres2                : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF

-}
{-
   local variables for Slide.HoleSlide:
      self

-}
{-
   local variables for Slide.ParseErrSlide:
      self

-}
{-
   local variables for Slide.Slide:
      self

-}
-- semantic domain
type T_Slide = (FocusDoc) ->
               (Int) ->
               (Int) ->
               ([Int]) ->
               (([PathDoc],[PathDoc],[PathDoc])) ->
               (FiniteMap String (PathDoc, String)) ->
               (FiniteMap String (PathDoc, String)) ->
               ( (Int),(Presentation),(Presentation),(Presentation),(Presentation),(Slide),(FiniteMap String (PathDoc, String)))
-- cata
sem_Slide :: (Slide) ->
             (T_Slide)
sem_Slide ((HoleSlide )) =
    (sem_Slide_HoleSlide )
sem_Slide ((ParseErrSlide (_node) (_presentation))) =
    (sem_Slide_ParseErrSlide (_node) (_presentation))
sem_Slide ((Slide (_idd) (_title) (_itemList))) =
    (sem_Slide_Slide (_idd) ((sem_String_ (_title))) ((sem_ItemList (_itemList))))
sem_Slide_HoleSlide :: (T_Slide)
sem_Slide_HoleSlide  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1358, column 19)
            (_lhsOpres2@_) =
                presHole _lhsIfocusD "Slide" (HoleSlideNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 445, column 19)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "Slide" (HoleSlideNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 753, column 19)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "Slide" (HoleSlideNode _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 975, column 19)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "Slide" (HoleSlideNode _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleSlide
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_Slide_ParseErrSlide :: (Node) ->
                           (Presentation) ->
                           (T_Slide)
sem_Slide_ParseErrSlide (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            -- "PresentationAG.ag"(line 1359, column 19)
            (_lhsOpres2@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 446, column 19)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 754, column 19)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 976, column 19)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrSlide node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
            -- copy rule (chain)
            (_lhsOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
sem_Slide_Slide :: (IDD) ->
                   (T_String_) ->
                   (T_ItemList) ->
                   (T_Slide)
sem_Slide_Slide (idd_) (title_) (itemList_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath
      _lhsIranges
      _lhsIvarsInScope
      _lhsIvarsInScopeAtFocus ->
        let _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpres2 :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (Slide)
            _lhsOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _titleIlength :: (Int)
            _titleIpIdC :: (Int)
            _titleIpres :: (Presentation)
            _titleIpresTree :: (Presentation)
            _titleIpresXML :: (Presentation)
            _titleIself :: (String_)
            _titleIstr :: (String)
            _titleOfocusD :: (FocusDoc)
            _titleOix :: (Int)
            _titleOpIdC :: (Int)
            _titleOpath :: ([Int])
            _itemListIpIdC :: (Int)
            _itemListIpres :: (Presentation)
            _itemListIpres2 :: (Presentation)
            _itemListIpresTree :: (Presentation)
            _itemListIpresXML :: (Presentation)
            _itemListIself :: (ItemList)
            _itemListIvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            _itemListOfocusD :: (FocusDoc)
            _itemListOix :: (Int)
            _itemListOpIdC :: (Int)
            _itemListOpath :: ([Int])
            _itemListOranges :: (([PathDoc],[PathDoc],[PathDoc]))
            _itemListOvarsInScope :: (FiniteMap String (PathDoc, String))
            _itemListOvarsInScopeAtFocus :: (FiniteMap String (PathDoc, String))
            ( _titleIlength,_titleIpIdC,_titleIpres,_titleIpresTree,_titleIpresXML,_titleIself,_titleIstr) =
                (title_ (_titleOfocusD) (_titleOix) (_titleOpIdC) (_titleOpath))
            ( _itemListIpIdC,_itemListIpres,_itemListIpres2,_itemListIpresTree,_itemListIpresXML,_itemListIself,_itemListIvarsInScopeAtFocus) =
                (itemList_ (_itemListOfocusD) (_itemListOix) (_itemListOpIdC) (_itemListOpath) (_itemListOranges) (_itemListOvarsInScope) (_itemListOvarsInScopeAtFocus))
            -- "PresentationAG.ag"(line 1187, column 11)
            (_lhsOpres@_) =
                loc (SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                  col' [ row' [ text "Slide ", row' [ text "\"", _titleIpres, text "\""
                                                             ] `withColor` darkViolet  , text " $"]
                       , row' [ text "  ", _itemListIpres ]
                       ]
            -- "PresentationAG.ag"(line 1273, column 11)
            (_lhsOpres2@_) =
                loc (SlideNode _self _lhsIpath) $ structural $ presentFocus _lhsIfocusD _lhsIpath $
                   slide _titleIpres
                         _itemListIpres2
            -- "PresentationAG_Generated.ag"(line 444, column 11)
            (_lhsOpIdC@_) =
                _itemListIpIdC
            -- "PresentationAG_Generated.ag"(line 443, column 11)
            (_itemListOpIdC@_) =
                _titleIpIdC
            -- "PresentationAG_Generated.ag"(line 442, column 11)
            (_titleOpIdC@_) =
                _lhsIpIdC + 0
            -- "PresentationAG_Generated.ag"(line 451, column 11)
            (_itemListOpath@_) =
                _lhsIpath++[1]
            -- "PresentationAG_Generated.ag"(line 450, column 11)
            (_titleOpath@_) =
                _lhsIpath++[0]
            -- "PresentationAG_Generated.ag"(line 752, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (SlideNode _self _lhsIpath) _lhsIpath "Slide" [ _titleIpresXML, _itemListIpresXML ]
            -- "PresentationAG_Generated.ag"(line 974, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (SlideNode _self _lhsIpath) _lhsIpath "Slide" [ _titleIpresTree, _itemListIpresTree ]
            -- self rule
            (_self@_) =
                Slide idd_ _titleIself _itemListIself
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (up)
            (_lhsOvarsInScopeAtFocus@_) =
                _itemListIvarsInScopeAtFocus
            -- copy rule (down)
            (_titleOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_titleOix@_) =
                _lhsIix
            -- copy rule (down)
            (_itemListOfocusD@_) =
                _lhsIfocusD
            -- copy rule (down)
            (_itemListOix@_) =
                _lhsIix
            -- copy rule (down)
            (_itemListOranges@_) =
                _lhsIranges
            -- copy rule (down)
            (_itemListOvarsInScope@_) =
                _lhsIvarsInScope
            -- copy rule (down)
            (_itemListOvarsInScopeAtFocus@_) =
                _lhsIvarsInScopeAtFocus
        in  ( _lhsOpIdC,_lhsOpres,_lhsOpres2,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOvarsInScopeAtFocus)
-- String_ -----------------------------------------------------
{-
   inherited attributes:
      focusD               : FocusDoc
      ix                   : Int
      path                 : [Int]

   chained attributes:
      pIdC                 : Int

   synthesised attributes:
      length               : Int
      pres                 : Presentation
      presTree             : Presentation
      presXML              : Presentation
      self                 : SELF
      str                  : String

-}
{-
   local variables for String_.HoleString_:
      self

-}
{-
   local variables for String_.ParseErrString_:
      self

-}
{-
   local variables for String_.String_:
      self

-}
-- semantic domain
type T_String_ = (FocusDoc) ->
                 (Int) ->
                 (Int) ->
                 ([Int]) ->
                 ( (Int),(Int),(Presentation),(Presentation),(Presentation),(String_),(String))
-- cata
sem_String_ :: (String_) ->
               (T_String_)
sem_String_ ((HoleString_ )) =
    (sem_String__HoleString_ )
sem_String_ ((ParseErrString_ (_node) (_presentation))) =
    (sem_String__ParseErrString_ (_node) (_presentation))
sem_String_ ((String_ (_idd) (_string))) =
    (sem_String__String_ (_idd) (_string))
sem_String__HoleString_ :: (T_String_)
sem_String__HoleString_  =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOlength :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (String_)
            _lhsOstr :: (String)
            -- "PresentationAG.ag"(line 1412, column 13)
            (_lhsOstr@_) =
                ""
            -- "PresentationAG.ag"(line 1411, column 13)
            (_lhsOlength@_) =
                0
            -- "PresentationAG_Generated.ag"(line 490, column 21)
            (_lhsOpres@_) =
                presHole _lhsIfocusD "String_" (HoleString_Node _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 785, column 21)
            (_lhsOpresXML@_) =
                presHole _lhsIfocusD "String_" (HoleString_Node _self _lhsIpath) _lhsIpath
            -- "PresentationAG_Generated.ag"(line 1007, column 21)
            (_lhsOpresTree@_) =
                presHole _lhsIfocusD "String_" (HoleString_Node _self _lhsIpath) _lhsIpath
            -- self rule
            (_self@_) =
                HoleString_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOlength,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOstr)
sem_String__ParseErrString_ :: (Node) ->
                               (Presentation) ->
                               (T_String_)
sem_String__ParseErrString_ (node_) (presentation_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOlength :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (String_)
            _lhsOstr :: (String)
            -- "PresentationAG.ag"(line 1412, column 13)
            (_lhsOstr@_) =
                ""
            -- "PresentationAG.ag"(line 1411, column 13)
            (_lhsOlength@_) =
                0
            -- "PresentationAG_Generated.ag"(line 491, column 21)
            (_lhsOpres@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 786, column 21)
            (_lhsOpresXML@_) =
                presParseErr node_ presentation_
            -- "PresentationAG_Generated.ag"(line 1008, column 21)
            (_lhsOpresTree@_) =
                presParseErr node_ presentation_
            -- self rule
            (_self@_) =
                ParseErrString_ node_ presentation_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOlength,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOstr)
sem_String__String_ :: (IDD) ->
                       (String) ->
                       (T_String_)
sem_String__String_ (idd_) (string_) =
    \ _lhsIfocusD
      _lhsIix
      _lhsIpIdC
      _lhsIpath ->
        let _lhsOlength :: (Int)
            _lhsOpIdC :: (Int)
            _lhsOpres :: (Presentation)
            _lhsOpresTree :: (Presentation)
            _lhsOpresXML :: (Presentation)
            _lhsOself :: (String_)
            _lhsOstr :: (String)
            -- "PresentationAG.ag"(line 1404, column 7)
            (_lhsOpres@_) =
                loc (String_Node _self _lhsIpath) $ parsing $ presentFocus _lhsIfocusD _lhsIpath $
                  row' [text string_, text ""]
            -- "PresentationAG.ag"(line 1409, column 13)
            (_lhsOstr@_) =
                string_
            -- "PresentationAG.ag"(line 1408, column 13)
            (_lhsOlength@_) =
                length string_
            -- "PresentationAG_Generated.ag"(line 784, column 7)
            (_lhsOpresXML@_) =
                presentElementXML _lhsIfocusD (String_Node _self _lhsIpath) _lhsIpath "String_" [ presentPrimXMLString string_ ]
            -- "PresentationAG_Generated.ag"(line 1006, column 7)
            (_lhsOpresTree@_) =
                presentElementTree _lhsIfocusD (String_Node _self _lhsIpath) _lhsIpath "String_" [ presentPrimTreeString string_ ]
            -- self rule
            (_self@_) =
                String_ idd_ string_
            -- self rule
            (_lhsOself@_) =
                _self
            -- copy rule (chain)
            (_lhsOpIdC@_) =
                _lhsIpIdC
        in  ( _lhsOlength,_lhsOpIdC,_lhsOpres,_lhsOpresTree,_lhsOpresXML,_lhsOself,_lhsOstr)


