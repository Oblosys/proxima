-----------------------------------------------------------------------------------------
{-| Module      : ScannerAG.ag
    Copyright   : (c) 2007 Martijn Schrage
    License     : All Rights Reserved

    Maintainer  : martijn@cs.uu.nl
    Stability   : experimental
    Portability : 
-}
-----------------------------------------------------------------------------------------
{
import PresTypes
}

DATA Layout
  | EmptyP      id : IDP
  | StringP     id : IDP text : String
  | ImageP      id : IDP src : String style : ImgStyle
  | PolyP       id : IDP pointList : {[ (Float, Float) ]} lineWidth : Int style : Style
  | RectangleP  id : IDP w,h : Int lineWidth : Int style : Style
  | EllipseP	id : IDP w, h : Int lineWidth : Int style : Style
  | RowP        id : IDP hRefNr : Int presentationList : LayoutList
  | ColP        id : IDP vRefNr : Int formatted : Formatted presentationList : LayoutList
  | OverlayP    id : IDP              presentationList : LayoutList
  | GraphP      id : IDP d : Dirty w,h : Int edges : {[(Int,Int)]} presentationList : LayoutList 
  | VertexP     id : IDP i,x,y: Int outline : Outline child : Layout
  | FormatterP  id : IDP presentationList : LayoutList
  | WithP       attrRule : AttrRule  child : Layout
  | StructuralP id : IDP child : Layout
  | ParsingP    id : IDP lexer : Lexer child : Layout
  | LocatorP location : {node} child : Layout
  | ArrangedP

TYPE LayoutList = [Layout]

SEM Layout [ lloc : {Maybe node} | i : Int | ]
  | LocatorP
      child.lloc = Just @location

ATTR LayoutList [ lloc : {Maybe node} | i : Int | ]